<!DOCTYPE html>
<html lang="en">
<head>
<!-- Azure Application Insights -->
<script type="text/javascript">
!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\./g,"-"),hasFullStack:!1,stack:n+"\nSnippet failed to load ["+a+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(S&&S.pathname||"_unknown_")+"\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js",
crossOrigin: "anonymous",
cfg: {
connectionString: "InstrumentationKey=104926d6-679a-4baa-919e-665bea6facac;IngestionEndpoint=https://eastus-8.in.applicationinsights.azure.com/;LiveEndpoint=https://eastus.livediagnostics.monitor.azure.com/;ApplicationId=2e7de093-fa39-4859-a48b-515db3520828"
}
});
</script>
<!-- End Application Insights -->

<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleansheet Platform</title>
    <link rel="icon" type="image/png" href="assets/high-resolution-logo-files/white-on-transparent.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@300&family=Questrial&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        /* Cleansheet Design System - Corporate Professional */
        :root {
            /* Brand Colors */
            --color-primary-blue: #0066CC;
            --color-accent-blue: #004C99;
            --color-dark: #1a1a1a;

            /* Neutral Colors */
            --color-neutral-text: #333333;
            --color-neutral-text-light: #666666;
            --color-neutral-text-muted: #999999;
            --color-neutral-background: #f5f5f7;
            --color-neutral-background-secondary: #f8f8f8;
            --color-neutral-border: #e5e5e7;
            --color-neutral-white: #ffffff;

            /* Typography */
            --font-family-ui: 'Questrial', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-family-body: 'Barlow', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-size-h1: clamp(28px, 4vw, 32px);
            --font-size-h2: clamp(24px, 3.5vw, 36px);
            --font-size-h3: clamp(18px, 3vw, 24px);
            --font-size-body: clamp(14px, 2.5vw, 16px);
            --font-size-small: clamp(12px, 2.2vw, 14px);

            /* Spacing */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 20px;
            --spacing-xxl: 24px;
            --spacing-xxxl: 32px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-body);
            font-weight: 300;
            background: var(--color-neutral-background);
            color: var(--color-neutral-text);
            line-height: 1.6;
        }

        /* Header */
        header {
            background: var(--color-dark);
            color: var(--color-neutral-white);
            padding: var(--spacing-xl) var(--spacing-xxl);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--spacing-xl);
        }

        .header-text {
            flex: 1;
        }

        .header-logo {
            height: 60px;
            width: auto;
        }

        h1 {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-h1);
            color: #e0e0e0;
            margin-bottom: var(--spacing-sm);
        }

        h2, h3, h4, h5, h6 {
            font-family: var(--font-family-ui);
        }

        .tagline {
            font-size: var(--font-size-body);
            color: rgba(255,255,255,0.8);
        }

        @media (max-width: 768px) {
            .header-logo {
                height: 40px;
            }
        }

        /* Main Content */
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-xxxl) var(--spacing-xxl);
        }

        .hero {
            text-align: center;
            margin-bottom: var(--spacing-xxxl);
        }

        .hero h2 {
            font-size: var(--font-size-h2);
            color: var(--color-dark);
            margin-bottom: var(--spacing-lg);
        }

        .hero p {
            font-size: var(--font-size-body);
            color: var(--color-neutral-text-light);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.7;
        }

        /* Feature Grid */
        .features {
            margin-bottom: var(--spacing-xxxl);
        }

        .feature-group {
            margin-bottom: var(--spacing-xxxl);
        }

        .feature-group-title {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-h3);
            color: var(--color-dark);
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-md);
            border-bottom: 2px solid var(--color-neutral-border);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-xxl);
        }

        .feature-card {
            background: var(--color-neutral-white);
            border-radius: var(--spacing-md);
            padding: var(--spacing-xxxl);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid var(--color-neutral-border);
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: var(--color-primary-blue);
            border-radius: var(--spacing-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin-bottom: var(--spacing-xl);
            color: white;
        }

        .feature-icon.dark {
            background: var(--color-dark);
            color: white;
        }

        .feature-icon.accent {
            background: var(--color-accent-blue);
            color: white;
        }

        .feature-card h3 {
            font-size: var(--font-size-h3);
            color: var(--color-dark);
            margin-bottom: var(--spacing-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .coming-soon-badge {
            display: inline-block;
            padding: 4px 10px;
            background: var(--color-primary-blue);
            color: white;
            font-size: 11px;
            font-weight: 600;
            border-radius: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .feature-card p {
            font-size: var(--font-size-body);
            color: var(--color-neutral-text-light);
            margin-bottom: var(--spacing-xl);
            line-height: 1.6;
        }

        .feature-link {
            display: inline-block;
            padding: var(--spacing-md) var(--spacing-xxl);
            background: var(--color-dark);
            color: var(--color-neutral-white);
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            font-size: var(--font-size-small);
            transition: all 0.2s;
        }

        .feature-link:hover {
            background: #333333;
        }

        .feature-link.primary {
            background: var(--color-primary-blue);
            color: white;
        }

        .feature-link.primary:hover {
            background: #0052a3;
        }

        /* Coming Soon Section */
        .coming-soon {
            text-align: center;
            background: var(--color-neutral-white);
            border-radius: var(--spacing-md);
            padding: var(--spacing-xxxl);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid var(--color-neutral-border);
        }

        .coming-soon h2 {
            font-size: var(--font-size-h3);
            color: var(--color-primary-blue);
            margin-bottom: var(--spacing-lg);
        }

        .coming-soon-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-xxl);
            margin-top: var(--spacing-xxxl);
            text-align: left;
        }

        .coming-soon-item {
            background: var(--color-neutral-background-secondary);
            padding: var(--spacing-xl);
            border-radius: var(--spacing-sm);
            font-size: 16px;
            color: var(--color-neutral-text-light);
            border: 1px solid var(--color-neutral-border);
        }

        .coming-soon-item strong {
            color: var(--color-dark);
            display: block;
            margin-bottom: var(--spacing-sm);
            font-size: 18px;
        }

        /* Footer */
        footer {
            background: var(--color-dark);
            color: rgba(255,255,255,0.7);
            padding: var(--spacing-xxl);
            text-align: center;
            margin-top: var(--spacing-xxxl);
        }

        footer a {
            color: var(--color-neutral-white);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            header {
                padding: var(--spacing-lg);
            }

            main {
                padding: var(--spacing-xxl) var(--spacing-lg);
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .feature-card {
                padding: var(--spacing-xxl);
            }

            .coming-soon {
                padding: var(--spacing-xxl);
            }

            .coming-soon-list {
                grid-template-columns: 1fr;
            }
        }

        /* Canvas Modal */
        .canvas-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
        }

        .canvas-modal.active {
            display: flex;
        }

        .canvas-modal-content {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 1200px;
            height: 80vh;
            max-height: 800px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .canvas-modal-header {
            padding: 24px 32px;
            border-bottom: 2px solid var(--color-neutral-border);
            background: var(--color-dark);
            border-radius: 16px 16px 0 0;
        }

        .canvas-modal-header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .canvas-modal-header h2 {
            font-family: var(--font-family-ui);
            font-size: 24px;
            color: white;
            margin: 0;
        }

        .persona-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .persona-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-family: var(--font-family-ui);
            font-size: 13px;
            font-weight: 600;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .persona-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .persona-btn.active {
            background: var(--color-primary-blue);
            border-color: var(--color-primary-blue);
        }

        .canvas-modal-close {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 28px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 300;
            line-height: 1;
        }

        .canvas-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .canvas-modal-body {
            flex: 1;
            padding: 24px;
            overflow: hidden;
            background: var(--color-neutral-background);
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 24px;
            transition: grid-template-columns 0.3s ease;
            min-height: 0;
            position: relative;
        }

        .canvas-modal-body.collapsed {
            grid-template-columns: 0px 1fr;
            gap: 0;
        }

        #canvas-mindmap {
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 12px;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);
            overflow: auto;
            position: relative;
        }

        #canvas-mindmap svg {
            display: block;
            min-width: 100%;
            min-height: 100%;
        }

        .canvas-right-panel {
            display: flex;
            flex-direction: column;
            gap: 16px;
            overflow-y: auto;
            overflow-x: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .canvas-modal-body.collapsed .canvas-right-panel {
            opacity: 0;
            transform: translateX(-20px);
            pointer-events: none;
        }

        .panel-collapse-toggle {
            position: absolute;
            top: 50%;
            left: 374px;
            transform: translateY(-50%);
            background: white;
            border: 1px solid var(--color-neutral-border);
            border-radius: 0 8px 8px 0;
            padding: 12px 8px;
            cursor: pointer;
            z-index: 101;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            color: var(--color-dark);
            font-size: 20px;
            display: flex;
            align-items: center;
        }

        .canvas-modal-body.collapsed .panel-collapse-toggle {
            left: 0;
        }

        .panel-collapse-toggle:hover {
            background: var(--color-primary-blue);
            color: white;
            border-color: var(--color-primary-blue);
        }

        .calendar-widget, .ai-assistant-widget {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .calendar-widget {
            flex-shrink: 0;
            max-height: 280px;
        }

        .ai-assistant-widget {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 450px;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--color-neutral-border);
        }

        .widget-header h3 {
            font-family: var(--font-family-ui);
            font-size: 14px;
            font-weight: 600;
            color: var(--color-dark);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .widget-header h3 i {
            font-size: 18px;
        }

        .sync-btn {
            padding: 6px 12px;
            background: white;
            border: 2px solid var(--color-primary-blue);
            color: var(--color-primary-blue);
            font-family: var(--font-family-ui);
            font-size: 11px;
            font-weight: 600;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .sync-btn:hover {
            background: var(--color-primary-blue);
            color: white;
        }

        .calendar-events {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 200px;
            overflow-y: auto;
        }

        .calendar-event {
            padding: 10px 12px;
            background: var(--color-neutral-background);
            border-radius: 6px;
            border-left: 3px solid var(--color-primary-blue);
        }

        .event-time {
            font-size: 10px;
            font-weight: 600;
            color: var(--color-primary-blue);
            margin-bottom: 3px;
        }

        .event-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--color-dark);
            margin-bottom: 2px;
        }

        .event-details {
            font-size: 10px;
            color: var(--color-neutral-text-light);
        }

        .ai-chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ai-message {
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 13px;
            line-height: 1.5;
        }

        .ai-message.assistant {
            background: var(--color-neutral-background);
            color: var(--color-dark);
            align-self: flex-start;
            max-width: 85%;
        }

        .ai-message.user {
            background: var(--color-primary-blue);
            color: white;
            align-self: flex-end;
            max-width: 85%;
        }

        .ai-input-area {
            display: flex;
            gap: 8px;
            padding-top: 12px;
            border-top: 1px solid var(--color-neutral-border);
        }

        .ai-input {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid var(--color-neutral-border);
            border-radius: 8px;
            font-family: var(--font-family-body);
            font-size: 13px;
            outline: none;
            transition: border-color 0.2s;
        }

        .ai-input:focus {
            border-color: var(--color-primary-blue);
        }

        .ai-send-btn {
            padding: 10px 16px;
            background: var(--color-primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            font-family: var(--font-family-ui);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .ai-send-btn:hover {
            background: var(--color-accent-blue);
        }

        /* Interview Prep Slideout (60% width) - Inside Canvas Modal */
        .interview-slideout {
            position: absolute;
            top: 0;
            right: -60%;
            width: 60%;
            height: 100%;
            background: white;
            box-shadow: -4px 0 16px rgba(0,0,0,0.2);
            z-index: 100;
            transition: right 0.4s ease;
            display: flex;
            flex-direction: column;
        }

        .interview-slideout.active {
            right: 0;
        }

        /* Canvas modal needs to be position relative for slideout */
        .canvas-modal-content {
            position: relative;
            overflow: hidden;
        }

        .slideout-header {
            padding: 24px;
            background: var(--color-dark);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--color-neutral-border);
        }

        .slideout-header h2 {
            font-family: var(--font-family-ui);
            font-size: 20px;
            margin: 0;
        }

        .slideout-close {
            background: none;
            border: none;
            color: white;
            font-size: 32px;
            cursor: pointer;
            line-height: 1;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.2s;
        }

        .slideout-close:hover {
            opacity: 0.7;
        }

        .slideout-body {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            background: var(--color-neutral-background);
            display: flex;
            flex-direction: column;
        }

        .add-story-btn {
            padding: 8px 16px;
            background: var(--color-primary-blue);
            color: white;
            border: none;
            border-radius: 6px;
            font-family: var(--font-family-ui);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 16px;
        }

        .add-story-btn:hover {
            background: var(--color-accent-blue);
            box-shadow: 0 2px 8px rgba(0,102,204,0.3);
        }

        .linkedin-connect-btn {
            padding: 8px 16px;
            background: #0077B5;
            color: white;
            border: none;
            border-radius: 6px;
            font-family: var(--font-family-ui);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .linkedin-connect-btn:hover {
            background: #005E93;
            box-shadow: 0 2px 8px rgba(0,119,181,0.3);
        }

        .upload-resume-btn {
            padding: 8px 16px;
            background: var(--color-accent-blue);
            color: white;
            border: none;
            border-radius: 6px;
            font-family: var(--font-family-ui);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .upload-resume-btn:hover {
            background: var(--color-dark);
            box-shadow: 0 2px 8px rgba(0,70,153,0.3);
        }

        .stories-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .story-card {
            background: white;
            border: 1px solid var(--color-neutral-border);
            border-radius: 8px;
            padding: 14px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .story-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .story-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .story-title {
            font-family: var(--font-family-ui);
            font-size: 13px;
            font-weight: 600;
            color: var(--color-dark);
            margin: 0 0 4px 0;
            line-height: 1.3;
        }

        .story-actions {
            display: flex;
            gap: 4px;
            flex-shrink: 0;
        }

        .story-action-btn {
            background: none;
            border: none;
            color: var(--color-primary-blue);
            font-size: 16px;
            cursor: pointer;
            padding: 2px;
            transition: all 0.2s;
        }

        .story-action-btn:hover {
            color: var(--color-accent-blue);
            transform: scale(1.1);
        }

        .story-action-btn.delete:hover {
            color: #dc3545;
        }

        .story-experience {
            font-size: 11px;
            color: var(--color-neutral-text-light);
            margin-bottom: 8px;
            font-style: italic;
            line-height: 1.3;
        }

        .story-section {
            margin-bottom: 8px;
        }

        .story-section-label {
            font-family: var(--font-family-ui);
            font-size: 10px;
            font-weight: 600;
            color: var(--color-primary-blue);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 3px;
        }

        .story-section-text {
            font-family: var(--font-family-body);
            font-size: 12px;
            line-height: 1.4;
            color: var(--color-neutral-text);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .story-competencies {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 8px;
        }

        .competency-tag {
            background: #e3f2fd;
            color: #1a1a1a;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 9px;
            font-weight: 600;
            white-space: nowrap;
        }

        /* Story Form Modal - Inside Slideout */
        .story-form-modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 300;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .story-form-modal.active {
            display: flex;
        }

        .story-form-content {
            width: 100%;
            max-width: 500px;
            max-height: calc(100% - 40px);
            background: white;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .story-form-header {
            padding: 14px 18px;
            background: var(--color-dark);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .story-form-header h3 {
            font-family: var(--font-family-ui);
            font-size: 15px;
            margin: 0;
        }

        .story-form-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            line-height: 1;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.2s;
        }

        .story-form-close:hover {
            opacity: 0.7;
        }

        .story-form-body {
            flex: 1;
            overflow-y: auto;
            padding: 18px;
            min-height: 0;
        }

        .form-group {
            margin-bottom: 14px;
        }

        .form-group label {
            display: block;
            font-family: var(--font-family-ui);
            font-size: 11px;
            font-weight: 600;
            color: var(--color-dark);
            margin-bottom: 4px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 8px 10px;
            border: 2px solid var(--color-neutral-border);
            border-radius: 4px;
            font-family: var(--font-family-body);
            font-size: 13px;
            outline: none;
            transition: border-color 0.2s;
            box-sizing: border-box;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--color-primary-blue);
        }

        .form-group small {
            display: block;
            margin-top: 3px;
            font-size: 10px;
            color: var(--color-neutral-text-light);
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 16px;
            padding-top: 14px;
            border-top: 1px solid var(--color-neutral-border);
            flex-shrink: 0;
        }

        .btn-cancel,
        .btn-save {
            padding: 8px 18px;
            border: none;
            border-radius: 4px;
            font-family: var(--font-family-ui);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-cancel {
            background: var(--color-neutral-background);
            color: var(--color-neutral-text);
        }

        .btn-cancel:hover {
            background: #e0e0e0;
        }

        .btn-save {
            background: var(--color-primary-blue);
            color: white;
        }

        .btn-save:hover {
            background: var(--color-accent-blue);
        }

        /* Technical Prep Tabs */
        .tech-tabs {
            display: flex;
            gap: 0;
            border-bottom: 2px solid var(--color-neutral-border);
            margin-bottom: 20px;
        }

        .tech-tab {
            flex: 1;
            padding: 12px 16px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-family: var(--font-family-ui);
            font-size: 13px;
            font-weight: 600;
            color: var(--color-neutral-text-light);
            cursor: pointer;
            transition: all 0.2s;
        }

        .tech-tab:hover {
            color: var(--color-primary-blue);
            background: var(--color-neutral-background);
        }

        .tech-tab.active {
            color: var(--color-primary-blue);
            border-bottom-color: var(--color-primary-blue);
        }

        .tech-tab-content {
            display: none;
        }

        .tech-items-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        /* Job Opportunity Cards */
        .job-card {
            background: white;
            border: 1px solid var(--color-neutral-border);
            border-radius: 8px;
            padding: 14px;
            transition: all 0.2s;
            cursor: pointer;
            border-left: 4px solid var(--color-primary-blue);
        }

        .job-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .job-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .job-title {
            font-family: var(--font-family-ui);
            font-size: 14px;
            font-weight: 600;
            color: var(--color-dark);
            margin: 0 0 4px 0;
            line-height: 1.3;
        }

        .job-company {
            font-size: 12px;
            color: var(--color-primary-blue);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .job-location {
            font-size: 11px;
            color: var(--color-neutral-text-light);
            margin-bottom: 8px;
        }

        .job-salary {
            font-size: 12px;
            color: var(--color-neutral-text);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .job-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 9px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .job-status.applied {
            background: #e3f2fd;
            color: #1976d2;
        }

        .job-status.interviewing {
            background: #fff3e0;
            color: #f57c00;
        }

        .job-status.offer {
            background: #e8f5e9;
            color: #388e3c;
        }

        .job-status.rejected {
            background: #ffebee;
            color: #d32f2f;
        }

        .job-status.interested {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .job-details {
            font-size: 11px;
            color: var(--color-neutral-text);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Experience Card Styles */
        .experience-card {
            background: white;
            border: 1px solid var(--color-neutral-border);
            border-radius: 8px;
            padding: 14px;
            transition: all 0.2s;
            border-left: 4px solid var(--color-accent-blue);
        }

        .experience-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .experience-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .exp-title {
            font-family: var(--font-family-ui);
            font-size: 14px;
            font-weight: 600;
            color: var(--color-dark);
            margin: 0 0 4px 0;
            line-height: 1.3;
        }

        .exp-company {
            font-size: 12px;
            color: var(--color-accent-blue);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .exp-dates {
            font-size: 11px;
            color: var(--color-neutral-text-light);
            margin-bottom: 8px;
        }

        .exp-description {
            font-size: 12px;
            color: var(--color-neutral-text);
            line-height: 1.4;
            margin-bottom: 12px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .exp-section {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--color-neutral-border);
        }

        .exp-section-label {
            font-family: var(--font-family-ui);
            font-size: 10px;
            font-weight: 600;
            color: var(--color-neutral-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .exp-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .exp-tag {
            background: var(--color-neutral-background);
            color: var(--color-neutral-text);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            border: 1px solid var(--color-neutral-border);
        }

        .exp-tag.core {
            background: #e3f2fd;
            color: #1976d2;
            border-color: #1976d2;
        }

        .exp-tag.peripheral {
            background: #f3e5f5;
            color: #7b1fa2;
            border-color: #7b1fa2;
        }

        .exp-list {
            margin: 0;
            padding-left: 20px;
        }

        .exp-list li {
            font-size: 12px;
            color: var(--color-neutral-text);
            line-height: 1.5;
            margin-bottom: 4px;
        }

        /* Mindmap Styles */
        .mindmap-node rect {
            stroke-width: 3;
            cursor: pointer;
            transition: all 0.3s;
            rx: 8;
            ry: 8;
        }

        .mindmap-node.root rect {
            fill: var(--color-primary-blue);
            stroke: none;
        }

        .mindmap-node.child rect {
            fill: white;
            stroke: var(--color-primary-blue);
        }

        .mindmap-node.child rect.collapsed {
            stroke: var(--color-neutral-border);
            stroke-width: 2;
        }

        .mindmap-node.child rect.expanded {
            fill: #e3f2fd;
            stroke: var(--color-primary-blue);
            stroke-width: 3;
            filter: drop-shadow(0 2px 8px rgba(0, 102, 204, 0.3));
        }

        .mindmap-node.grandchild rect {
            fill: #f5f5f7;
            stroke: #bdbdbd;
            stroke-width: 2;
        }

        .mindmap-node.root text {
            fill: white;
            font-size: 16px;
            font-weight: 600;
        }

        .mindmap-node.child text {
            fill: var(--color-dark);
            font-size: 14px;
            font-weight: 500;
        }

        .mindmap-node.grandchild text {
            fill: var(--color-neutral-text);
            font-size: 12px;
            font-weight: 400;
        }

        .mindmap-node text {
            font-family: var(--font-family-ui);
            text-anchor: middle;
            pointer-events: none;
        }

        .mindmap-node.child:hover rect {
            filter: drop-shadow(0 4px 12px rgba(0, 102, 204, 0.4));
            transform: scale(1.05);
        }

        .mindmap-node.root:hover rect {
            filter: drop-shadow(0 4px 12px rgba(0, 102, 204, 0.5));
        }

        .mindmap-node.grandchild:hover rect {
            fill: #e0e0e0;
        }

        .mindmap-link {
            fill: none;
            stroke: var(--color-primary-blue);
            stroke-width: 2;
            opacity: 0.6;
        }

        @media (max-width: 768px) {
            .canvas-modal-content {
                width: 95%;
                height: 90vh;
            }

            .canvas-modal-header {
                padding: 16px 20px;
            }

            .canvas-modal-header h2 {
                font-size: 18px;
            }

            .canvas-modal-body {
                padding: 16px;
                grid-template-columns: 1fr;
            }

            .canvas-right-panel {
                display: none;
            }

            .mindmap-node.root text {
                font-size: 14px;
            }

            .mindmap-node.child text {
                font-size: 11px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="header-text">
                <h1>Cleansheet Platform</h1>
                <p class="tagline">Technical Learning & Career Development</p>
            </div>
            <img src="assets/high-resolution-logo-files/white-on-transparent.png" alt="Cleansheet Logo" class="header-logo">
        </div>
    </header>

    <main>


        <section class="features">
            <!-- Learner Tools Group -->
            <div class="feature-group">
                <h2 class="feature-group-title">Learning & Career Tools</h2>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="ph ph-book-open"></i>
                        </div>
                        <h3>Content Library</h3>
                        <p>Browse our extensive collection of technical articles, tutorials, and learning resources curated for all expertise levels.</p>
                        <a href="corpus/index.html" class="feature-link primary">Explore Library</a>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="ph ph-path"></i>
                        </div>
                        <h3>Career Paths</h3>
                        <p>Navigate curated career progression paths from Citizen Developer to Cloud Operations, AI/ML Engineer, and more.</p>
                        <a href="career-paths.html" class="feature-link primary">View Paths</a>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="ph ph-compass"></i>
                        </div>
                        <h3>Role Translator</h3>
                        <p>Discover your ideal tech role by mapping your skills and experience to career opportunities in the industry.</p>
                        <a href="role-translator.html" class="feature-link primary">Find Your Role</a>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="ph ph-tag"></i>
                        </div>
                        <h3>Experience Tagger</h3>
                        <p>Tag and organize your professional experiences with skills, technologies, and achievements for career planning.</p>
                        <a href="experience-tagger.html" class="feature-link primary">Tag Experiences</a>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="ph ph-map-trifold"></i>
                        </div>
                        <h3>
                            Cleansheet Canvas
                            <span class="coming-soon-badge">Coming Soon</span>
                        </h3>
                        <p>All-in-one career experience management tool tracking opportunities, experiences, and matching roles to your skillsets.</p>
                        <a href="#" class="feature-link primary" onclick="openCanvasModal(); return false;">Explore Canvas</a>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="ph ph-users"></i>
                        </div>
                        <h3>
                            Coaching & Mentorship
                            <span class="coming-soon-badge">Coming Soon</span>
                        </h3>
                        <p>Connect with experienced coaches for 12-week Cleansheet Quarters focused on real-world project delivery.</p>
                        <a href="#" class="feature-link primary" onclick="alert('Coming soon!'); return false;">Find a Coach</a>
                    </div>
                </div>
            </div>

            <!-- Platform Information Group -->
            <div class="feature-group">
                <h2 class="feature-group-title">About the Platform</h2>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon dark">
                            <i class="ph ph-flow-arrow"></i>
                        </div>
                        <h3>ML Pipeline Tour</h3>
                        <p>Explore our automated content processing pipeline that transforms curated content into multi-format deliverables.</p>
                        <a href="ml-pipeline.html" class="feature-link">Explore Pipeline</a>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon dark">
                            <i class="ph ph-shield-check"></i>
                        </div>
                        <h3>Privacy & Terms</h3>
                        <p>Learn about our commitment to data privacy and review our platform terms of service and principles.</p>
                        <a href="privacy-principles.html" class="feature-link">View Policies</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Cleansheet LLC. All rights reserved.</p>
        <p style="margin-top: 8px;">
            <a href="https://www.cleansheet.info" target="_blank" rel="noopener noreferrer">cleansheet.info</a> |
            <a href="https://github.com/CleansheetLLC/Cleansheet" target="_blank" rel="noopener noreferrer">GitHub</a> |
            <a href="privacy-policy.html">Privacy Policy</a> |
            <a href="terms-of-service.html">Terms of Service</a>
        </p>
    </footer>

    <!-- Canvas Modal -->
    <div class="canvas-modal" id="canvasModal">
        <div class="canvas-modal-content">
            <div class="canvas-modal-header">
                <div class="canvas-modal-header-top">
                    <h2>Cleansheet Canvas - Interactive Mindmap</h2>
                    <button class="canvas-modal-close" onclick="closeCanvasModal()">&times;</button>
                </div>
                <div class="persona-selector">
                    <button class="persona-btn active" data-persona="retail-manager" onclick="switchPersona('retail-manager')">Retail Manager</button>
                    <button class="persona-btn" data-persona="chemist" onclick="switchPersona('chemist')">Research Chemist</button>
                    <button class="persona-btn" data-persona="new-graduate" onclick="switchPersona('new-graduate')">New Graduate</button>
                    <button class="persona-btn" data-persona="data-analyst" onclick="switchPersona('data-analyst')">Data Analyst</button>
                </div>
            </div>
            <div class="canvas-modal-body" id="canvasBody">
                <!-- Left Panel (formerly right panel) -->
                <div class="canvas-right-panel">
                    <!-- Calendar Widget -->
                    <div class="calendar-widget">
                        <div class="widget-header">
                            <h3><i class="ph ph-calendar"></i> Upcoming Events</h3>
                            <button class="sync-btn" onclick="syncOutlook()">
                                <i class="ph ph-microsoft-outlook-logo"></i>
                                Sync Outlook
                            </button>
                        </div>
                        <div class="calendar-events" id="calendarEvents">
                            <div class="calendar-event">
                                <div class="event-time">Today, 2:00 PM</div>
                                <div class="event-title">Interview: Senior Developer</div>
                                <div class="event-details">TechCorp - Final Round (Virtual)</div>
                            </div>
                            <div class="calendar-event">
                                <div class="event-time">Tomorrow, 10:00 AM</div>
                                <div class="event-title">Coffee Chat: Referral</div>
                                <div class="event-details">Sarah Chen - Starbucks Downtown</div>
                            </div>
                            <div class="calendar-event">
                                <div class="event-time">Wed, 3:30 PM</div>
                                <div class="event-title">Application Deadline</div>
                                <div class="event-details">Cloud Architect - Amazon AWS</div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Assistant Widget -->
                    <div class="ai-assistant-widget">
                        <div class="widget-header">
                            <h3><i class="ph ph-chats-circle"></i> Cleansheet AI Assistant</h3>
                        </div>
                        <div class="ai-chat-messages" id="aiMessages">
                            <div class="ai-message assistant">
                                Hi! I'm your Cleansheet AI assistant. I can help you with:
                                <ul style="margin: 8px 0 0 20px; padding: 0;">
                                    <li>Resume and cover letter tips</li>
                                    <li>Interview preparation</li>
                                    <li>Career path guidance</li>
                                    <li>Job search strategies</li>
                                </ul>
                                What would you like to work on today?
                            </div>
                        </div>
                        <div class="ai-input-area">
                            <input type="text" class="ai-input" id="aiInput" placeholder="Ask me anything about your job search..." onkeypress="if(event.key==='Enter') sendAIMessage()">
                            <button class="ai-send-btn" onclick="sendAIMessage()">
                                <i class="ph ph-paper-plane-tilt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div id="canvas-mindmap"></div>

                <!-- Collapse Toggle Button -->
                <button class="panel-collapse-toggle" onclick="toggleRightPanel()" id="collapseToggle">
                    <i class="ph ph-caret-right"></i>
                </button>
            </div>

        <!-- Interview Prep Slideout (60% width) - Inside Canvas Modal -->
        <div class="interview-slideout" id="interviewSlideout">
            <div class="slideout-header">
                <h2 id="slideoutTitle">Interview Preparation</h2>
                <button class="slideout-close" onclick="closeInterviewSlideout()">&times;</button>
            </div>

            <!-- Behavioral Stories Content -->
            <div class="slideout-body" id="behavioralContent" style="display: none;">
                <button class="add-story-btn" onclick="openStoryForm()">
                    <i class="ph ph-plus-circle"></i> Add New Story
                </button>
                <div id="storiesContainer" class="stories-container">
                    <!-- Story cards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Technical Prep Content -->
            <div class="slideout-body" id="technicalContent" style="display: none;">
                <div class="tech-tabs">
                    <button class="tech-tab active" onclick="switchTechTab('questions')">Questions</button>
                    <button class="tech-tab" onclick="switchTechTab('research')">Company Research</button>
                    <button class="tech-tab" onclick="switchTechTab('mock')">Mock Interviews</button>
                </div>

                <!-- Questions Tab -->
                <div id="questionsTab" class="tech-tab-content" style="display: block;">
                    <button class="add-story-btn" onclick="addTechnicalQuestion()">
                        <i class="ph ph-plus-circle"></i> Add Question
                    </button>
                    <div id="questionsContainer" class="tech-items-container">
                        <!-- Technical questions will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Company Research Tab -->
                <div id="researchTab" class="tech-tab-content" style="display: none;">
                    <button class="add-story-btn" onclick="addCompanyResearch()">
                        <i class="ph ph-plus-circle"></i> Add Company
                    </button>
                    <div id="researchContainer" class="tech-items-container">
                        <!-- Company research will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Mock Interviews Tab -->
                <div id="mockTab" class="tech-tab-content" style="display: none;">
                    <button class="add-story-btn" onclick="addMockSession()">
                        <i class="ph ph-plus-circle"></i> Schedule Session
                    </button>
                    <div id="mockContainer" class="tech-items-container">
                        <!-- Mock interview sessions will be dynamically inserted here -->
                    </div>
                </div>
            </div>

            <!-- Job Opportunities Slideout Content -->
            <div class="slideout-body" id="jobOpportunitiesContent" style="display: none;">
                <button class="add-story-btn" onclick="addJobOpportunity()">
                    <i class="ph ph-plus-circle"></i> Add Job
                </button>
                <div id="jobsContainer" class="stories-container">
                    <!-- Job opportunity cards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Career Experience Slideout Content -->
            <div class="slideout-body" id="careerExperienceContent" style="display: none;">
                <div style="display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap;">
                    <button class="linkedin-connect-btn" onclick="connectLinkedIn()" style="flex: 0 0 auto;">
                        <i class="ph ph-linkedin-logo"></i> Connect LinkedIn
                    </button>
                    <button class="upload-resume-btn" onclick="uploadResume()" style="flex: 0 0 auto;">
                        <i class="ph ph-file-arrow-up"></i> Upload Resume
                    </button>
                    <button class="add-story-btn" onclick="addExperienceRecord()" style="flex: 0 0 auto; margin-bottom: 0;">
                        <i class="ph ph-plus-circle"></i> Add Experience
                    </button>
                </div>
                <div id="experiencesContainer" class="stories-container">
                    <!-- Experience cards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Application Materials Slideout Content -->
            <div class="slideout-body" id="applicationMaterialsContent" style="display: none;">
                <div style="display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap;">
                    <button class="add-story-btn" onclick="generateMaterial()" style="flex: 0 0 auto; margin-bottom: 0;">
                        <i class="ph ph-sparkle"></i> Generate
                    </button>
                    <button class="upload-resume-btn" onclick="uploadMaterial()" style="flex: 0 0 auto;">
                        <i class="ph ph-file-arrow-up"></i> Upload
                    </button>
                </div>
                <div id="materialsContainer" class="stories-container">
                    <!-- Application material cards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Portfolio Slideout Content -->
            <div class="slideout-body" id="portfolioContent" style="display: none;">
                <div style="display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap;">
                    <button class="add-story-btn" onclick="addPortfolioProject()" style="flex: 0 0 auto; margin-bottom: 0;">
                        <i class="ph ph-plus-circle"></i> Add Project
                    </button>
                    <button class="upload-resume-btn" onclick="importFromGitHub()" style="flex: 0 0 auto;">
                        <i class="ph ph-github-logo"></i> Import from GitHub
                    </button>
                </div>
                <div id="portfolioContainer" class="stories-container">
                    <!-- Portfolio project cards will be dynamically inserted here -->
                </div>
            </div>
        </div> <!-- End interview-slideout -->

    <!-- Story Form Modal (Inside Canvas Modal) -->
    <div class="story-form-modal" id="storyFormModal">
        <div class="story-form-content">
            <div class="story-form-header">
                <h3 id="formTitle">Add Behavioral Story</h3>
                <button class="story-form-close" onclick="closeStoryForm()">&times;</button>
            </div>
            <div class="story-form-body">
                <form id="storyForm" onsubmit="saveStory(event)">
                    <div class="form-group">
                        <label>Story Title / Competency</label>
                        <input type="text" id="storyTitle" required placeholder="e.g., Leadership Under Pressure">
                    </div>

                    <div class="form-group">
                        <label>Related Job Experience</label>
                        <select id="storyExperience">
                            <option value="">Select an experience...</option>
                            <!-- Will be populated from persona data -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Situation</label>
                        <textarea id="storySituation" rows="2" required placeholder="Describe the context and challenge..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Task</label>
                        <textarea id="storyTask" rows="2" required placeholder="What was your responsibility or goal?"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Action</label>
                        <textarea id="storyAction" rows="2" required placeholder="What specific actions did you take?"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Result</label>
                        <textarea id="storyResult" rows="2" required placeholder="What was the outcome? Include metrics if possible."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Key Competencies Demonstrated</label>
                        <input type="text" id="storyCompetencies" placeholder="e.g., Leadership, Problem Solving, Communication">
                        <small>Comma-separated list</small>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-cancel" onclick="closeStoryForm()">Cancel</button>
                        <button type="submit" class="btn-save">Save Story</button>
                    </div>
                </form>
            </div>
        </div>
    </div> <!-- End story-form-modal -->

    <!-- Job Form Modal -->
    <div class="story-form-modal" id="jobFormModal">
        <div class="story-form-content">
            <div class="story-form-header">
                <h3 id="jobFormTitle">Add Job Opportunity</h3>
                <button class="story-form-close" onclick="closeJobForm()">&times;</button>
            </div>
            <div class="story-form-body">
                <form id="jobForm" onsubmit="saveJob(event)">
                    <!-- URL paste option -->
                    <div class="form-group">
                        <label>Paste Job URL (Optional)</label>
                        <input type="url" id="jobUrl" placeholder="https://...">
                        <small>We'll try to extract job details automatically</small>
                    </div>

                    <!-- Manual entry fields -->
                    <div class="form-group">
                        <label>Job Title</label>
                        <input type="text" id="jobTitle" required>
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" id="jobCompany" required>
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="jobLocation">
                    </div>
                    <div class="form-group">
                        <label>Salary</label>
                        <input type="text" id="jobSalary" placeholder="e.g., $120K, $80-100K">
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="jobStatus">
                            <option value="interested">Interested</option>
                            <option value="applied">Applied</option>
                            <option value="interviewing">Interviewing</option>
                            <option value="offer">Offer</option>
                            <option value="rejected">Rejected</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="jobNotes" rows="2"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-cancel" onclick="closeJobForm()">Cancel</button>
                        <button type="submit" class="btn-save">Save Job</button>
                    </div>
                </form>
            </div>
        </div>
    </div> <!-- End job-form-modal -->

</div> <!-- End canvas-modal-content -->
</div> <!-- End canvas-modal -->

    <script>
        // Current persona
        let currentPersona = 'retail-manager';

        // Persona data from experience tagger with expandable content
        const personaData = {
            'retail-manager': {
                name: 'Marcus Thompson',
                goal: 'Transition from retail management into business analytics or operations management roles in tech companies',
                children: [
                    {
                        name: 'Job Opportunities',
                        count: 5,
                        children: [
                            { name: 'Operations Manager\nAmazon (Seattle, $125K)' },
                            { name: 'Business Analyst\nTarget HQ (Minneapolis, $95K)' },
                            { name: 'Data Analyst\nWalmart eCommerce (Bentonville, $85K)' },
                            { name: 'Supply Chain Analyst\nNike (Portland, $90K)' },
                            { name: 'Ops Coordinator\nInstacart (San Francisco, $80K)' }
                        ]
                    },
                    {
                        name: 'Application Materials',
                        count: 4,
                        children: [
                            { name: 'Resume v3.2 - Analytics Focus (updated 10/2)' },
                            { name: 'Cover Letter - Amazon Ops Role' },
                            { name: 'Cover Letter - Target Analytics Role' },
                            { name: 'LinkedIn Profile - 85% Complete' }
                        ]
                    },
                    {
                        name: 'Career Experience',
                        count: 5,
                        children: [
                            { name: 'Store Manager - Target #2847 (2019-Present)' },
                            { name: 'Asst Store Manager - Target #1923 (2016-2019)' },
                            { name: 'Dept Supervisor - Best Buy (2014-2016)' },
                            { name: 'Sales Associate - Best Buy (2012-2014)' },
                            { name: 'BA Business Admin - U of Minnesota (2012)' }
                        ]
                    },
                    {
                        name: 'Skills & Goals',
                        count: 6,
                        children: [
                            { name: 'Goal: Business Analytics by Q2 2025' },
                            { name: 'Excel: Advanced (Pivot, VLOOKUP)' },
                            { name: 'Power BI: Intermediate' },
                            { name: 'SQL: Learning (Codecademy 40% done)' },
                            { name: 'Leadership: 10+ direct reports' },
                            { name: 'P&L Ownership: $8M annual revenue' }
                        ]
                    },
                    {
                        name: 'Portfolio',
                        count: 2,
                        children: [
                            { name: 'Power BI Sales Dashboard' },
                            { name: 'Staff Scheduling Model (Excel VBA)' }
                        ]
                    },
                    {
                        name: 'Interview Prep',
                        count: 2,
                        children: [
                            { name: 'Behavioral' },
                            { name: 'Technical' }
                        ]
                    }
                ]
            },
            'chemist': {
                name: 'Dr. Sarah Chen',
                goal: 'Leverage analytical chemistry expertise to transition into data science and computational chemistry roles',
                children: [
                    {
                        name: 'Job Opportunities',
                        count: 5,
                        children: [
                            { name: 'Sr Data Scientist\nPfizer R&D (Cambridge, $165K)' },
                            { name: 'Computational Chemist\nModerna (Boston, $155K)' },
                            { name: 'ML Engineer\nGenentech (South SF, $180K)' },
                            { name: 'Cheminformatics Lead\nNovartis (Basel, $145K)' },
                            { name: 'Research Scientist\nBioNTech (Mainz, €130K)' }
                        ]
                    },
                    {
                        name: 'Application Materials',
                        count: 5,
                        children: [
                            { name: 'Resume v2.8 - Data Science Focus' },
                            { name: 'Research Portfolio Website (GitHub Pages)' },
                            { name: 'Cover Letter - Pfizer Data Science' },
                            { name: 'Publication List (h-index: 12)' },
                            { name: 'LinkedIn - Featured: 3 Publications' }
                        ]
                    },
                    {
                        name: 'Career Experience',
                        count: 6,
                        children: [
                            { name: 'Sr Research Scientist - Moderna (2020-Present)' },
                            { name: 'Research Scientist - Pfizer (2017-2020)' },
                            { name: 'Postdoc - UConn Chemistry (2015-2017)' },
                            { name: 'PhD Analytical Chemistry - UC Berkeley (2015)' },
                            { name: 'Graduate Researcher - Lawrence Lab (2012-2015)' },
                            { name: 'BS Chemistry - MIT (2010)' }
                        ]
                    },
                    {
                        name: 'Skills & Goals',
                        count: 8,
                        children: [
                            { name: 'Goal: Lead Data Science Team by 2026' },
                            { name: 'Python: Pandas, NumPy, Scikit-learn' },
                            { name: 'R: Statistical modeling, ggplot2' },
                            { name: 'Machine Learning: Regression, Classification' },
                            { name: 'ChemInformatics: RDKit, OpenBabel' },
                            { name: 'Mass Spec: LC-MS, GC-MS expert' },
                            { name: 'GxP Compliance: FDA 21 CFR Part 11' },
                            { name: 'Leadership: Mentored 4 PhD students' }
                        ]
                    },
                    {
                        name: 'Portfolio',
                        count: 4,
                        children: [
                            { name: '12 Publications (h-index: 12)' },
                            { name: 'Python QC Pipeline (GitHub: 85★)' },
                            { name: 'R Shiny Dashboard' },
                            { name: 'Conference Talks: ACS, ASMS' }
                        ]
                    },
                    {
                        name: 'Interview Prep',
                        count: 2,
                        children: [
                            { name: 'Behavioral' },
                            { name: 'Technical' }
                        ]
                    }
                ]
            },
            'new-graduate': {
                name: 'Jamie Rodriguez',
                goal: 'Launch career in software development or cloud engineering, building practical skills',
                children: [
                    {
                        name: 'Job Opportunities',
                        count: 6,
                        children: [
                            { name: 'SWE New Grad\nGoogle (MTV, $140K + equity)' },
                            { name: 'Cloud Engineer\nMicrosoft Azure (Redmond, $130K)' },
                            { name: 'DevOps Engineer\nAWS (Seattle, $125K)' },
                            { name: 'Full Stack Dev\nStripe (SF, $145K + equity)' },
                            { name: 'Junior SWE\nCoinbase (Remote, $110K)' },
                            { name: 'Platform Engineer\nRobinhood (Menlo Park, $135K)' }
                        ]
                    },
                    {
                        name: 'Application Materials',
                        count: 4,
                        children: [
                            { name: 'Resume v4.1 - New Grad SWE' },
                            { name: 'GitHub Portfolio: github.com/jrodriguez' },
                            { name: 'Cover Letter Template (3 versions)' },
                            { name: 'LinkedIn - Optimized w/ Robotics Win' }
                        ]
                    },
                    {
                        name: 'Career Experience',
                        count: 6,
                        children: [
                            { name: 'SWE Intern - TechStart Inc (Summer 2024)' },
                            { name: 'CS Teaching Assistant - UT Austin (2023-2024)' },
                            { name: 'Robotics Team Lead - UT Longhorns (2022-2024)' },
                            { name: 'Freelance Web Dev - 5 clients (2023)' },
                            { name: 'Barista - Caffe Medici (2021-2023)' },
                            { name: 'BS Computer Science - UT Austin (May 2024, 3.7 GPA)' }
                        ]
                    },
                    {
                        name: 'Skills & Goals',
                        count: 7,
                        children: [
                            { name: 'Goal: Cloud Engineering at FAANG by 2025' },
                            { name: 'Languages: Python, JavaScript, Go, C++' },
                            { name: 'Cloud: AWS (Solutions Architect Associate)' },
                            { name: 'Frontend: React, TypeScript, Next.js' },
                            { name: 'Backend: Node.js, Express, PostgreSQL' },
                            { name: 'DevOps: Docker, Kubernetes, CI/CD' },
                            { name: 'Robotics: ROS, Computer Vision, ML' }
                        ]
                    },
                    {
                        name: 'Portfolio',
                        count: 5,
                        children: [
                            { name: 'RoboCup 2024 Project' },
                            { name: 'React SaaS Portal (GitHub: 150★)' },
                            { name: 'YOLO Object Detection Model' },
                            { name: 'AWS Serverless API' },
                            { name: 'Open Source Contributions (25)' }
                        ]
                    },
                    {
                        name: 'Interview Prep',
                        count: 2,
                        children: [
                            { name: 'Behavioral' },
                            { name: 'Technical' }
                        ]
                    }
                ]
            },
            'data-analyst': {
                name: 'Priya Patel',
                goal: 'Advance from data analyst to senior data scientist or machine learning engineer role',
                children: [
                    {
                        name: 'Job Opportunities',
                        count: 5,
                        children: [
                            { name: 'Sr Data Scientist\nMeta (Menlo Park, $210K)' },
                            { name: 'ML Engineer\nNetflix (Los Gatos, $225K)' },
                            { name: 'Data Scientist\nUber (SF, $195K)' },
                            { name: 'Lead Analytics\nAirbnb (SF, $185K)' },
                            { name: 'Sr ML Engineer\nLinkedIn (Sunnyvale, $200K)' }
                        ]
                    },
                    {
                        name: 'Application Materials',
                        count: 5,
                        children: [
                            { name: 'Resume v5.3 - Sr Data Scientist' },
                            { name: 'Portfolio Site: priyapatel.dev' },
                            { name: 'Cover Letter - Meta DS Role' },
                            { name: 'Case Study Deck: Churn Prediction' },
                            { name: 'LinkedIn - Featured Projects (3)' }
                        ]
                    },
                    {
                        name: 'Career Experience',
                        count: 6,
                        children: [
                            { name: 'Sr Data Analyst - Salesforce (2021-Present)' },
                            { name: 'Data Analyst II - Lyft (2019-2021)' },
                            { name: 'Data Analyst I - Lyft (2018-2019)' },
                            { name: 'Business Analyst - Deloitte Consulting (2017-2018)' },
                            { name: 'MS Statistics - Stanford University (2017)' },
                            { name: 'BS Mathematics - UC Berkeley (2015)' }
                        ]
                    },
                    {
                        name: 'Skills & Goals',
                        count: 9,
                        children: [
                            { name: 'Goal: Sr Data Scientist at FAANG by Q2 2025' },
                            { name: 'Python: Pandas, NumPy, Scikit-learn, TensorFlow' },
                            { name: 'SQL: Advanced (Window functions, CTEs)' },
                            { name: 'ML: Classification, Regression, Clustering' },
                            { name: 'Deep Learning: Neural Networks, CNNs' },
                            { name: 'A/B Testing: Experimentation design & analysis' },
                            { name: 'Visualization: Tableau, Looker, Matplotlib' },
                            { name: 'Big Data: Spark, Hive, Airflow' },
                            { name: 'Cloud: AWS (SageMaker, Redshift, S3)' }
                        ]
                    },
                    {
                        name: 'Portfolio',
                        count: 4,
                        children: [
                            { name: 'Churn Prediction Model' },
                            { name: 'Executive Dashboard (Tableau)' },
                            { name: 'Recommender System' },
                            { name: 'GitHub ML Projects (320★)' }
                        ]
                    },
                    {
                        name: 'Interview Prep',
                        count: 2,
                        children: [
                            { name: 'Behavioral' },
                            { name: 'Technical' }
                        ]
                    }
                ]
            }
        };

        // Right panel collapse state - start collapsed
        let rightPanelCollapsed = true;

        // Toggle right panel collapse
        function toggleRightPanel() {
            const body = document.getElementById('canvasBody');
            const toggle = document.getElementById('collapseToggle');
            const icon = toggle.querySelector('i');

            rightPanelCollapsed = !rightPanelCollapsed;

            if (rightPanelCollapsed) {
                body.classList.add('collapsed');
                icon.className = 'ph ph-caret-right';
            } else {
                body.classList.remove('collapsed');
                icon.className = 'ph ph-caret-left';
            }
        }

        // Canvas Modal Functions
        function openCanvasModal() {
            document.getElementById('canvasModal').classList.add('active');
            document.body.style.overflow = 'hidden';

            // Initialize with collapsed panel
            const body = document.getElementById('canvasBody');
            const toggle = document.getElementById('collapseToggle');
            const icon = toggle.querySelector('i');
            body.classList.add('collapsed');
            icon.className = 'ph ph-caret-right';

            // Load user data
            loadUserJobs();
            loadStories();
            loadUserExperiences();

            // Add click-outside-to-close handler for slideout
            const slideout = document.getElementById('interviewSlideout');
            slideout.addEventListener('click', function(event) {
                // Close if clicking on the slideout background (not the content)
                if (event.target === slideout) {
                    closeInterviewSlideout();
                }
            });

            setTimeout(() => initializeMindmap(currentPersona), 100);
        }

        function closeCanvasModal() {
            document.getElementById('canvasModal').classList.remove('active');
            document.body.style.overflow = 'auto';
            // Clear the mindmap
            d3.select('#canvas-mindmap').selectAll('*').remove();
        }

        function switchPersona(persona) {
            currentPersona = persona;

            // Update active button
            document.querySelectorAll('.persona-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-persona="${persona}"]`).classList.add('active');

            // Load user data for new persona
            loadUserJobs();
            loadStories();
            loadUserExperiences();

            // Clear and redraw mindmap
            d3.select('#canvas-mindmap').selectAll('*').remove();
            initializeMindmap(persona);
        }

        // Close modal on background click
        document.getElementById('canvasModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCanvasModal();
            }
        });

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeCanvasModal();
            }
        });

        // AI Assistant Functions
        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const message = input.value.trim();

            if (!message) return;

            // Add user message
            const messagesContainer = document.getElementById('aiMessages');
            const userMsg = document.createElement('div');
            userMsg.className = 'ai-message user';
            userMsg.textContent = message;
            messagesContainer.appendChild(userMsg);

            // Clear input
            input.value = '';

            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            // Simulate AI response after a delay
            setTimeout(() => {
                const aiMsg = document.createElement('div');
                aiMsg.className = 'ai-message assistant';
                aiMsg.textContent = getAIResponse(message);
                messagesContainer.appendChild(aiMsg);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 800);
        }

        function getAIResponse(message) {
            const msg = message.toLowerCase();

            if (msg.includes('resume') || msg.includes('cv')) {
                return "I can help you optimize your resume! Here are some tips:\n\n• Use action verbs (Led, Developed, Achieved)\n• Quantify your accomplishments with metrics\n• Tailor your resume to each job description\n• Keep it to 1-2 pages max\n\nWould you like me to review a specific section?";
            } else if (msg.includes('interview')) {
                return "Great question! For interview prep:\n\n• Research the company thoroughly\n• Practice STAR method responses\n• Prepare 3-5 questions to ask them\n• Review your resume and be ready to discuss each item\n• Do a mock interview with a friend\n\nWhat type of interview are you preparing for?";
            } else if (msg.includes('cover letter')) {
                return "Cover letter tips:\n\n• Keep it to 3-4 paragraphs\n• Show enthusiasm for the specific role\n• Connect your experience to their needs\n• Include a clear call to action\n• Proofread carefully!\n\nWant help with a specific section?";
            } else if (msg.includes('career') || msg.includes('path')) {
                return "I can help you explore career paths! Based on your profile, I see opportunities in:\n\n• Cloud Operations roles\n• DevOps Engineering\n• Site Reliability Engineering\n• Platform Engineering\n\nWhich area interests you most?";
            } else if (msg.includes('job') || msg.includes('search')) {
                return "Job search strategies that work:\n\n• Apply to 3-5 targeted roles per day\n• Network actively on LinkedIn\n• Leverage your alumni network\n• Follow up after applications\n• Track everything in your Canvas\n\nWhat part of the job search do you need help with?";
            } else {
                return "I'm here to help with your job search! I can assist with resumes, cover letters, interview prep, career guidance, and job search strategies. What would you like to work on?";
            }
        }

        // Outlook Sync Function
        function syncOutlook() {
            const btn = event.target.closest('.sync-btn');
            const originalHTML = btn.innerHTML;
            const icon = btn.querySelector('i');

            // Disable button during sync
            btn.disabled = true;
            btn.style.opacity = '0.7';
            btn.style.cursor = 'not-allowed';

            // Show syncing state with smooth animation
            icon.className = 'ph ph-arrows-clockwise';
            icon.style.animation = 'rotate-smooth 1.2s ease-in-out infinite';
            btn.querySelector('i').nextSibling.textContent = ' Syncing...';

            // Simulate sync
            setTimeout(() => {
                // Success state with checkmark
                icon.className = 'ph ph-check-circle';
                icon.style.animation = 'scale-in 0.3s ease-out';
                icon.style.color = '#22c55e';
                btn.querySelector('i').nextSibling.textContent = ' Synced!';

                // Add a new synced event with fade-in animation
                const eventsContainer = document.getElementById('calendarEvents');
                const newEvent = document.createElement('div');
                newEvent.className = 'calendar-event';
                newEvent.style.borderLeftColor = '#22c55e';
                newEvent.style.opacity = '0';
                newEvent.style.transform = 'translateY(-10px)';
                newEvent.style.transition = 'all 0.4s ease-out';
                newEvent.innerHTML = `
                    <div class="event-time">Next Mon, 1:00 PM</div>
                    <div class="event-title">Phone Screen: Cloud Engineer</div>
                    <div class="event-details">Microsoft Azure - Recruiter Call</div>
                `;
                eventsContainer.appendChild(newEvent);

                // Trigger fade-in animation
                setTimeout(() => {
                    newEvent.style.opacity = '1';
                    newEvent.style.transform = 'translateY(0)';
                }, 50);

                // Reset button after 2.5 seconds
                setTimeout(() => {
                    icon.style.animation = 'none';
                    icon.style.color = '';
                    btn.innerHTML = originalHTML;
                    btn.disabled = false;
                    btn.style.opacity = '1';
                    btn.style.cursor = 'pointer';
                }, 2500);
            }, 1200);
        }

        // Add professional animations for sync button
        const style = document.createElement('style');
        style.textContent = `
            @keyframes rotate-smooth {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            @keyframes scale-in {
                0% { transform: scale(0.5); opacity: 0; }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // Track expanded node
        let expandedNode = null;

        // D3 Mindmap Initialization - Tree Layout (Left to Right)
        function initializeMindmap(persona) {
            const container = document.getElementById('canvas-mindmap');
            const width = container.clientWidth;
            const height = container.clientHeight;

            // Reset expanded node
            expandedNode = null;

            // Get persona-specific data
            const data = personaData[persona];

            // Mindmap data structure - keep all children for D3 to see
            const mindmapData = {
                name: data.name + "'s Canvas",
                goal: data.goal,
                children: data.children // Keep full data structure
            };

            // Create SVG with expandable dimensions
            const svg = d3.select('#canvas-mindmap')
                .append('svg')
                .attr('width', '100%')
                .attr('height', '100%')
                .style('min-width', width + 'px')
                .style('min-height', height + 'px');

            // Create a group for zoom/pan - center root node horizontally
            const g = svg.append('g')
                .attr('transform', `translate(150, ${height / 2})`);

            // Create hierarchy - D3 will now see all children
            const root = d3.hierarchy(mindmapData);
            root.x0 = 0; // Centered at transform origin
            root.y0 = 0;

            // Now collapse second-level children (hide grandchildren initially)
            if (root.children) {
                root.children.forEach(child => {
                    if (child.children) {
                        child._children = child.children;
                        child.children = null;
                    }
                });
            }

            // Define constants for rectangles
            const rootWidth = 140;
            const rootHeight = 60;
            const childWidth = 180;
            const childHeight = 50;
            const grandchildWidth = 250;
            const grandchildHeight = 40;

            // Create groups for links and nodes
            const linkGroup = g.append('g').attr('class', 'links');
            const nodeGroup = g.append('g').attr('class', 'nodes');

            // Function to update the tree
            function update(source) {
                // Count visible nodes to calculate needed height
                const visibleNodes = root.descendants();
                const neededHeight = Math.max(height, visibleNodes.length * 60);
                const neededWidth = Math.max(width, 1000);

                // Update SVG size to accommodate all nodes
                svg.style('min-width', neededWidth + 'px')
                   .style('min-height', neededHeight + 'px');

                // Create tree layout with FIXED node spacing using nodeSize
                const treeLayout = d3.tree()
                    .nodeSize([60, 220]) // [vertical spacing, horizontal spacing] - FIXED distances
                    .separation((a, b) => {
                        // More separation for grandchildren
                        if (a.depth === 2 && b.depth === 2) {
                            return a.parent === b.parent ? 1.0 : 1.3;
                        }
                        // Standard separation for other levels
                        return a.parent === b.parent ? 1.0 : 1.5;
                    });

                const treeData = treeLayout(root);
                const nodes = treeData.descendants();
                const links = treeData.links();

                // Update links
                const link = linkGroup
                    .selectAll('path')
                    .data(links, d => d.target.id || (d.target.id = ++i));

                // Enter new links
                const linkEnter = link.enter()
                    .insert('path', 'g')
                    .attr('class', 'mindmap-link')
                    .attr('d', d => {
                        const o = {x: source.x0, y: source.y0};
                        return diagonal(o, o);
                    });

                // Update existing links
                const linkUpdate = linkEnter.merge(link);
                linkUpdate.transition()
                    .duration(500)
                    .attr('d', d => diagonal(d.source, d.target));

                // Remove old links
                link.exit()
                    .transition()
                    .duration(500)
                    .attr('d', d => {
                        const o = {x: source.x, y: source.y};
                        return diagonal(o, o);
                    })
                    .remove();

                // Update nodes
                const node = nodeGroup
                    .selectAll('g')
                    .data(nodes, d => d.id || (d.id = ++i));

                // Enter new nodes
                const nodeEnter = node.enter()
                    .append('g')
                    .attr('class', d => `mindmap-node ${d.depth === 0 ? 'root' : d.depth === 1 ? 'child' : 'grandchild'}`)
                    .attr('transform', d => `translate(${source.y0}, ${source.x0})`);

                // Add rectangles
                nodeEnter.append('rect')
                    .attr('width', d => d.depth === 0 ? rootWidth : d.depth === 1 ? childWidth : grandchildWidth)
                    .attr('height', d => d.depth === 0 ? rootHeight : d.depth === 1 ? childHeight : grandchildHeight)
                    .attr('x', d => d.depth === 0 ? -rootWidth/2 : d.depth === 1 ? -childWidth/2 : -grandchildWidth/2)
                    .attr('y', d => d.depth === 0 ? -rootHeight/2 : d.depth === 1 ? -childHeight/2 : -grandchildHeight/2);

                // Add text labels
                nodeEnter.append('text')
                    .attr('dy', '0.35em')
                    .attr('x', 0)
                    .each(function(d) {
                        const text = d3.select(this);
                        const label = d.data.name;
                        const count = d.data.count;

                        if (d.depth === 0) {
                            text.text(label);
                            const maxWidth = rootWidth - 20;
                            wrapText(text, maxWidth, 3); // Max 3 lines for root
                        } else if (d.depth === 1) {
                            const maxWidth = childWidth - 50;
                            text.text(label);
                            wrapText(text, maxWidth, 2); // Max 2 lines for categories

                            if (count > 0) {
                                d3.select(this.parentNode)
                                    .append('circle')
                                    .attr('class', 'count-badge-circle')
                                    .attr('cx', childWidth/2 - 20)
                                    .attr('cy', -childHeight/2 + 15)
                                    .attr('r', 12)
                                    .attr('fill', '#e3f2fd');

                                d3.select(this.parentNode)
                                    .append('text')
                                    .attr('class', 'count-badge-text')
                                    .attr('x', childWidth/2 - 20)
                                    .attr('y', -childHeight/2 + 15)
                                    .attr('dy', '0.35em')
                                    .attr('text-anchor', 'middle')
                                    .attr('font-size', '11px')
                                    .attr('font-weight', '600')
                                    .attr('fill', '#1a1a1a')
                                    .attr('pointer-events', 'none')
                                    .text(count);
                            }
                        } else {
                            // Grandchild nodes (third level) - truncate long text
                            const maxWidth = grandchildWidth - 20;
                            const maxChars = 50; // Character limit
                            const truncatedLabel = label.length > maxChars ? label.substring(0, maxChars) + '...' : label;
                            text.text(truncatedLabel);
                            wrapText(text, maxWidth, 2); // Max 2 lines
                        }
                    });

                // Click handler for second-level nodes
                nodeEnter.on('click', function(event, d) {
                    event.stopPropagation();
                    if (d.depth === 1) {
                        console.log('Clicked node:', d.data.name, 'Has _children:', !!d._children, 'Has children:', !!d.children);

                        // Check if this is Job Opportunities or Interview Prep
                        const nodeName = d.data.name;

                        if (nodeName === 'Job Opportunities') {
                            console.log('Opening Job Opportunities slideout');
                            openJobOpportunitiesSlideout();
                        } else if (nodeName === 'Career Experience') {
                            console.log('Opening Career Experience slideout');
                            openCareerExperienceSlideout();
                        } else if (nodeName === 'Application Materials') {
                            console.log('Opening Application Materials slideout');
                            openApplicationMaterialsSlideout();
                        } else if (nodeName === 'Portfolio') {
                            console.log('Opening Portfolio slideout');
                            openPortfolioSlideout();
                        } else if (nodeName === 'Interview Prep') {
                            // Interview Prep still expands to show Behavioral/Technical
                            toggleNode(d);
                        } else {
                            // Other nodes expand normally
                            toggleNode(d);
                        }
                    } else if (d.depth === 2) {
                        // Third-level node clicked
                        const parentName = d.parent.data.name;
                        const nodeName = d.data.name;

                        // Close any open slideout when level 2 node is clicked
                        closeInterviewSlideout();

                        // If it's Interview Prep category, open the appropriate slideout
                        if (parentName === 'Interview Prep') {
                            console.log('Opening Interview Prep slideout for:', nodeName);
                            openInterviewSlideout(nodeName);
                        }
                    }
                });

                // Update existing nodes
                const nodeUpdate = nodeEnter.merge(node);
                nodeUpdate.transition()
                    .duration(500)
                    .attr('transform', d => `translate(${d.y}, ${d.x})`);

                // Update cursor for all nodes based on whether they have children
                nodeUpdate.style('cursor', d => {
                    if (d.depth === 1 && (d.children || d._children)) {
                        return 'pointer';
                    }
                    // Interview Prep grandchildren are clickable
                    if (d.depth === 2 && d.parent && d.parent.data.name === 'Interview Prep') {
                        return 'pointer';
                    }
                    return 'default';
                });

                // Update rect styling for expanded/collapsed state
                nodeUpdate.select('rect')
                    .attr('class', d => {
                        if (d.depth === 1) {
                            return d.children ? 'expanded' : (d._children ? 'collapsed' : '');
                        }
                        return '';
                    });

                // Remove old nodes
                node.exit()
                    .transition()
                    .duration(500)
                    .attr('transform', d => `translate(${source.y}, ${source.x})`)
                    .remove();

                // Store old positions for transitions
                nodes.forEach(d => {
                    d.x0 = d.x;
                    d.y0 = d.y;
                });
            }

            // Link diagonal function
            function diagonal(s, d) {
                const sourceX = s.y + (s.depth === 0 ? rootWidth/2 : s.depth === 1 ? childWidth/2 : grandchildWidth/2);
                const sourceY = s.x;
                const targetX = d.y - (d.depth === 1 ? childWidth/2 : grandchildWidth/2);
                const targetY = d.x;

                const midX = (sourceX + targetX) / 2;
                return `M ${sourceX} ${sourceY} C ${midX} ${sourceY}, ${midX} ${targetY}, ${targetX} ${targetY}`;
            }

            // Toggle node function - only one second-level node open at a time
            function toggleNode(d) {
                console.log('toggleNode called for:', d.data.name);
                console.log('Before toggle - children:', d.children, '_children:', d._children);

                if (!d._children && !d.children) {
                    console.log('No children to toggle');
                    return; // No children to toggle
                }

                // If this node is being opened
                if (d._children) {
                    console.log('Opening node, _children has', d._children.length, 'items');

                    // Close any other open second-level nodes
                    root.children.forEach(child => {
                        if (child !== d && child.children) {
                            console.log('Closing other node:', child.data.name);
                            child._children = child.children;
                            child.children = null;
                        }
                    });

                    // Open this node
                    d.children = d._children;
                    d._children = null;
                    expandedNode = d;
                    console.log('After opening - children:', d.children);
                } else {
                    console.log('Closing node');
                    // Close this node
                    d._children = d.children;
                    d.children = null;
                    expandedNode = null;
                }

                console.log('Calling update()');
                update(d);
            }

            // Text wrapping function with optional line limit
            function wrapText(text, maxWidth, maxLines = 999) {
                const textNode = text.node();
                const words = text.text().split(/\s+/).reverse();
                let word;
                let line = [];
                let lineNumber = 0;
                const lineHeight = 1.1;
                const y = text.attr('y') || 0;
                const dy = 0.35;

                text.text(null);
                let tspan = text.append('tspan')
                    .attr('x', 0)
                    .attr('y', y);

                while (word = words.pop()) {
                    // Stop if we've reached max lines
                    if (lineNumber >= maxLines) {
                        break;
                    }

                    line.push(word);
                    tspan.text(line.join(' '));
                    if (tspan.node().getComputedTextLength() > maxWidth) {
                        line.pop();

                        // If this would be the last line, add ellipsis
                        if (lineNumber === maxLines - 1 && words.length > 0) {
                            tspan.text(line.join(' ') + '...');
                        } else {
                            tspan.text(line.join(' '));
                        }

                        line = [word];
                        lineNumber++;

                        if (lineNumber < maxLines) {
                            tspan = text.append('tspan')
                                .attr('x', 0)
                                .attr('y', y)
                                .attr('dy', lineNumber * lineHeight + 'em')
                                .text(word);
                        }
                    }
                }

                // Center multi-line text vertically
                const spans = text.selectAll('tspan');
                const numLines = spans.size();
                if (numLines > 1) {
                    spans.attr('dy', function(d, i) {
                        return (i - (numLines - 1) / 2) * lineHeight + dy + 'em';
                    });
                } else {
                    spans.attr('dy', dy + 'em');
                }
            }

            // Initialize counter for node IDs
            let i = 0;

            // Initial render
            update(root);

            // Add zoom behavior
            const zoom = d3.zoom()
                .scaleExtent([0.5, 2])
                .on('zoom', (event) => {
                    g.attr('transform', event.transform);
                });

            svg.call(zoom);
        }

        // ========================================
        // Interview Prep Slideout Functions
        // ========================================

        let currentInterviewCategory = '';
        let currentEditingStoryId = null;
        let behavioralStories = JSON.parse(localStorage.getItem('behavioralStories') || '[]');

        // Example behavioral stories for each persona
        const exampleStories = {
            'retail-manager': [
                {
                    title: 'Managing Peak Season Staffing Crisis',
                    experience: 'RetailMart Store Manager (2019-2024)',
                    situation: 'During Black Friday weekend, three team members called in sick, leaving us severely understaffed during our busiest period. Customer traffic was 40% above forecast, and we risked long wait times and poor customer experience.',
                    task: 'As Store Manager, I needed to ensure we maintained service standards while managing an exhausted team and preventing further burnout.',
                    action: 'I immediately called in off-duty staff offering premium pay, reorganized floor coverage to prioritize high-traffic areas, and personally worked checkout and stocking alongside the team. I implemented 15-minute rotation breaks to prevent burnout and communicated transparently with customers about wait times.',
                    result: 'We processed 2,300 transactions over the weekend with 92% customer satisfaction scores (above our 85% target). Team morale remained strong, and we exceeded sales targets by 18%. Two team members later mentioned this experience in their positive reviews.',
                    competencies: ['Crisis Management', 'Leadership', 'Customer Service', 'Team Building']
                },
                {
                    title: 'Implementing Data-Driven Inventory System',
                    experience: 'RetailMart Store Manager (2019-2024)',
                    situation: 'Our store consistently had 22% inventory shrinkage (far above the 8% company benchmark) and frequent stockouts of popular items. Manual tracking was error-prone, and the team resisted changing established processes.',
                    task: 'I was tasked with reducing shrinkage to under 10% within six months while improving product availability.',
                    action: 'I taught myself Excel pivot tables and Power BI to analyze shrinkage patterns. I discovered 60% of losses occurred during restocking shifts. I implemented a barcode scanning system, trained staff on cycle counting procedures, and created a daily dashboard showing real-time inventory accuracy by department.',
                    result: 'Inventory shrinkage dropped to 7.5% within four months, saving $45,000 annually. Product availability improved from 83% to 94%. My analytics approach was adopted by 12 other stores in the district, and I was asked to lead regional training sessions.',
                    competencies: ['Data Analysis', 'Problem Solving', 'Change Management', 'Process Improvement']
                },
                {
                    title: 'Developing Team Member Into Assistant Manager',
                    experience: 'RetailMart Store Manager (2019-2024)',
                    situation: 'My Assistant Manager left abruptly, and corporate wanted to hire externally. I had a promising team member, Sarah, who had leadership potential but lacked confidence and formal management training.',
                    task: 'I needed to convince corporate to give Sarah a chance while rapidly developing her management capabilities.',
                    action: 'I created a 90-day development plan with weekly coaching sessions covering P&L basics, conflict resolution, and scheduling. I gradually delegated responsibilities—first shift leadership, then inventory management, finally full store operations during my vacation. I documented her progress with specific metrics and presented the case to regional management.',
                    result: 'Sarah was promoted to Assistant Manager after 12 weeks and became one of the top-performing AMs in the region. She later implemented a mentorship program that reduced turnover by 30%. This demonstrated my commitment to developing talent and influenced corporate to prioritize internal promotions.',
                    competencies: ['Mentoring', 'Talent Development', 'Advocacy', 'Influence']
                }
            ],
            'chemist': [
                {
                    title: 'Resolving Critical Production Quality Issue',
                    experience: 'PharmaCorp Senior Chemist (2020-2024)',
                    situation: 'A key pharmaceutical intermediate was failing quality control with 15% out-of-spec batches, threatening to delay a major product launch. The existing team had been troubleshooting for three weeks without identifying the root cause, and manufacturing was considering halting production.',
                    task: 'As lead chemist, I needed to identify the contamination source and implement a fix within one week to avoid missing regulatory deadlines.',
                    action: 'I formed a cross-functional team including process engineers and QC analysts. We used Design of Experiments (DOE) methodology to isolate variables. I discovered trace metal contamination from a newly installed reactor gasket. I worked with vendors to source compliant materials, validated the fix with 20 test batches, and updated SOPs to prevent recurrence.',
                    result: 'Production resumed within five days with zero OOS results in subsequent batches. The launch proceeded on schedule, generating $8M in first-year revenue. My systematic troubleshooting approach was adopted as standard protocol for quality investigations.',
                    competencies: ['Problem Solving', 'Technical Expertise', 'Cross-functional Collaboration', 'Quality Management']
                },
                {
                    title: 'Leading Lab Through Regulatory Audit',
                    experience: 'PharmaCorp Senior Chemist (2020-2024)',
                    situation: 'An unexpected FDA audit was scheduled with only two weeks notice. Our lab had several documentation gaps, and the junior staff had no audit experience. Previous audits at other sites had resulted in warning letters.',
                    task: 'I needed to prepare the team, ensure documentation compliance, and represent the lab during inspector interviews without disrupting ongoing critical experiments.',
                    action: 'I conducted daily mock audits, reviewed and corrected 200+ batch records, created an audit response guide, and coached junior chemists on answering inspector questions precisely. I organized 24/7 coverage to maintain experiments while accommodating audit schedules, and I personally handled the most technical questions.',
                    result: 'We completed the audit with zero 483 observations—a rare outcome. The inspector commended our documentation quality and technical knowledge. My audit prep materials were adopted company-wide, and I was invited to train teams at three other facilities.',
                    competencies: ['Regulatory Compliance', 'Leadership Under Pressure', 'Communication', 'Attention to Detail']
                },
                {
                    title: 'Optimizing Synthesis Route to Reduce Costs',
                    experience: 'PharmaCorp Senior Chemist (2020-2024)',
                    situation: 'Our flagship product had a synthesis route using expensive platinum catalysts, making production costs 40% above competitors. Management pressured us to cut costs without compromising quality, or they would outsource manufacturing overseas.',
                    task: 'I proposed developing an alternative synthesis route that could reduce material costs by at least 25% while maintaining API purity specifications.',
                    action: 'I screened 15 alternative catalysts through literature review and small-scale experiments, identifying a nickel-based catalyst with promising results. I scaled the reaction through pilot batches, optimized reaction conditions using statistical models, and validated that API quality met all specs. I prepared economic analysis showing $1.2M annual savings.',
                    result: 'The new route was implemented, reducing material costs by 32% and cutting reaction time by 20%. Manufacturing remained in-house, preserving 40 jobs. I received the company Innovation Award and was promoted to Principal Chemist. The process was patented with me as lead inventor.',
                    competencies: ['Innovation', 'Cost Optimization', 'Technical Problem Solving', 'Strategic Thinking']
                }
            ],
            'new-graduate': [
                {
                    title: 'Leading Team Project Under Tight Deadline',
                    experience: 'University Capstone Project (2024)',
                    situation: 'Our team of five CS students was assigned to build a React-based inventory management system for a local nonprofit. Two weeks before the deadline, one team member dropped out due to personal issues, leaving critical backend work incomplete.',
                    task: 'As project lead, I needed to redistribute work, complete the backend API integration, and ensure we delivered a working product for our client and course grade.',
                    action: 'I held an emergency team meeting to reassess scope and cut non-essential features. I personally learned Node.js/Express over a weekend to complete the REST API, integrated it with our React frontend, and implemented error handling. I reorganized our GitHub workflow with clearer task assignments and daily stand-ups to track progress.',
                    result: 'We delivered the system on time with all core features working. The nonprofit deployed it successfully and reported 30% time savings in inventory tracking. Our professor gave us an A and used our project as an example for future classes. I learned to adapt quickly and lead through adversity.',
                    competencies: ['Leadership', 'Adaptability', 'Technical Learning', 'Project Management']
                },
                {
                    title: 'Resolving Database Performance Issue',
                    experience: 'University Database Course Project (2023)',
                    situation: 'My course project—a book recommendation system—worked well with sample data but became unusably slow (30+ second queries) when testing with the full dataset of 100,000 books. The assignment deadline was in three days.',
                    task: 'I needed to identify and fix the performance bottleneck without restructuring my entire database schema.',
                    action: 'I used PostgreSQL EXPLAIN ANALYZE to identify that my recommendation algorithm was doing full table scans without indexes. I researched database optimization techniques, added composite indexes on frequently queried columns, and rewrote my most expensive query to use JOIN instead of subqueries. I tested with progressively larger datasets to validate improvements.',
                    result: 'Query times dropped from 30+ seconds to under 2 seconds, making the app responsive. I received a 98% on the project, and the professor asked me to present my optimization approach to the class. This taught me the importance of performance testing and proper indexing strategies.',
                    competencies: ['Problem Solving', 'Performance Optimization', 'Database Design', 'Self-Learning']
                },
                {
                    title: 'Organizing Community Coding Workshop',
                    experience: 'Computer Science Club VP (2023-2024)',
                    situation: 'Our CS club had low engagement (only 12 regular members) and limited visibility on campus. The club president wanted to increase membership and community impact, but we had no budget for events.',
                    task: 'As VP, I proposed organizing a free "Intro to Web Development" workshop for non-CS students to build interest and demonstrate value.',
                    action: 'I recruited three club members as co-instructors, designed a 3-hour curriculum teaching HTML/CSS/JavaScript basics, secured a computer lab through the CS department, and promoted the event through social media and flyering. I created a beginner-friendly project (personal portfolio page) that students could complete during the session.',
                    result: 'We had 45 attendees, with 30 completing projects and 18 joining the club afterward. The workshop became a quarterly event, and club membership grew to 60+ students. I developed public speaking skills and learned to make technical concepts accessible to beginners.',
                    competencies: ['Event Planning', 'Communication', 'Curriculum Design', 'Community Building']
                }
            ],
            'data-analyst': [
                {
                    title: 'Uncovering Revenue Leakage Through Data Analysis',
                    experience: 'TechCorp Business Analyst (2021-2024)',
                    situation: 'Our SaaS company was growing revenue 20% year-over-year, but profit margins were declining. Leadership suspected operational inefficiencies but had no specific insights. I was asked to investigate as part of a quarterly business review.',
                    task: 'I needed to analyze billing data, usage metrics, and customer accounts to identify where we were losing money and provide actionable recommendations.',
                    action: 'I combined data from Salesforce, Stripe, and our usage database using SQL joins, then analyzed patterns in Python. I discovered that 12% of enterprise customers were exceeding contracted usage limits without being billed for overages due to a bug in our metering system. I created visualizations in Tableau showing $340K in annual lost revenue and presented findings to the executive team with a remediation plan.',
                    result: 'Engineering fixed the metering bug within two weeks, and we implemented automated overage billing. We recovered $85K in back charges (with customer approval) and prevented future leakage. My analysis directly contributed to returning to 35% profit margins. I received a performance bonus and was promoted to Senior Analyst.',
                    competencies: ['Data Analysis', 'Problem Solving', 'Business Impact', 'Executive Communication']
                },
                {
                    title: 'Building Predictive Churn Model',
                    experience: 'TechCorp Business Analyst (2021-2024)',
                    situation: 'Customer churn was increasing from 5% to 8% monthly, and the customer success team was overwhelmed trying to prevent cancellations reactively. We needed to identify at-risk customers earlier.',
                    task: 'I proposed building a machine learning model to predict churn risk 30 days in advance, allowing proactive outreach to high-risk accounts.',
                    action: 'I extracted 18 months of customer behavior data (login frequency, feature usage, support tickets, NPS scores) and used Python scikit-learn to train a random forest classifier. I identified key churn indicators: customers with <2 logins/week and no use of core features had 60% churn probability. I built a dashboard in Power BI showing risk scores and worked with Customer Success to design intervention workflows.',
                    result: 'The model achieved 78% accuracy in predicting churn. Customer Success focused on the top 50 at-risk accounts monthly, reducing churn from 8% to 5.5% within three months—saving ~$200K in annual recurring revenue. The churn model became a core part of our CS strategy.',
                    competencies: ['Machine Learning', 'Predictive Analytics', 'Stakeholder Collaboration', 'Business Strategy']
                },
                {
                    title: 'Streamlining Reporting Process with Automation',
                    experience: 'TechCorp Business Analyst (2021-2024)',
                    situation: 'Our analytics team spent 20 hours per month manually creating executive reports by pulling data from multiple systems, copying into Excel, and formatting charts. This tedious work prevented us from doing deeper analysis.',
                    task: 'I wanted to automate the reporting process to free up time for strategic work and reduce human error.',
                    action: 'I learned Python pandas and built an automated pipeline that pulled data from our data warehouse via SQL, performed calculations, generated charts with matplotlib, and exported formatted Excel reports. I scheduled the script to run weekly via cron job and created documentation so others could maintain it. I also built a Slack bot to notify stakeholders when reports were ready.',
                    result: 'Report generation time dropped from 20 hours to 30 minutes of review time monthly, saving 230+ hours annually. Error rates decreased from ~5% to near zero. The executive team received reports faster and more consistently. My automation approach was adopted for three other recurring reports, and I led a lunch-and-learn teaching colleagues Python automation basics.',
                    competencies: ['Process Automation', 'Python Programming', 'Efficiency Improvement', 'Knowledge Sharing']
                }
            ]
        };

        function openInterviewSlideout(category) {
            currentInterviewCategory = category;
            const slideout = document.getElementById('interviewSlideout');
            const titleEl = document.getElementById('slideoutTitle');
            const behavioralContent = document.getElementById('behavioralContent');
            const technicalContent = document.getElementById('technicalContent');
            const jobOpportunitiesContent = document.getElementById('jobOpportunitiesContent');
            const careerExperienceContent = document.getElementById('careerExperienceContent');

            // Update title based on category
            const titles = {
                'Behavioral': 'Behavioral Interview Stories',
                'Technical': 'Technical Interview Preparation'
            };

            titleEl.textContent = titles[category] || 'Interview Preparation';

            // Hide all content sections first
            behavioralContent.style.display = 'none';
            technicalContent.style.display = 'none';
            jobOpportunitiesContent.style.display = 'none';
            careerExperienceContent.style.display = 'none';
            document.getElementById('applicationMaterialsContent').style.display = 'none';
            document.getElementById('portfolioContent').style.display = 'none';

            // Show appropriate content
            if (category === 'Behavioral') {
                behavioralContent.style.display = 'flex';
                loadStories();
            } else if (category === 'Technical') {
                technicalContent.style.display = 'flex';
                loadTechnicalContent();
            }

            // Show slideout
            slideout.classList.add('active');
        }

        function closeInterviewSlideout() {
            const slideout = document.getElementById('interviewSlideout');
            slideout.classList.remove('active');
        }

        function loadStories() {
            const container = document.getElementById('storiesContainer');
            container.innerHTML = '';

            // Get example stories for current persona
            const personaExamples = exampleStories[currentPersona] || [];

            // Combine user stories with persona examples
            const allStories = [...behavioralStories, ...personaExamples];

            if (allStories.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: var(--color-neutral-text-light);">
                        <i class="ph ph-file-text" style="font-size: 48px; opacity: 0.3; display: block; margin-bottom: 16px;"></i>
                        <p style="font-family: var(--font-family-ui); font-size: 15px;">No stories yet. Click "Add New Story" to create your first STAR behavioral story.</p>
                    </div>
                `;
                return;
            }

            allStories.forEach((story, index) => {
                const isUserStory = index < behavioralStories.length;
                const card = document.createElement('div');
                card.className = 'story-card';

                // Add example badge styling for persona stories
                if (!isUserStory) {
                    card.style.borderLeft = '4px solid #e3f2fd';
                    card.style.background = '#fafbfc';
                }

                card.innerHTML = `
                    <div class="story-card-header">
                        <div>
                            <h3 class="story-title">${escapeHtml(story.title)}</h3>
                            ${!isUserStory ? '<span class="competency-tag" style="margin-top: 4px; display: inline-block;">Example Story</span>' : ''}
                        </div>
                        ${isUserStory ? `
                        <div class="story-actions">
                            <button class="story-action-btn" onclick="editStory(${index})" title="Edit">
                                <i class="ph ph-pencil-simple"></i>
                            </button>
                            <button class="story-action-btn delete" onclick="deleteStory(${index})" title="Delete">
                                <i class="ph ph-trash"></i>
                            </button>
                        </div>
                        ` : ''}
                    </div>

                    ${story.experience ? `<div class="story-experience">Related to: ${escapeHtml(story.experience)}</div>` : ''}

                    <div class="story-section">
                        <div class="story-section-label">Situation</div>
                        <div class="story-section-text">${escapeHtml(story.situation)}</div>
                    </div>

                    <div class="story-section">
                        <div class="story-section-label">Task</div>
                        <div class="story-section-text">${escapeHtml(story.task)}</div>
                    </div>

                    <div class="story-section">
                        <div class="story-section-label">Action</div>
                        <div class="story-section-text">${escapeHtml(story.action)}</div>
                    </div>

                    <div class="story-section">
                        <div class="story-section-label">Result</div>
                        <div class="story-section-text">${escapeHtml(story.result)}</div>
                    </div>

                    ${story.competencies && story.competencies.length > 0 ? `
                        <div class="story-competencies">
                            ${story.competencies.map(comp => `<span class="competency-tag">${escapeHtml(comp)}</span>`).join('')}
                        </div>
                    ` : ''}
                `;
                container.appendChild(card);
            });
        }

        function openStoryForm(editIndex = null) {
            const modal = document.getElementById('storyFormModal');
            const form = document.getElementById('storyForm');
            const formTitle = document.getElementById('formTitle');

            // Populate experience dropdown from Career Experience node
            populateExperienceDropdown();

            if (editIndex !== null) {
                // Edit mode
                currentEditingStoryId = editIndex;
                formTitle.textContent = 'Edit Behavioral Story';
                const story = behavioralStories[editIndex];

                document.getElementById('storyTitle').value = story.title || '';
                document.getElementById('storyExperience').value = story.experience || '';
                document.getElementById('storySituation').value = story.situation || '';
                document.getElementById('storyTask').value = story.task || '';
                document.getElementById('storyAction').value = story.action || '';
                document.getElementById('storyResult').value = story.result || '';
                document.getElementById('storyCompetencies').value = story.competencies ? story.competencies.join(', ') : '';
            } else {
                // Add mode
                currentEditingStoryId = null;
                formTitle.textContent = 'Add Behavioral Story';
                form.reset();
            }

            modal.classList.add('active');
        }

        function closeStoryForm() {
            const modal = document.getElementById('storyFormModal');
            modal.classList.remove('active');
            currentEditingStoryId = null;
        }

        function populateExperienceDropdown() {
            const select = document.getElementById('storyExperience');
            const currentPersonaData = personaData[currentPersona];

            // Find Career Experience node
            const careerExpNode = currentPersonaData.children.find(child => child.name === 'Career Experience');

            // Clear existing options (except first placeholder)
            select.innerHTML = '<option value="">Select an experience...</option>';

            if (careerExpNode && careerExpNode.children) {
                careerExpNode.children.forEach(exp => {
                    const option = document.createElement('option');
                    option.value = exp.name;
                    option.textContent = exp.name;
                    select.appendChild(option);
                });
            }
        }

        function saveStory(event) {
            event.preventDefault();

            const story = {
                title: document.getElementById('storyTitle').value.trim(),
                experience: document.getElementById('storyExperience').value,
                situation: document.getElementById('storySituation').value.trim(),
                task: document.getElementById('storyTask').value.trim(),
                action: document.getElementById('storyAction').value.trim(),
                result: document.getElementById('storyResult').value.trim(),
                competencies: document.getElementById('storyCompetencies').value
                    .split(',')
                    .map(c => c.trim())
                    .filter(c => c)
            };

            if (currentEditingStoryId !== null) {
                // Update existing story
                behavioralStories[currentEditingStoryId] = story;
            } else {
                // Add new story
                behavioralStories.push(story);
            }

            // Save to localStorage
            localStorage.setItem('behavioralStories', JSON.stringify(behavioralStories));

            // Reload stories
            loadStories();

            // Close form
            closeStoryForm();
        }

        function editStory(index) {
            openStoryForm(index);
        }

        function deleteStory(index) {
            if (confirm('Are you sure you want to delete this story?')) {
                behavioralStories.splice(index, 1);
                localStorage.setItem('behavioralStories', JSON.stringify(behavioralStories));
                loadStories();
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ========================================
        // Technical Interview Prep Functions
        // ========================================

        let currentTechTab = 'questions';

        function switchTechTab(tab) {
            currentTechTab = tab;

            // Update tab buttons
            document.querySelectorAll('.tech-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Hide all tab contents
            document.querySelectorAll('.tech-tab-content').forEach(content => content.style.display = 'none');

            // Show selected tab
            if (tab === 'questions') {
                document.getElementById('questionsTab').style.display = 'block';
            } else if (tab === 'research') {
                document.getElementById('researchTab').style.display = 'block';
            } else if (tab === 'mock') {
                document.getElementById('mockTab').style.display = 'block';
            }
        }

        function loadTechnicalContent() {
            // Load content for all tabs
            loadTechnicalQuestions();
            loadCompanyResearch();
            loadMockSessions();
        }

        function loadTechnicalQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = `
                <div style="grid-column: 1/-1; text-align: center; padding: 40px 20px; color: var(--color-neutral-text-light);">
                    <i class="ph ph-question" style="font-size: 48px; opacity: 0.3; display: block; margin-bottom: 16px;"></i>
                    <p style="font-family: var(--font-family-ui); font-size: 15px;">Track technical questions you've encountered or want to practice.</p>
                    <p style="font-size: 13px; margin-top: 8px;">Coming soon: Add questions with your answers, solutions, and notes.</p>
                </div>
            `;
        }

        function loadCompanyResearch() {
            const container = document.getElementById('researchContainer');
            container.innerHTML = `
                <div style="grid-column: 1/-1; text-align: center; padding: 40px 20px; color: var(--color-neutral-text-light);">
                    <i class="ph ph-buildings" style="font-size: 48px; opacity: 0.3; display: block; margin-bottom: 16px;"></i>
                    <p style="font-family: var(--font-family-ui); font-size: 15px;">Organize research on companies you're interviewing with.</p>
                    <p style="font-size: 13px; margin-top: 8px;">Coming soon: Track tech stack, culture notes, interviewers, and key talking points.</p>
                </div>
            `;
        }

        function loadMockSessions() {
            const container = document.getElementById('mockContainer');
            container.innerHTML = `
                <div style="grid-column: 1/-1; text-align: center; padding: 40px 20px; color: var(--color-neutral-text-light);">
                    <i class="ph ph-video-camera" style="font-size: 48px; opacity: 0.3; display: block; margin-bottom: 16px;"></i>
                    <p style="font-family: var(--font-family-ui); font-size: 15px;">Schedule and track mock interview sessions.</p>
                    <p style="font-size: 13px; margin-top: 8px;">Coming soon: Book sessions with mentors, record feedback, and review performance.</p>
                </div>
            `;
        }

        function addTechnicalQuestion() {
            alert('Technical Questions feature coming soon!');
        }

        function addCompanyResearch() {
            alert('Company Research feature coming soon!');
        }

        function addMockSession() {
            alert('Mock Interview Sessions feature coming soon!');
        }

        // ========================================
        // Job Opportunities Functions
        // ========================================

        function openJobOpportunitiesSlideout() {
            const slideout = document.getElementById('interviewSlideout');
            const titleEl = document.getElementById('slideoutTitle');
            const behavioralContent = document.getElementById('behavioralContent');
            const technicalContent = document.getElementById('technicalContent');
            const jobOpportunitiesContent = document.getElementById('jobOpportunitiesContent');
            const careerExperienceContent = document.getElementById('careerExperienceContent');
            const applicationMaterialsContent = document.getElementById('applicationMaterialsContent');

            titleEl.textContent = 'Job Opportunities';

            // Hide all other content sections
            behavioralContent.style.display = 'none';
            technicalContent.style.display = 'none';
            careerExperienceContent.style.display = 'none';
            applicationMaterialsContent.style.display = 'none';
            document.getElementById('portfolioContent').style.display = 'none';

            // Show job opportunities content
            jobOpportunitiesContent.style.display = 'flex';

            // Load job opportunities for current persona
            loadJobOpportunities();

            // Show slideout
            slideout.classList.add('active');
        }

        function loadJobOpportunities() {
            const container = document.getElementById('jobsContainer');
            container.innerHTML = '';

            loadUserJobs();

            // Get job opportunities from current persona's children (examples)
            const currentPersonaData = personaData[currentPersona];
            const jobOppsNode = currentPersonaData.children.find(child => child.name === 'Job Opportunities');

            // Combine user jobs with example jobs
            const allJobs = [...userJobs];

            // Add example jobs from persona data
            if (jobOppsNode && jobOppsNode.children && jobOppsNode.children.length > 0) {
                jobOppsNode.children.forEach((job) => {
                    const jobText = job.name;
                    const lines = jobText.split('\n');
                    const title = lines[0] || 'Untitled Position';
                    const details = lines[1] || '';

                    // Parse company, location, salary from "Company (Location, Salary)"
                    const match = details.match(/^(.+?)\s*\((.+?),\s*\$?([\d,K]+)\)/);

                    if (match) {
                        allJobs.push({
                            title: title,
                            company: match[1].trim(),
                            location: match[2].trim(),
                            salary: '$' + match[3].trim(),
                            status: 'interested',
                            isExample: true
                        });
                    }
                });
            }

            if (allJobs.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px 20px; color: var(--color-neutral-text-light);">
                        <i class="ph ph-briefcase" style="font-size: 48px; opacity: 0.3; display: block; margin-bottom: 16px;"></i>
                        <p style="font-family: var(--font-family-ui); font-size: 15px;">No job opportunities yet. Click "Add Job" to track a new opportunity.</p>
                    </div>
                `;
                return;
            }

            const statusLabels = {
                'interested': 'Interested',
                'applied': 'Applied',
                'interviewing': 'Interviewing',
                'offer': 'Offer',
                'rejected': 'Rejected'
            };

            // Display all jobs
            allJobs.forEach((job, index) => {
                const isUserJob = index < userJobs.length;

                const card = document.createElement('div');
                card.className = 'job-card';

                // Style example jobs differently
                if (job.isExample) {
                    card.style.borderLeft = '4px solid #e3f2fd';
                    card.style.background = '#fafbfc';
                }

                card.innerHTML = `
                    <div class="job-card-header">
                        <div style="flex: 1;">
                            <div class="job-title">${escapeHtml(job.title)}</div>
                            <div class="job-company">${escapeHtml(job.company)}</div>
                            ${job.location ? `<div class="job-location"><i class="ph ph-map-pin" style="font-size: 10px;"></i> ${escapeHtml(job.location)}</div>` : ''}
                            ${job.salary ? `<div class="job-salary">${escapeHtml(job.salary)}</div>` : ''}
                            <span class="job-status ${job.status}">${statusLabels[job.status]}</span>
                            ${job.isExample ? '<span class="competency-tag" style="margin-left: 6px;">Example</span>' : ''}
                        </div>
                        ${isUserJob ? `
                        <div class="story-actions">
                            <button class="story-action-btn" onclick="editJob(${index})" title="Edit">
                                <i class="ph ph-pencil-simple"></i>
                            </button>
                            <button class="story-action-btn delete" onclick="deleteJob(${index})" title="Delete">
                                <i class="ph ph-trash"></i>
                            </button>
                        </div>
                        ` : ''}
                    </div>
                    ${job.notes ? `<div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--color-neutral-border); font-size: 11px; color: var(--color-neutral-text-light);">${escapeHtml(job.notes)}</div>` : ''}
                `;
                container.appendChild(card);
            });
        }

        // Job Opportunities Management
        let userJobs = [];
        let editingJobIndex = -1;

        function loadUserJobs() {
            const stored = localStorage.getItem('jobOpportunities_' + currentPersona);
            if (stored) {
                try {
                    userJobs = JSON.parse(stored);
                } catch (e) {
                    userJobs = [];
                }
            } else {
                userJobs = [];
            }
        }

        function saveUserJobs() {
            localStorage.setItem('jobOpportunities_' + currentPersona, JSON.stringify(userJobs));
        }

        function addJobOpportunity() {
            editingJobIndex = -1;
            document.getElementById('jobFormTitle').textContent = 'Add Job Opportunity';
            document.getElementById('jobForm').reset();
            document.getElementById('jobFormModal').style.display = 'flex';
        }

        function closeJobForm() {
            document.getElementById('jobFormModal').style.display = 'none';
            document.getElementById('jobForm').reset();
            editingJobIndex = -1;
        }

        function saveJob(event) {
            event.preventDefault();

            const job = {
                title: document.getElementById('jobTitle').value,
                company: document.getElementById('jobCompany').value,
                location: document.getElementById('jobLocation').value,
                salary: document.getElementById('jobSalary').value,
                status: document.getElementById('jobStatus').value,
                notes: document.getElementById('jobNotes').value,
                url: document.getElementById('jobUrl').value
            };

            if (editingJobIndex >= 0) {
                userJobs[editingJobIndex] = job;
            } else {
                userJobs.push(job);
            }

            saveUserJobs();
            closeJobForm();
            loadJobOpportunities();
            updateNodeCounts();
        }

        function editJob(index) {
            const job = userJobs[index];
            editingJobIndex = index;

            document.getElementById('jobFormTitle').textContent = 'Edit Job Opportunity';
            document.getElementById('jobTitle').value = job.title;
            document.getElementById('jobCompany').value = job.company;
            document.getElementById('jobLocation').value = job.location || '';
            document.getElementById('jobSalary').value = job.salary || '';
            document.getElementById('jobStatus').value = job.status || 'interested';
            document.getElementById('jobNotes').value = job.notes || '';
            document.getElementById('jobUrl').value = job.url || '';

            document.getElementById('jobFormModal').style.display = 'flex';
        }

        function deleteJob(index) {
            if (confirm('Are you sure you want to delete this job opportunity?')) {
                userJobs.splice(index, 1);
                saveUserJobs();
                loadJobOpportunities();
                updateNodeCounts();
            }
        }

        // Career Experience Management
        let userExperiences = [];
        let editingExperienceIndex = -1;

        // Example experiences for each persona
        const exampleExperiences = {
            'retail-manager': [
                {
                    organizationName: 'RetailMart',
                    role: 'Store Manager',
                    location: 'Denver, CO',
                    startDate: '2019-03',
                    endDate: '2024-02',
                    description: 'Managed daily operations of high-volume retail location with 25+ staff members. Oversaw inventory, scheduling, customer service, and P&L.',
                    technologies: [
                        { name: 'Excel', type: 'Core' },
                        { name: 'POS Systems', type: 'Core' },
                        { name: 'Inventory Management Software', type: 'Core' },
                        { name: 'Scheduling Tools', type: 'Peripheral' }
                    ],
                    keySkills: ['Team Leadership', 'P&L Management', 'Customer Service', 'Inventory Control', 'Staff Training'],
                    competencies: ['Operations Management', 'Process Improvement', 'Performance Analytics', 'Stakeholder Communication'],
                    projectTypes: ['Process Optimization', 'Team Development', 'Customer Experience Enhancement'],
                    internalStakeholders: ['Regional Manager', 'HR Department', 'Loss Prevention Team'],
                    externalStakeholders: ['Customers', 'Vendors', 'Local Community'],
                    achievements: [
                        'Increased store revenue by 23% year-over-year',
                        'Reduced employee turnover by 40% through improved training',
                        'Maintained 95%+ customer satisfaction score'
                    ]
                },
                {
                    organizationName: 'QuickMart',
                    role: 'Assistant Store Manager',
                    location: 'Denver, CO',
                    startDate: '2016-06',
                    endDate: '2019-02',
                    description: 'Supported store operations and managed shifts. Supervised 10+ employees, handled customer escalations, and assisted with inventory management.',
                    technologies: [
                        { name: 'Excel', type: 'Core' },
                        { name: 'POS Systems', type: 'Core' },
                        { name: 'Inventory Software', type: 'Peripheral' }
                    ],
                    keySkills: ['Shift Management', 'Customer Service', 'Team Supervision', 'Problem Solving', 'Cash Handling'],
                    competencies: ['Operations Support', 'Conflict Resolution', 'Team Coordination', 'Sales Performance'],
                    projectTypes: ['Customer Service Improvement', 'Team Training', 'Loss Prevention'],
                    internalStakeholders: ['Store Manager', 'District Manager', 'Loss Prevention'],
                    externalStakeholders: ['Customers', 'Vendors'],
                    achievements: [
                        'Promoted to Store Manager after 2.5 years',
                        'Reduced shrinkage by 15% through improved procedures',
                        'Consistently achieved top 3 in customer satisfaction surveys'
                    ]
                },
                {
                    organizationName: 'FreshFoods Grocery',
                    role: 'Department Supervisor',
                    location: 'Colorado Springs, CO',
                    startDate: '2014-08',
                    endDate: '2016-05',
                    description: 'Supervised produce department with 6 team members. Managed ordering, merchandising, quality control, and customer service.',
                    technologies: [
                        { name: 'Excel', type: 'Peripheral' },
                        { name: 'Ordering Systems', type: 'Core' }
                    ],
                    keySkills: ['Inventory Management', 'Merchandising', 'Quality Control', 'Team Leadership', 'Vendor Relations'],
                    competencies: ['Department Operations', 'Product Knowledge', 'Loss Prevention', 'Customer Engagement'],
                    projectTypes: ['Process Standardization', 'Quality Improvement', 'Sales Growth'],
                    internalStakeholders: ['Store Manager', 'Other Department Supervisors'],
                    externalStakeholders: ['Produce Vendors', 'Customers'],
                    achievements: [
                        'Increased department sales by 18%',
                        'Reduced spoilage by 25% through better rotation',
                        'Trained 3 employees who went on to supervisor roles'
                    ]
                }
            ],
            'chemist': [
                {
                    organizationName: 'PharmaTech Labs',
                    role: 'Research Chemist',
                    location: 'Boston, MA',
                    startDate: '2020-06',
                    endDate: '2024-01',
                    description: 'Conducted analytical chemistry research for pharmaceutical development. Designed experiments, analyzed compounds, and collaborated with cross-functional teams.',
                    technologies: [
                        { name: 'HPLC', type: 'Core' },
                        { name: 'Mass Spectrometry', type: 'Core' },
                        { name: 'Python', type: 'Peripheral' },
                        { name: 'ChemDraw', type: 'Core' },
                        { name: 'Lab Information Management Systems', type: 'Peripheral' }
                    ],
                    keySkills: ['Analytical Chemistry', 'Data Analysis', 'Technical Writing', 'Lab Safety', 'Quality Control'],
                    competencies: ['Scientific Research', 'Problem Solving', 'Regulatory Compliance', 'Cross-functional Collaboration'],
                    projectTypes: ['Research & Development', 'Quality Assurance', 'Method Validation'],
                    internalStakeholders: ['Principal Scientist', 'Quality Team', 'R&D Leadership'],
                    externalStakeholders: ['Regulatory Agencies', 'Contract Labs', 'Equipment Vendors'],
                    achievements: [
                        'Published 3 peer-reviewed papers in analytical chemistry journals',
                        'Developed new testing method reducing analysis time by 35%',
                        'Led successful FDA audit with zero findings'
                    ]
                },
                {
                    organizationName: 'BioTech Research Inc',
                    role: 'Associate Chemist',
                    location: 'Cambridge, MA',
                    startDate: '2018-09',
                    endDate: '2020-05',
                    description: 'Performed laboratory analysis and quality control testing. Maintained lab equipment, documented procedures, and supported senior researchers.',
                    technologies: [
                        { name: 'GC-MS', type: 'Core' },
                        { name: 'HPLC', type: 'Core' },
                        { name: 'Spectroscopy', type: 'Core' },
                        { name: 'LabWare LIMS', type: 'Peripheral' }
                    ],
                    keySkills: ['Laboratory Techniques', 'Quality Control', 'Documentation', 'Equipment Maintenance', 'Sample Preparation'],
                    competencies: ['Analytical Testing', 'GLP/GMP Compliance', 'Technical Documentation', 'Lab Safety'],
                    projectTypes: ['Quality Control', 'Method Development Support', 'Equipment Validation'],
                    internalStakeholders: ['Senior Chemists', 'Quality Manager', 'Lab Technicians'],
                    externalStakeholders: ['Equipment Vendors', 'Calibration Services'],
                    achievements: [
                        'Maintained 99.5% accuracy rate on quality control samples',
                        'Reduced instrument downtime by 30% through preventive maintenance',
                        'Trained 5 new lab technicians on analytical methods'
                    ]
                },
                {
                    organizationName: 'University Research Lab',
                    role: 'Graduate Research Assistant',
                    location: 'Boston, MA',
                    startDate: '2016-08',
                    endDate: '2018-05',
                    description: 'Conducted graduate research in organic chemistry. Synthesized compounds, performed characterization, and assisted with undergraduate teaching.',
                    technologies: [
                        { name: 'NMR Spectroscopy', type: 'Core' },
                        { name: 'Chromatography', type: 'Core' },
                        { name: 'ChemDraw', type: 'Core' }
                    ],
                    keySkills: ['Organic Synthesis', 'Compound Characterization', 'Literature Research', 'Scientific Writing', 'Teaching'],
                    competencies: ['Research Design', 'Data Analysis', 'Academic Collaboration', 'Presentation Skills'],
                    projectTypes: ['Academic Research', 'Teaching Assistant', 'Thesis Research'],
                    internalStakeholders: ['Thesis Advisor', 'Lab Group Members', 'Undergraduate Students'],
                    externalStakeholders: ['Academic Conferences', 'Journal Reviewers'],
                    achievements: [
                        'Published 2 first-author papers in peer-reviewed journals',
                        'Received departmental teaching excellence award',
                        'Completed Master of Science in Chemistry with honors'
                    ]
                }
            ],
            'new-graduate': [
                {
                    organizationName: 'State University',
                    role: 'Computer Science Student',
                    location: 'Austin, TX',
                    startDate: '2020-08',
                    endDate: '2024-05',
                    description: 'Bachelor of Science in Computer Science. Completed coursework in algorithms, data structures, web development, and databases. Participated in hackathons and coding competitions.',
                    technologies: [
                        { name: 'Python', type: 'Core' },
                        { name: 'Java', type: 'Core' },
                        { name: 'JavaScript', type: 'Core' },
                        { name: 'React', type: 'Peripheral' },
                        { name: 'SQL', type: 'Core' },
                        { name: 'Git', type: 'Core' }
                    ],
                    keySkills: ['Object-Oriented Programming', 'Algorithm Design', 'Web Development', 'Database Design', 'Agile Methodology'],
                    competencies: ['Software Development', 'Problem Solving', 'Technical Communication', 'Team Collaboration'],
                    projectTypes: ['Capstone Project', 'Hackathons', 'Academic Research'],
                    internalStakeholders: ['Academic Advisors', 'Professors', 'Student Teams'],
                    externalStakeholders: ['Industry Mentors', 'Open Source Community'],
                    achievements: [
                        'Graduated Magna Cum Laude with 3.8 GPA',
                        'Won 1st place at regional hackathon for mobile app development',
                        'Completed 3-month internship at tech startup'
                    ]
                },
                {
                    organizationName: 'TechStart Inc',
                    role: 'Software Engineering Intern',
                    location: 'Austin, TX',
                    startDate: '2023-06',
                    endDate: '2023-08',
                    description: '12-week summer internship developing web applications. Built features for customer-facing portal, fixed bugs, and participated in code reviews.',
                    technologies: [
                        { name: 'React', type: 'Core' },
                        { name: 'Node.js', type: 'Core' },
                        { name: 'MongoDB', type: 'Core' },
                        { name: 'Git', type: 'Core' },
                        { name: 'Docker', type: 'Peripheral' }
                    ],
                    keySkills: ['Full Stack Development', 'Agile Workflow', 'Code Review', 'RESTful APIs', 'Testing'],
                    competencies: ['Software Engineering', 'Team Collaboration', 'Problem Solving', 'Communication'],
                    projectTypes: ['Feature Development', 'Bug Fixes', 'Code Refactoring'],
                    internalStakeholders: ['Engineering Manager', 'Senior Developers', 'Product Manager'],
                    externalStakeholders: ['End Users'],
                    achievements: [
                        'Shipped 5 new features to production',
                        'Received full-time job offer upon graduation',
                        'Reduced page load time by 40% through optimization'
                    ]
                },
                {
                    organizationName: 'University IT Department',
                    role: 'Student Web Developer',
                    location: 'Austin, TX',
                    startDate: '2022-01',
                    endDate: '2024-05',
                    description: 'Part-time web development position maintaining university websites. Updated content, fixed issues, and built new pages for campus departments.',
                    technologies: [
                        { name: 'HTML/CSS', type: 'Core' },
                        { name: 'JavaScript', type: 'Core' },
                        { name: 'WordPress', type: 'Core' },
                        { name: 'PHP', type: 'Peripheral' }
                    ],
                    keySkills: ['Web Development', 'Content Management', 'Responsive Design', 'Customer Service', 'Time Management'],
                    competencies: ['Web Design', 'Technical Support', 'Project Management', 'Stakeholder Communication'],
                    projectTypes: ['Website Maintenance', 'New Site Development', 'Accessibility Compliance'],
                    internalStakeholders: ['IT Manager', 'Campus Departments', 'Web Team'],
                    externalStakeholders: ['Students', 'Faculty', 'Website Visitors'],
                    achievements: [
                        'Maintained 20+ department websites',
                        'Improved accessibility compliance across all sites',
                        'Balanced work with full-time coursework (20 hours/week)'
                    ]
                }
            ],
            'data-analyst': [
                {
                    organizationName: 'FinServe Corp',
                    role: 'Business Intelligence Analyst',
                    location: 'Chicago, IL',
                    startDate: '2021-01',
                    endDate: null,
                    description: 'Analyze business data to drive strategic decisions. Build dashboards, perform statistical analysis, and present insights to leadership.',
                    technologies: [
                        { name: 'SQL', type: 'Core' },
                        { name: 'Python', type: 'Core' },
                        { name: 'Tableau', type: 'Core' },
                        { name: 'Power BI', type: 'Peripheral' },
                        { name: 'Excel', type: 'Core' },
                        { name: 'R', type: 'Peripheral' }
                    ],
                    keySkills: ['Data Analysis', 'Data Visualization', 'Statistical Modeling', 'Business Intelligence', 'Stakeholder Communication'],
                    competencies: ['Business Analytics', 'Strategic Planning', 'Data Storytelling', 'Process Improvement'],
                    projectTypes: ['Dashboard Development', 'Predictive Analytics', 'Business Reporting'],
                    internalStakeholders: ['Finance Team', 'Executive Leadership', 'Product Managers'],
                    externalStakeholders: ['External Auditors', 'Business Partners'],
                    achievements: [
                        'Built executive dashboard used by C-suite for strategic decisions',
                        'Identified $2M in cost savings through data analysis',
                        'Reduced reporting time by 60% through automation'
                    ]
                },
                {
                    organizationName: 'RetailCo Analytics',
                    role: 'Data Analyst',
                    location: 'Minneapolis, MN',
                    startDate: '2019-06',
                    endDate: '2020-12',
                    description: 'Analyzed retail sales data to identify trends and opportunities. Created reports for merchandising teams and supported inventory optimization initiatives.',
                    technologies: [
                        { name: 'SQL', type: 'Core' },
                        { name: 'Excel', type: 'Core' },
                        { name: 'Tableau', type: 'Core' },
                        { name: 'Python', type: 'Peripheral' }
                    ],
                    keySkills: ['SQL Queries', 'Data Visualization', 'Report Building', 'Trend Analysis', 'Excel Modeling'],
                    competencies: ['Retail Analytics', 'Business Reporting', 'Data Quality', 'Stakeholder Collaboration'],
                    projectTypes: ['Sales Analysis', 'Inventory Reporting', 'Trend Forecasting'],
                    internalStakeholders: ['Merchandising Team', 'Store Operations', 'Marketing'],
                    externalStakeholders: ['Vendor Partners'],
                    achievements: [
                        'Created automated weekly sales dashboard saving 10 hours/week',
                        'Identified underperforming products leading to $500K savings',
                        'Supported successful launch of 3 new product categories'
                    ]
                },
                {
                    organizationName: 'State University',
                    role: 'Business Analytics Student',
                    location: 'Chicago, IL',
                    startDate: '2017-08',
                    endDate: '2019-05',
                    description: 'Completed Master of Science in Business Analytics. Coursework in statistics, machine learning, data visualization, and business strategy.',
                    technologies: [
                        { name: 'R', type: 'Core' },
                        { name: 'Python', type: 'Core' },
                        { name: 'SQL', type: 'Core' },
                        { name: 'Tableau', type: 'Core' },
                        { name: 'SAS', type: 'Peripheral' }
                    ],
                    keySkills: ['Statistical Analysis', 'Machine Learning', 'Data Mining', 'Predictive Modeling', 'Data Visualization'],
                    competencies: ['Quantitative Analysis', 'Research Methods', 'Business Intelligence', 'Technical Communication'],
                    projectTypes: ['Capstone Projects', 'Case Studies', 'Group Projects'],
                    internalStakeholders: ['Faculty Advisors', 'Project Teams', 'Career Services'],
                    externalStakeholders: ['Industry Partners', 'Guest Speakers'],
                    achievements: [
                        'Graduated with 3.9 GPA',
                        'Won 2nd place in analytics case competition',
                        'Completed capstone project for Fortune 500 company'
                    ]
                }
            ]
        };

        function loadUserExperiences() {
            const stored = localStorage.getItem('careerExperiences_' + currentPersona);
            if (stored) {
                try {
                    userExperiences = JSON.parse(stored);
                } catch (e) {
                    userExperiences = [];
                }
            } else {
                userExperiences = [];
            }
        }

        function saveUserExperiences() {
            localStorage.setItem('careerExperiences_' + currentPersona, JSON.stringify(userExperiences));
        }

        function openCareerExperienceSlideout() {
            const slideout = document.getElementById('interviewSlideout');
            const titleEl = document.getElementById('slideoutTitle');
            const behavioralContent = document.getElementById('behavioralContent');
            const technicalContent = document.getElementById('technicalContent');
            const jobOpportunitiesContent = document.getElementById('jobOpportunitiesContent');
            const careerExperienceContent = document.getElementById('careerExperienceContent');
            const applicationMaterialsContent = document.getElementById('applicationMaterialsContent');

            titleEl.textContent = 'Career Experience';

            // Hide all other content sections
            behavioralContent.style.display = 'none';
            technicalContent.style.display = 'none';
            jobOpportunitiesContent.style.display = 'none';
            applicationMaterialsContent.style.display = 'none';
            document.getElementById('portfolioContent').style.display = 'none';

            // Show career experience content
            careerExperienceContent.style.display = 'flex';

            loadCareerExperiences();
            slideout.classList.add('active');
        }

        function loadCareerExperiences() {
            const container = document.getElementById('experiencesContainer');
            container.innerHTML = '';

            loadUserExperiences();

            // Combine user experiences with example experiences
            const allExperiences = [...userExperiences];

            // Add example experiences for current persona
            const personaExamples = exampleExperiences[currentPersona] || [];
            personaExamples.forEach(exp => {
                allExperiences.push({ ...exp, isExample: true });
            });

            // Sort experiences by start date (most recent first)
            const sortedExperiences = [...allExperiences].sort((a, b) => {
                const dateA = a.startDate || '0000-00-00';
                const dateB = b.startDate || '0000-00-00';
                return dateB.localeCompare(dateA);
            });

            if (sortedExperiences.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px 20px; color: var(--color-neutral-text-light);">
                        <i class="ph ph-briefcase" style="font-size: 48px; opacity: 0.3; display: block; margin-bottom: 16px;"></i>
                        <p style="font-family: var(--font-family-ui); font-size: 15px;">No career experiences yet. Click "Add Experience" to track your work history.</p>
                    </div>
                `;
                return;
            }

            // Display all experiences
            sortedExperiences.forEach((exp, index) => {
                const originalIndex = userExperiences.indexOf(exp);
                const isUserExperience = !exp.isExample;
                const startDate = exp.startDate ? new Date(exp.startDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short' }) : '';
                const endDate = exp.endDate ? new Date(exp.endDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short' }) : 'Present';

                const card = document.createElement('div');
                card.className = 'experience-card';

                // Style example experiences differently
                if (exp.isExample) {
                    card.style.borderLeft = '4px solid #e3f2fd';
                    card.style.background = '#fafbfc';
                }

                card.innerHTML = `
                    <div class="experience-card-header">
                        <div style="flex: 1;">
                            <div class="exp-title">${escapeHtml(exp.role)}${exp.isExample ? ' <span class="competency-tag" style="margin-left: 6px;">Example</span>' : ''}</div>
                            <div class="exp-company">${escapeHtml(exp.organizationName)}${exp.location ? ' • ' + escapeHtml(exp.location) : ''}</div>
                            <div class="exp-dates">${startDate} - ${endDate}</div>
                        </div>
                        ${isUserExperience ? `
                        <div class="story-actions">
                            <button class="story-action-btn" onclick="editExperienceRecord(${originalIndex})" title="Edit">
                                <i class="ph ph-pencil-simple"></i>
                            </button>
                            <button class="story-action-btn delete" onclick="deleteExperienceRecord(${originalIndex})" title="Delete">
                                <i class="ph ph-trash"></i>
                            </button>
                        </div>
                        ` : ''}
                    </div>
                    ${exp.description ? `<div class="exp-description">${escapeHtml(exp.description)}</div>` : ''}
                    ${exp.technologies && exp.technologies.length > 0 ? `
                        <div class="exp-section">
                            <div class="exp-section-label">Technologies</div>
                            <div class="exp-tags">
                                ${exp.technologies.map(tech => `<span class="exp-tag ${tech.type ? tech.type.toLowerCase() : ''}">${escapeHtml(tech.name || tech)}</span>`).join('')}
                            </div>
                        </div>
                    ` : ''}
                    ${exp.keySkills && exp.keySkills.length > 0 ? `
                        <div class="exp-section">
                            <div class="exp-section-label">Key Skills</div>
                            <div class="exp-tags">
                                ${exp.keySkills.map(skill => `<span class="exp-tag">${escapeHtml(skill)}</span>`).join('')}
                            </div>
                        </div>
                    ` : ''}
                    ${exp.competencies && exp.competencies.length > 0 ? `
                        <div class="exp-section">
                            <div class="exp-section-label">Competencies</div>
                            <div class="exp-tags">
                                ${exp.competencies.map(comp => `<span class="exp-tag">${escapeHtml(comp)}</span>`).join('')}
                            </div>
                        </div>
                    ` : ''}
                    ${exp.achievements && exp.achievements.length > 0 ? `
                        <div class="exp-section">
                            <div class="exp-section-label">Achievements</div>
                            <ul class="exp-list">
                                ${exp.achievements.map(achievement => `<li>${escapeHtml(achievement)}</li>`).join('')}
                            </ul>
                        </div>
                    ` : ''}
                `;
                container.appendChild(card);
            });
        }

        function addExperienceRecord() {
            alert('Add Experience feature coming soon!');
        }

        function editExperienceRecord(index) {
            alert('Edit Experience feature coming soon!');
        }

        function deleteExperienceRecord(index) {
            if (confirm('Are you sure you want to delete this experience?')) {
                userExperiences.splice(index, 1);
                saveUserExperiences();
                loadCareerExperiences();
                updateNodeCounts();
            }
        }

        function connectLinkedIn() {
            alert('LinkedIn integration coming soon! This will allow you to import your work experience directly from your LinkedIn profile.');
        }

        function uploadResume() {
            alert('Resume upload coming soon! This will parse your resume and automatically extract your work experience, skills, and achievements.');
        }

        // Application Materials Management
        let userApplicationMaterials = [];
        let editingMaterialIndex = -1;

        // Example application materials for each persona
        const exampleApplicationMaterials = {
            'retail-manager': [
                {
                    type: 'Resume',
                    title: 'Cloud Operations Resume',
                    jobOpportunity: 'Cloud Operations Engineer - TechCorp',
                    content: 'Experienced retail operations manager with 5+ years managing store operations, inventory systems, and teams of 15-30 employees. Strong background in data analysis using Excel and Power BI. Seeking to transition technical operations and cloud infrastructure management skills.',
                    format: 'PDF',
                    atsOptimized: true,
                    createdDate: '2024-09-15',
                    isExample: true
                },
                {
                    type: 'Cover Letter',
                    title: 'Cloud Operations Cover Letter',
                    jobOpportunity: 'Cloud Operations Engineer - TechCorp',
                    content: 'Dear Hiring Manager,\n\nI am writing to express my strong interest in the Cloud Operations Engineer position at TechCorp. While my professional background is in retail management, I have developed a strong foundation in technical operations, data analysis, and system optimization that directly translates to cloud operations.\n\nIn my role as Store Manager at RetailMart, I successfully managed complex operational systems including POS infrastructure, inventory management systems, and business analytics platforms. I taught myself Excel, Power BI, and basic SQL to build automated reporting dashboards that reduced manual reporting time by 90% and improved inventory accuracy from 83% to 94%.\n\nMy experience managing 24/7 retail operations has given me deep expertise in incident response, system monitoring, and maintaining high availability - all critical skills for cloud operations. I\'m comfortable working under pressure during peak periods and have consistently maintained 99.5%+ system uptime even during our busiest seasons.\n\nI am currently completing AWS Cloud Practitioner and Solutions Architect Associate certifications to formalize my cloud knowledge. I\'m excited about the opportunity to bring my operational excellence, problem-solving skills, and commitment to reliability to TechCorp\'s cloud infrastructure team.\n\nThank you for considering my application.\n\nSincerely,\n[Your Name]',
                    format: 'DOCX',
                    atsOptimized: true,
                    createdDate: '2024-09-15',
                    isExample: true
                },
                {
                    type: 'Email',
                    title: 'Networking Email to TechCorp Cloud Engineer',
                    jobOpportunity: 'Cloud Operations Engineer - TechCorp',
                    content: 'Subject: Retail Manager → Cloud Operations: Seeking Advice\n\nHi [Name],\n\nI found your profile while researching Cloud Operations Engineers at TechCorp and was impressed by your career path. I\'m currently a Store Manager at RetailMart looking to transition into cloud operations, and I\'d love to learn from your experience.\n\nI\'ve been managing 24/7 retail operations for 5 years, including POS systems, inventory management, and analytics platforms. I\'ve taught myself data analysis (Excel, Power BI, SQL) and am currently studying for AWS certifications. I believe my operational experience and technical aptitude would translate well to cloud operations.\n\nWould you be open to a brief 15-minute call to share your insights on making a similar transition? I\'d love to hear about the skills that matter most in your role and any advice you have for someone with my background.\n\nI understand you\'re busy - even a few sentences via email would be incredibly helpful!\n\nThank you for considering,\n[Your Name]',
                    format: 'HTML',
                    atsOptimized: false,
                    createdDate: '2024-09-16',
                    isExample: true
                }
            ],
            'chemist': [
                {
                    type: 'Resume',
                    title: 'Cloud Computing Resume',
                    jobOpportunity: 'Cloud Solutions Architect - CloudVendor',
                    content: 'Senior Chemist with 4+ years pharmaceutical R&D experience and strong computational background. Extensive experience with scientific computing, data analysis (Python, R), and laboratory automation systems. Seeking to apply analytical rigor and technical expertise to cloud architecture and solutions design.',
                    format: 'PDF',
                    atsOptimized: true,
                    createdDate: '2024-09-12',
                    isExample: true
                },
                {
                    type: 'Cover Letter',
                    title: 'Cloud Architect Cover Letter',
                    jobOpportunity: 'Cloud Solutions Architect - CloudVendor',
                    content: 'Dear Hiring Manager,\n\nI am excited to apply for the Cloud Solutions Architect position at CloudVendor. As a Senior Chemist with extensive experience in computational chemistry and scientific data analysis, I bring a unique combination of analytical thinking, technical depth, and problem-solving skills that translate directly to cloud architecture.\n\nIn my current role at PharmaCorp, I regularly work with large-scale computational workflows processing terabytes of experimental data. I\'ve designed and optimized data pipelines using Python and R, integrated multiple scientific software platforms, and troubleshot complex system performance issues - experiences that mirror the challenges cloud architects face when designing scalable solutions.\n\nMy work has required me to deeply understand distributed computing concepts, resource optimization, and system reliability. When our lab needed to process 10x more molecular simulations for a critical drug discovery project, I architected a workflow that reduced processing time from 3 weeks to 4 days by optimizing parallelization and resource allocation.\n\nI\'ve been systematically building cloud expertise through AWS Solutions Architect certification coursework and hands-on personal projects deploying containerized applications, implementing CI/CD pipelines, and designing multi-tier architectures on AWS.\n\nI\'m eager to bring my analytical rigor, systems thinking, and technical aptitude to help CloudVendor\'s customers design robust, scalable cloud solutions.\n\nThank you for your consideration.\n\nBest regards,\n[Your Name]',
                    format: 'DOCX',
                    atsOptimized: true,
                    createdDate: '2024-09-12',
                    isExample: true
                },
                {
                    type: 'Email',
                    title: 'Cold Outreach to CloudVendor Recruiter',
                    jobOpportunity: 'Cloud Solutions Architect - CloudVendor',
                    content: 'Subject: PhD Chemist → Cloud Solutions Architect: Non-Traditional Background\n\nHi [Recruiter Name],\n\nI\'m reaching out regarding the Cloud Solutions Architect role at CloudVendor (Job #12345). I know my resume shows "Senior Chemist" rather than traditional cloud experience, but I believe my technical background positions me uniquely well for this role.\n\nIn pharmaceutical R&D, I\'ve spent 4+ years designing computational workflows for large-scale data analysis, optimizing distributed computing systems, and troubleshooting complex multi-system integrations - skills that map directly to cloud architecture challenges. I\'m proficient in Python, Linux, Git, and containerization, and I\'m completing my AWS Solutions Architect Associate certification.\n\nI\'ve successfully delivered multiple projects requiring systems thinking and technical depth:\n- Architected data pipeline processing 2TB+ datasets, reducing compute time 75%\n- Integrated 5+ scientific software platforms with automated workflows\n- Led cross-functional teams through technical troubleshooting and optimization\n\nI understand this is a non-traditional background, but I\'m confident my analytical rigor, technical aptitude, and problem-solving approach would bring value to CloudVendor\'s solutions architecture team. Would you be open to a brief conversation to discuss how my experience translates to cloud architecture?\n\nI\'ve attached my resume highlighting the technical parallels. Thank you for considering a candidate with a different path into tech!\n\nBest,\n[Your Name]',
                    format: 'TXT',
                    atsOptimized: false,
                    createdDate: '2024-09-13',
                    isExample: true
                }
            ],
            'new-graduate': [
                {
                    type: 'Resume',
                    title: 'Full Stack Developer Resume',
                    jobOpportunity: 'Junior Full Stack Developer - StartupCo',
                    content: 'Recent Computer Science graduate with strong full-stack development skills and 3 internship experiences. Proficient in React, Node.js, Python, and cloud platforms. Built 5+ personal projects including e-commerce platform and social media dashboard. Seeking entry-level full stack role to apply technical skills and continue learning.',
                    format: 'PDF',
                    atsOptimized: true,
                    createdDate: '2024-09-20',
                    isExample: true
                },
                {
                    type: 'Cover Letter',
                    title: 'Junior Developer Cover Letter',
                    jobOpportunity: 'Junior Full Stack Developer - StartupCo',
                    content: 'Dear Hiring Manager,\n\nI am excited to apply for the Junior Full Stack Developer position at StartupCo. As a recent Computer Science graduate with internship experience and a portfolio of personal projects, I am eager to contribute to your engineering team while continuing to grow my technical skills.\n\nDuring my Software Engineering Internship at TechStart Inc., I contributed to a React-based customer portal serving 10,000+ users. I implemented responsive UI components, integrated RESTful APIs, and wrote comprehensive test suites - resulting in a 20% reduction in reported bugs. This experience taught me the importance of code quality, user-centric design, and collaborative development.\n\nBeyond coursework and internships, I\'ve built several full-stack projects to deepen my skills:\n- E-commerce platform with React frontend, Node.js backend, and PostgreSQL database\n- Real-time chat application using WebSockets and Redis\n- Personal portfolio website with blog CMS (Next.js, Tailwind CSS)\n\nI\'m particularly drawn to StartupCo\'s mission to [mission] and your tech stack. I\'m proficient in React, Node.js, Python, and PostgreSQL, and I\'m comfortable learning new technologies quickly. I\'m excited about the opportunity to work on challenging problems, learn from experienced engineers, and contribute to meaningful products.\n\nThank you for considering my application. I look forward to the opportunity to discuss how I can contribute to StartupCo\'s success.\n\nBest regards,\n[Your Name]',
                    format: 'DOCX',
                    atsOptimized: true,
                    createdDate: '2024-09-20',
                    isExample: true
                },
                {
                    type: 'Email',
                    title: 'Follow-up After Career Fair',
                    jobOpportunity: 'Junior Full Stack Developer - StartupCo',
                    content: 'Subject: Following Up - CS Grad Interested in Junior Full Stack Role\n\nHi [Recruiter Name],\n\nIt was great meeting you at the Tech Career Fair yesterday! I enjoyed learning about StartupCo\'s product roadmap and engineering culture. Your comments about prioritizing code quality and mentorship really resonated with me.\n\nAs mentioned, I\'m a recent CS graduate actively seeking junior full stack roles. I have:\n- 3 internships (including 6-month SWE internship at TechStart Inc.)\n- Strong skills in React, Node.js, Python, PostgreSQL\n- Portfolio of 5+ personal projects demonstrating full-stack capabilities\n- Genuine excitement about building user-focused products\n\nI\'ve attached my resume and would love to continue the conversation about how I could contribute to your team. I\'m particularly interested in the Junior Full Stack Developer role I saw posted on your careers page.\n\nWould you be open to scheduling a brief call next week to discuss the role and answer any questions about my background?\n\nThank you again for your time at the fair!\n\nBest,\n[Your Name]\n\nPortfolio: [URL]\nGitHub: [URL]\nLinkedIn: [URL]',
                    format: 'HTML',
                    atsOptimized: false,
                    createdDate: '2024-09-21',
                    isExample: true
                }
            ],
            'data-analyst': [
                {
                    type: 'Resume',
                    title: 'Data Analyst Resume',
                    jobOpportunity: 'Senior Data Analyst - DataCorp',
                    content: 'Data Analyst with 3+ years experience in business intelligence, data visualization, and analytics. Proficient in SQL, Python, Tableau, and Power BI. Track record of delivering actionable insights that drove business decisions and revenue growth. Seeking senior analyst role to tackle complex analytical challenges.',
                    format: 'PDF',
                    atsOptimized: true,
                    createdDate: '2024-09-18',
                    isExample: true
                },
                {
                    type: 'Cover Letter',
                    title: 'Senior Analyst Cover Letter',
                    jobOpportunity: 'Senior Data Analyst - DataCorp',
                    content: 'Dear Hiring Manager,\n\nI am writing to express my strong interest in the Senior Data Analyst position at DataCorp. With over 3 years of experience delivering business-critical analytics and a proven track record of turning data into actionable insights, I am excited about the opportunity to contribute to your data team.\n\nIn my current role as BI Analyst at TechCorp, I\'ve consistently delivered high-impact analytical projects:\n- Built customer churn prediction model (78% accuracy) that reduced churn from 8% to 5.5%, saving $200K ARR\n- Automated executive reporting pipeline, reducing manual effort from 20 hours to 30 minutes monthly\n- Designed self-service analytics dashboards that democratized data access for 100+ employees\n- Collaborated cross-functionally with Product, Sales, and Customer Success to drive data-informed decisions\n\nI\'m proficient in the full analytics stack: SQL for data extraction and transformation, Python (pandas, scikit-learn) for advanced analysis and modeling, and Tableau/Power BI for visualization and storytelling. More importantly, I understand that great analysis requires both technical skills and business acumen - the ability to ask the right questions, identify meaningful patterns, and communicate insights effectively to non-technical stakeholders.\n\nI\'m particularly excited about DataCorp\'s focus on [specific aspect] and the opportunity to work with [specific technologies/data]. I\'m confident my analytical skills, business mindset, and collaborative approach would make me a strong addition to your team.\n\nThank you for considering my application. I look forward to discussing how I can contribute to DataCorp\'s success.\n\nBest regards,\n[Your Name]',
                    format: 'DOCX',
                    atsOptimized: true,
                    createdDate: '2024-09-18',
                    isExample: true
                },
                {
                    type: 'Email',
                    title: 'Referral Request from Former Colleague',
                    jobOpportunity: 'Senior Data Analyst - DataCorp',
                    content: 'Subject: Quick Favor - DataCorp Senior Analyst Referral?\n\nHey [Former Colleague],\n\nI hope you\'re doing well at DataCorp! I saw you\'ve been there about 6 months now - how are you liking it?\n\nI\'m reaching out because I\'m actively looking for my next role, and I noticed DataCorp has a Senior Data Analyst position open that looks like a great fit for my background. Given that we worked together at TechCorp and you know my analytical skills firsthand, I was hoping you might be willing to refer me?\n\nQuick reminder of what I bring to the table:\n- 3+ years BI/analytics experience\n- Strong SQL, Python, Tableau skills\n- Track record of high-impact projects (churn model, reporting automation, etc.)\n- Collaborative cross-functional approach\n\nI know referrals can be a big ask, so totally understand if the timing isn\'t right. But if you\'d be comfortable putting in a good word, I\'d really appreciate it! I\'ve attached my resume if that helps.\n\nEither way, would love to catch up sometime - it\'s been too long!\n\nThanks for considering,\n[Your Name]',
                    format: 'TXT',
                    atsOptimized: false,
                    createdDate: '2024-09-19',
                    isExample: true
                }
            ]
        };

        function loadUserApplicationMaterials() {
            const stored = localStorage.getItem(`applicationMaterials_${currentPersona}`);
            userApplicationMaterials = stored ? JSON.parse(stored) : [];
        }

        function saveUserApplicationMaterials() {
            localStorage.setItem(`applicationMaterials_${currentPersona}`, JSON.stringify(userApplicationMaterials));
        }

        function openApplicationMaterialsSlideout() {
            loadUserApplicationMaterials();
            const slideout = document.getElementById('interviewSlideout');
            const titleEl = document.getElementById('slideoutTitle');
            const behavioralContent = document.getElementById('behavioralContent');
            const technicalContent = document.getElementById('technicalContent');
            const jobOpportunitiesContent = document.getElementById('jobOpportunitiesContent');
            const careerExperienceContent = document.getElementById('careerExperienceContent');
            const applicationMaterialsContent = document.getElementById('applicationMaterialsContent');

            titleEl.textContent = 'Application Materials';

            // Hide all other content sections
            behavioralContent.style.display = 'none';
            technicalContent.style.display = 'none';
            jobOpportunitiesContent.style.display = 'none';
            careerExperienceContent.style.display = 'none';
            document.getElementById('portfolioContent').style.display = 'none';

            // Show application materials content
            applicationMaterialsContent.style.display = 'flex';
            loadApplicationMaterials();

            slideout.classList.add('active');
        }

        function loadApplicationMaterials() {
            const container = document.getElementById('materialsContainer');
            const exampleMaterials = exampleApplicationMaterials[currentPersona] || [];
            const allMaterials = [...userApplicationMaterials, ...exampleMaterials];

            if (allMaterials.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 40px 20px;">No application materials yet. Click Generate or Upload to add materials.</p>';
                return;
            }

            container.innerHTML = allMaterials.map((material, index) => {
                const isUserMaterial = index < userApplicationMaterials.length;
                const typeColors = {
                    'Resume': '#0066CC',
                    'Cover Letter': '#004C99',
                    'Email': '#1a1a1a'
                };
                const typeColor = typeColors[material.type] || '#666';

                return `
                    <div class="story-card" style="opacity: ${material.isExample ? '0.7' : '1'};">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                            <div style="flex: 1;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; flex-wrap: wrap;">
                                    <span style="background: ${typeColor}; color: white; padding: 4px 10px; border-radius: 4px; font-size: 11px; font-weight: 600; white-space: nowrap;">
                                        ${material.type}
                                    </span>
                                    <span style="background: #f5f5f7; color: #666; padding: 4px 10px; border-radius: 4px; font-size: 11px; white-space: nowrap;">
                                        ${material.format}
                                    </span>
                                    ${material.atsOptimized ? '<span style="background: #e3f2fd; color: #0066CC; padding: 4px 10px; border-radius: 4px; font-size: 11px; white-space: nowrap;">ATS Optimized</span>' : ''}
                                    ${material.isExample ? '<span style="background: #fff3cd; color: #856404; padding: 4px 10px; border-radius: 4px; font-size: 11px; white-space: nowrap;">Example</span>' : ''}
                                </div>
                                <h4 style="margin: 0 0 4px 0; color: #1a1a1a; font-size: 15px; font-weight: 600;">${material.title}</h4>
                                ${material.jobOpportunity ? `<p style="margin: 0 0 8px 0; color: #666; font-size: 12px;">For: ${material.jobOpportunity}</p>` : ''}
                                <p style="margin: 0; color: #999; font-size: 11px;">Created: ${material.createdDate}</p>
                            </div>
                            ${isUserMaterial ? `
                                <div style="display: flex; gap: 8px;">
                                    <button onclick="downloadMaterial(${index})" style="padding: 6px 10px; background: #f5f5f7; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; color: #666; font-weight: 600;">
                                        <i class="ph ph-download-simple"></i> Download
                                    </button>
                                    <button onclick="deleteMaterial(${index})" style="padding: 6px 10px; background: #fee; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; color: #c33; font-weight: 600;">
                                        <i class="ph ph-trash"></i>
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e5e7;">
                            <p style="margin: 0; color: #666; font-size: 13px; line-height: 1.5; max-height: 60px; overflow: hidden; text-overflow: ellipsis;">
                                ${material.content.substring(0, 200)}${material.content.length > 200 ? '...' : ''}
                            </p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function generateMaterial() {
            // Create modal for generation options
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 10000; padding: 20px;';

            const jobOpps = exampleJobOpportunities[currentPersona] || [];
            const jobOptions = jobOpps.map((job, i) => `<option value="${i}">${job.title} - ${job.company}</option>`).join('');

            modal.innerHTML = `
                <div style="background: white; border-radius: 8px; padding: 24px; max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <h3 style="margin: 0 0 20px 0; font-family: Questrial, sans-serif; color: #1a1a1a;">Generate Application Material</h3>

                    <div style="margin-bottom: 16px;">
                        <label style="display: block; margin-bottom: 6px; font-size: 13px; font-weight: 600; color: #333;">Material Type</label>
                        <select id="materialType" style="width: 100%; padding: 10px; border: 1px solid #e5e5e7; border-radius: 4px; font-family: Barlow, sans-serif; font-size: 14px;">
                            <option value="Resume">Resume</option>
                            <option value="Cover Letter">Cover Letter</option>
                            <option value="Email">Email</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 16px;">
                        <label style="display: block; margin-bottom: 6px; font-size: 13px; font-weight: 600; color: #333;">Job Opportunity</label>
                        <select id="jobOpportunity" style="width: 100%; padding: 10px; border: 1px solid #e5e5e7; border-radius: 4px; font-family: Barlow, sans-serif; font-size: 14px;">
                            <option value="">Select a job opportunity...</option>
                            ${jobOptions}
                        </select>
                    </div>

                    <div style="margin-bottom: 16px;">
                        <label style="display: block; margin-bottom: 6px; font-size: 13px; font-weight: 600; color: #333;">Output Format</label>
                        <select id="outputFormat" style="width: 100%; padding: 10px; border: 1px solid #e5e5e7; border-radius: 4px; font-family: Barlow, sans-serif; font-size: 14px;">
                            <option value="PDF">PDF</option>
                            <option value="DOCX">DOCX (Word)</option>
                            <option value="HTML">HTML</option>
                            <option value="MD">Markdown</option>
                            <option value="TXT">Plain Text</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="atsOptimized" checked style="width: 18px; height: 18px; cursor: pointer;">
                            <span style="font-size: 13px; font-weight: 600; color: #333;">ATS Optimized (Applicant Tracking System)</span>
                        </label>
                        <p style="margin: 4px 0 0 26px; font-size: 12px; color: #666;">Formats the document for better parsing by automated hiring systems</p>
                    </div>

                    <div style="display: flex; gap: 12px; justify-content: flex-end;">
                        <button onclick="this.closest('div[style*=\\'position: fixed\\']').remove()" style="padding: 10px 20px; background: #f5f5f7; border: none; border-radius: 6px; cursor: pointer; font-family: Questrial, sans-serif; font-size: 14px; font-weight: 600; color: #666;">
                            Cancel
                        </button>
                        <button onclick="executeGenerate(this)" style="padding: 10px 20px; background: #0066CC; border: none; border-radius: 6px; cursor: pointer; font-family: Questrial, sans-serif; font-size: 14px; font-weight: 600; color: white;">
                            <i class="ph ph-sparkle"></i> Generate
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        function executeGenerate(button) {
            const modal = button.closest('div[style*="position: fixed"]');
            const materialType = document.getElementById('materialType').value;
            const jobOppIndex = document.getElementById('jobOpportunity').value;
            const outputFormat = document.getElementById('outputFormat').value;
            const atsOptimized = document.getElementById('atsOptimized').checked;

            if (!jobOppIndex) {
                alert('Please select a job opportunity');
                return;
            }

            const jobOpps = exampleJobOpportunities[currentPersona] || [];
            const selectedJob = jobOpps[jobOppIndex];
            const jobTitle = `${selectedJob.title} - ${selectedJob.company}`;

            // Simulate generation (in real implementation, this would call an API)
            const newMaterial = {
                type: materialType,
                title: `${materialType} for ${selectedJob.company}`,
                jobOpportunity: jobTitle,
                content: `Generated ${materialType.toLowerCase()} for ${jobTitle}. This would contain the actual generated content based on your career experience and the job requirements.`,
                format: outputFormat,
                atsOptimized: atsOptimized,
                createdDate: new Date().toISOString().split('T')[0],
                isExample: false
            };

            userApplicationMaterials.push(newMaterial);
            saveUserApplicationMaterials();
            loadApplicationMaterials();
            updateNodeCounts();
            modal.remove();

            alert(`${materialType} generated successfully! In a full implementation, this would use AI to generate a customized ${materialType.toLowerCase()} based on your experience and the job requirements.`);
        }

        function uploadMaterial() {
            alert('Upload functionality coming soon! This will allow you to upload existing resumes, cover letters, and other application materials in various formats (PDF, DOCX, TXT, etc.).');
        }

        function downloadMaterial(index) {
            const material = userApplicationMaterials[index];
            alert(`Download ${material.title} as ${material.format}\n\nIn a full implementation, this would download the material in the selected format.`);
        }

        function deleteMaterial(index) {
            if (confirm('Are you sure you want to delete this application material?')) {
                userApplicationMaterials.splice(index, 1);
                saveUserApplicationMaterials();
                loadApplicationMaterials();
                updateNodeCounts();
            }
        }

        // Portfolio Management
        let userPortfolioProjects = [];

        // Example portfolio projects for each persona
        const examplePortfolioProjects = {
            'retail-manager': [
                {
                    title: 'Power BI Sales Dashboard',
                    description: 'Interactive sales analytics dashboard tracking KPIs across 15 retail locations. Includes YoY comparisons, inventory turnover analysis, and predictive sales forecasting.',
                    technologies: ['Power BI', 'Excel', 'SQL'],
                    url: null,
                    imageUrl: null,
                    completedDate: '2023-11',
                    highlights: [
                        'Reduced reporting time from 4 hours to 15 minutes',
                        'Identified $45K in inventory optimization opportunities',
                        'Adopted by 12 stores in district'
                    ],
                    isExample: true
                },
                {
                    title: 'Staff Scheduling Model (Excel VBA)',
                    description: 'Automated employee scheduling system using Excel VBA and optimization algorithms. Considers availability, labor laws, peak traffic patterns, and employee preferences.',
                    technologies: ['Excel VBA', 'Optimization Algorithms'],
                    url: null,
                    imageUrl: null,
                    completedDate: '2023-06',
                    highlights: [
                        'Reduced scheduling time from 3 hours to 30 minutes weekly',
                        'Improved schedule fairness scores by 40%',
                        'Decreased overtime costs by 15%'
                    ],
                    isExample: true
                }
            ],
            'chemist': [
                {
                    title: 'Molecular Simulation Pipeline (Python)',
                    description: 'Automated computational chemistry workflow for high-throughput molecular dynamics simulations. Processes 100+ compounds in parallel using AWS batch computing.',
                    technologies: ['Python', 'AWS', 'Docker', 'RDKit', 'PyMOL'],
                    url: 'https://github.com/username/molecular-sim-pipeline',
                    imageUrl: null,
                    completedDate: '2024-01',
                    highlights: [
                        'Reduced simulation time from 3 weeks to 4 days',
                        'Processed 2TB+ of molecular data',
                        'Published methodology in Journal of Computational Chemistry'
                    ],
                    isExample: true
                },
                {
                    title: 'HPLC Data Analysis Dashboard',
                    description: 'R Shiny web application for analyzing HPLC chromatography data with automated peak detection, integration, and statistical analysis.',
                    technologies: ['R', 'Shiny', 'ggplot2', 'Machine Learning'],
                    url: 'https://github.com/username/hplc-analysis',
                    imageUrl: null,
                    completedDate: '2023-09',
                    highlights: [
                        'Automated analysis of 500+ chromatograms monthly',
                        '95% accuracy in automated peak detection',
                        'Used by 8 chemists in R&D department'
                    ],
                    isExample: true
                }
            ],
            'new-graduate': [
                {
                    title: 'E-Commerce Platform (MERN Stack)',
                    description: 'Full-stack e-commerce application with product catalog, shopping cart, user authentication, payment processing (Stripe), and admin dashboard.',
                    technologies: ['React', 'Node.js', 'Express', 'MongoDB', 'Stripe API'],
                    url: 'https://github.com/username/ecommerce-platform',
                    imageUrl: null,
                    completedDate: '2024-03',
                    highlights: [
                        'Built responsive UI with React and Tailwind CSS',
                        'Implemented JWT authentication and role-based access',
                        'Integrated Stripe payment processing',
                        '95% test coverage with Jest'
                    ],
                    isExample: true
                },
                {
                    title: 'Real-Time Chat Application',
                    description: 'WebSocket-based chat app with real-time messaging, user presence detection, typing indicators, and message history stored in Redis.',
                    technologies: ['React', 'Socket.io', 'Node.js', 'Redis', 'Docker'],
                    url: 'https://github.com/username/realtime-chat',
                    imageUrl: null,
                    completedDate: '2024-01',
                    highlights: [
                        'Handles 100+ concurrent connections',
                        'Sub-100ms message latency',
                        'Deployed on AWS with Docker and CI/CD pipeline'
                    ],
                    isExample: true
                }
            ],
            'data-analyst': [
                {
                    title: 'Customer Churn Prediction Model',
                    description: 'Machine learning model predicting customer churn 30 days in advance with 78% accuracy. Built using Python scikit-learn with feature engineering from behavioral data.',
                    technologies: ['Python', 'scikit-learn', 'pandas', 'Power BI'],
                    url: 'https://github.com/username/churn-prediction',
                    imageUrl: null,
                    completedDate: '2023-12',
                    highlights: [
                        '78% prediction accuracy (vs 65% baseline)',
                        'Reduced churn from 8% to 5.5%',
                        'Saved $200K in annual recurring revenue',
                        'Deployed as automated daily scoring pipeline'
                    ],
                    isExample: true
                },
                {
                    title: 'Automated Reporting Pipeline',
                    description: 'Python-based ETL pipeline that extracts data from warehouse, performs calculations, generates charts, and exports formatted Excel reports on schedule.',
                    technologies: ['Python', 'pandas', 'SQL', 'matplotlib', 'Apache Airflow'],
                    url: 'https://github.com/username/reporting-automation',
                    imageUrl: null,
                    completedDate: '2023-08',
                    highlights: [
                        'Reduced manual reporting time from 20 hours to 30 minutes monthly',
                        'Eliminated ~95% of human errors',
                        'Automated 3 additional reports after initial success',
                        'Saved 230+ hours annually'
                    ],
                    isExample: true
                }
            ]
        };

        function loadUserPortfolioProjects() {
            const stored = localStorage.getItem(`portfolioProjects_${currentPersona}`);
            userPortfolioProjects = stored ? JSON.parse(stored) : [];
        }

        function saveUserPortfolioProjects() {
            localStorage.setItem(`portfolioProjects_${currentPersona}`, JSON.stringify(userPortfolioProjects));
        }

        function openPortfolioSlideout() {
            loadUserPortfolioProjects();
            const slideout = document.getElementById('interviewSlideout');
            const titleEl = document.getElementById('slideoutTitle');
            const behavioralContent = document.getElementById('behavioralContent');
            const technicalContent = document.getElementById('technicalContent');
            const jobOpportunitiesContent = document.getElementById('jobOpportunitiesContent');
            const careerExperienceContent = document.getElementById('careerExperienceContent');
            const applicationMaterialsContent = document.getElementById('applicationMaterialsContent');
            const portfolioContent = document.getElementById('portfolioContent');

            titleEl.textContent = 'Portfolio Projects';

            // Hide all other content sections
            behavioralContent.style.display = 'none';
            technicalContent.style.display = 'none';
            jobOpportunitiesContent.style.display = 'none';
            careerExperienceContent.style.display = 'none';
            applicationMaterialsContent.style.display = 'none';

            // Show portfolio content
            portfolioContent.style.display = 'flex';
            loadPortfolioProjects();

            slideout.classList.add('active');
        }

        function loadPortfolioProjects() {
            const container = document.getElementById('portfolioContainer');
            const exampleProjects = examplePortfolioProjects[currentPersona] || [];
            const allProjects = [...userPortfolioProjects, ...exampleProjects];

            if (allProjects.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 40px 20px;">No portfolio projects yet. Click Add Project or Import from GitHub to showcase your work.</p>';
                return;
            }

            container.innerHTML = allProjects.map((project, index) => {
                const isUserProject = index < userPortfolioProjects.length;

                return `
                    <div class="story-card" style="opacity: ${project.isExample ? '0.7' : '1'};">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                            <div style="flex: 1;">
                                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; flex-wrap: wrap;">
                                    ${project.isExample ? '<span style="background: #fff3cd; color: #856404; padding: 4px 10px; border-radius: 4px; font-size: 11px; white-space: nowrap;">Example</span>' : ''}
                                    <span style="background: #f5f5f7; color: #666; padding: 4px 10px; border-radius: 4px; font-size: 11px;">
                                        ${project.completedDate}
                                    </span>
                                </div>
                                <h4 style="margin: 0 0 8px 0; color: #1a1a1a; font-size: 16px; font-weight: 600;">${project.title}</h4>
                                <p style="margin: 0 0 12px 0; color: #666; font-size: 13px; line-height: 1.5;">
                                    ${project.description}
                                </p>
                                <div style="display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px;">
                                    ${project.technologies.map(tech => `
                                        <span style="background: #e3f2fd; color: #0066CC; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600;">
                                            ${tech}
                                        </span>
                                    `).join('')}
                                </div>
                                ${project.highlights && project.highlights.length > 0 ? `
                                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e5e7;">
                                        <strong style="font-size: 12px; color: #333; display: block; margin-bottom: 6px;">Key Achievements:</strong>
                                        <ul style="margin: 0; padding-left: 20px; font-size: 12px; color: #666; line-height: 1.6;">
                                            ${project.highlights.map(highlight => `<li>${highlight}</li>`).join('')}
                                        </ul>
                                    </div>
                                ` : ''}
                            </div>
                            ${isUserProject ? `
                                <div style="display: flex; gap: 8px; margin-left: 12px;">
                                    ${project.url ? `
                                        <a href="${project.url}" target="_blank" rel="noopener noreferrer" style="padding: 6px 10px; background: #f5f5f7; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; color: #666; font-weight: 600; text-decoration: none;">
                                            <i class="ph ph-link"></i> View
                                        </a>
                                    ` : ''}
                                    <button onclick="deletePortfolioProject(${index})" style="padding: 6px 10px; background: #fee; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; color: #c33; font-weight: 600;">
                                        <i class="ph ph-trash"></i>
                                    </button>
                                </div>
                            ` : project.url ? `
                                <a href="${project.url}" target="_blank" rel="noopener noreferrer" style="padding: 6px 10px; background: #f5f5f7; border: none; border-radius: 4px; cursor: pointer; font-size: 11px; color: #666; font-weight: 600; text-decoration: none; margin-left: 12px;">
                                    <i class="ph ph-link"></i> View
                                </a>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function addPortfolioProject() {
            alert('Add Portfolio Project functionality coming soon! This will allow you to manually add projects with title, description, technologies, URL, and achievements.');
        }

        function importFromGitHub() {
            alert('GitHub import coming soon! This will allow you to automatically import projects from your GitHub profile including README content, technologies used, and statistics.');
        }

        function deletePortfolioProject(index) {
            if (confirm('Are you sure you want to delete this portfolio project?')) {
                userPortfolioProjects.splice(index, 1);
                saveUserPortfolioProjects();
                loadPortfolioProjects();
                updateNodeCounts();
            }
        }
    </script>
</body>
</html>

