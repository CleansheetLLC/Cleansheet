<!DOCTYPE html>
<html lang="en">
<head>
<!-- Azure Application Insights -->
<script type="text/javascript">
!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\./g,"-"),hasFullStack:!1,stack:n+"\nSnippet failed to load ["+a+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(S&&S.pathname||"_unknown_")+"\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js",
crossOrigin: "anonymous",
cfg: {
connectionString: "InstrumentationKey=104926d6-679a-4baa-919e-665bea6facac;IngestionEndpoint=https://eastus-8.in.applicationinsights.azure.com/;LiveEndpoint=https://eastus.livediagnostics.monitor.azure.com/;ApplicationId=2e7de093-fa39-4859-a48b-515db3520828"
}
});
</script>
<!-- End Application Insights -->

<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experience Tagger - Cleansheet Platform</title>
    <link rel="icon" type="image/png" href="assets/high-resolution-logo-files/white-on-transparent.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@300;400;600&family=Questrial&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Cleansheet Design System - Corporate Professional */
        :root {
            /* Brand Colors */
            --color-primary-blue: #0066CC;
            --color-accent-blue: #004C99;
            --color-dark: #1a1a1a;

            /* Neutral Colors */
            --color-neutral-text: #333333;
            --color-neutral-text-light: #666666;
            --color-neutral-text-muted: #999999;
            --color-neutral-background: #f5f5f7;
            --color-neutral-background-secondary: #f8f8f8;
            --color-neutral-border: #e5e5e7;
            --color-neutral-white: #ffffff;

            /* Typography */
            --font-family-ui: 'Questrial', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-family-body: 'Barlow', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-size-h1: clamp(28px, 4vw, 32px);
            --font-size-h2: clamp(24px, 3.5vw, 28px);
            --font-size-h3: clamp(18px, 3vw, 20px);
            --font-size-body: clamp(14px, 2.5vw, 16px);
            --font-size-small: clamp(12px, 2.2vw, 14px);

            /* Spacing */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 20px;
            --spacing-xxl: 24px;
            --spacing-xxxl: 32px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-body);
            font-weight: 300;
            background: var(--color-neutral-background);
            color: var(--color-neutral-text);
            line-height: 1.6;
            padding-top: 70px;
        }

        /* Header */
        header {
            background: var(--color-dark);
            color: var(--color-neutral-white);
            padding: var(--spacing-xl) var(--spacing-xxl);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--spacing-xl);
        }

        .header-text h1 {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-h1);
            color: #e0e0e0;
        }

        .header-logo {
            height: 60px;
            width: auto;
        }

        .home-button {
            position: fixed;
            top: 16px;
            left: 16px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-family: var(--font-family-ui);
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.3);
            z-index: 1001;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            background-color: rgba(26, 26, 26, 0.95);
        }

        .home-button:hover {
            background: rgba(255, 255, 255, 0.25);
            background-color: rgba(26, 26, 26, 0.98);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-xxl);
        }

        .full-width-section {
            margin-bottom: var(--spacing-xxl);
        }

        .two-column-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: var(--spacing-xxl);
        }

        .main-content {
            min-width: 0;
        }

        /* Top Actions Bar */
        /* Explainer Banner */
        .explainer-banner {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: var(--spacing-lg);
            border-radius: 8px;
            border-left: 4px solid var(--color-primary-blue);
        }

        .explainer-title {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-body);
            font-weight: 600;
            color: var(--color-dark);
            margin-bottom: var(--spacing-xs);
        }

        .explainer-text {
            font-size: var(--font-size-small);
            color: var(--color-neutral-text);
            line-height: 1.6;
        }

        .actions-bar {
            background: var(--color-neutral-white);
            padding: var(--spacing-xl);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            gap: var(--spacing-lg);
            flex-wrap: wrap;
            align-items: center;
        }

        .example-profiles {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            align-items: center;
        }

        .example-label {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-small);
            color: var(--color-neutral-text);
            font-weight: 600;
        }

        .btn-example {
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-neutral-background);
            color: var(--color-neutral-text);
            border: 1px solid var(--color-neutral-border);
            border-radius: 6px;
            font-family: var(--font-family-body);
            font-size: var(--font-size-small);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-example:hover {
            background: var(--color-primary-blue);
            color: white;
            border-color: var(--color-primary-blue);
        }

        .actions-bar input[type="text"] {
            flex: 1;
            min-width: 250px;
            padding: var(--spacing-md) var(--spacing-lg);
            border: 2px solid var(--color-neutral-border);
            border-radius: 8px;
            font-family: var(--font-family-body);
            font-size: var(--font-size-body);
        }

        .actions-bar input[type="text"]:focus {
            outline: none;
            border-color: var(--color-primary-blue);
        }

        .btn {
            padding: var(--spacing-md) var(--spacing-xl);
            border: none;
            border-radius: 8px;
            font-family: var(--font-family-ui);
            font-size: var(--font-size-body);
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .btn-primary {
            background: var(--color-primary-blue);
            color: var(--color-neutral-white);
        }

        .btn-primary:hover {
            background: var(--color-accent-blue);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--color-neutral-white);
            color: var(--color-primary-blue);
            border: 2px solid var(--color-primary-blue);
        }

        .btn-secondary:hover {
            background: var(--color-primary-blue);
            color: var(--color-neutral-white);
        }

        .btn-success {
            background: #28a745;
            color: var(--color-neutral-white);
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
            color: var(--color-neutral-white);
        }

        .btn-danger:hover {
            background: #c82333;
        }

        /* Experience List */
        .experience-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-xxl);
        }

        .experience-card {
            background: var(--color-neutral-white);
            padding: var(--spacing-xl);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .experience-card:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            transform: translateY(-4px);
        }

        .experience-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-lg);
            gap: var(--spacing-lg);
        }

        .experience-title {
            flex: 1;
            min-width: 0;
        }

        .experience-title h3 {
            font-family: var(--font-family-ui);
            font-size: clamp(16px, 2.5vw, 20px);
            color: var(--color-primary-blue);
            margin-bottom: var(--spacing-xs);
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .experience-subtitle {
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-light);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .experience-actions {
            display: flex;
            gap: var(--spacing-sm);
            flex-shrink: 0;
        }

        .btn-icon {
            background: none;
            border: none;
            color: var(--color-neutral-text-light);
            cursor: pointer;
            padding: var(--spacing-sm);
            font-size: 16px;
            transition: color 0.3s ease;
        }

        .btn-icon:hover {
            color: var(--color-primary-blue);
        }

        .experience-dates {
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-muted);
            margin-bottom: var(--spacing-md);
            font-weight: 600;
        }

        .experience-description {
            margin-bottom: var(--spacing-md);
            line-height: 1.6;
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-light);
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }

        .experience-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .experience-card.expanded .experience-details {
            max-height: 5000px;
        }

        .btn-toggle {
            background: none;
            border: none;
            color: var(--color-primary-blue);
            cursor: pointer;
            padding: var(--spacing-sm) 0;
            font-family: var(--font-family-ui);
            font-size: var(--font-size-small);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            transition: color 0.3s ease;
        }

        .btn-toggle:hover {
            color: var(--color-accent-blue);
        }

        .btn-toggle i {
            transition: transform 0.3s ease;
        }

        .experience-card.expanded .btn-toggle i {
            transform: rotate(180deg);
        }

        /* Tags and Pills */
        .tag-section {
            margin-bottom: var(--spacing-lg);
        }

        .tag-section-title {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-small);
            font-weight: 600;
            color: var(--color-neutral-text);
            margin-bottom: var(--spacing-sm);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }

        .tag {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-md);
            background: var(--color-neutral-background);
            border: 1px solid var(--color-neutral-border);
            border-radius: 20px;
            font-size: var(--font-size-small);
            color: var(--color-neutral-text);
        }

        .tag.core {
            background: #e6f2ff;
            border-color: var(--color-primary-blue);
            color: var(--color-accent-blue);
        }

        .tag.peripheral {
            background: var(--color-neutral-background);
            border-color: var(--color-neutral-border);
            color: var(--color-neutral-text-light);
        }

        .tag-badge {
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 8px;
            background: var(--color-primary-blue);
            color: white;
            text-transform: uppercase;
        }

        .tag.peripheral .tag-badge {
            background: var(--color-neutral-text-muted);
        }

        /* Form Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            overflow-y: auto;
            padding: var(--spacing-xxl);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--color-neutral-white);
            border-radius: 12px;
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }

        .modal-header {
            padding: var(--spacing-xl) var(--spacing-xxl);
            border-bottom: 2px solid var(--color-neutral-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: var(--color-neutral-white);
            z-index: 10;
        }

        .modal-header h2 {
            font-family: var(--font-family-ui);
            color: var(--color-primary-blue);
        }

        .modal-body {
            padding: var(--spacing-xxl);
        }

        .form-group {
            margin-bottom: var(--spacing-xl);
        }

        .form-group label {
            display: block;
            font-family: var(--font-family-ui);
            font-size: var(--font-size-body);
            font-weight: 600;
            color: var(--color-neutral-text);
            margin-bottom: var(--spacing-sm);
        }

        .form-group input[type="text"],
        .form-group input[type="date"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-lg);
            border: 2px solid var(--color-neutral-border);
            border-radius: 8px;
            font-family: var(--font-family-body);
            font-size: var(--font-size-body);
            transition: border-color 0.3s ease;
        }

        .form-group select {
            margin-top: var(--spacing-xs);
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-light);
            font-style: italic;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--color-primary-blue);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-lg);
        }

        /* Compact Inline Tag Input */
        .inline-tag-group {
            margin-bottom: var(--spacing-lg);
        }

        .inline-tag-section {
            margin-bottom: var(--spacing-md);
        }

        .inline-tag-label {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-small);
            font-weight: 600;
            color: var(--color-neutral-text);
            margin-bottom: var(--spacing-xs);
            display: block;
        }

        .inline-tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            align-items: center;
        }

        .inline-tag {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-md);
            background: var(--color-neutral-background);
            border: 1px solid var(--color-neutral-border);
            border-radius: 16px;
            font-size: var(--font-size-small);
            color: var(--color-neutral-text);
        }

        .inline-tag.core {
            background: #e6f7e6;
            border-color: #4caf50;
            color: #2e7d32;
        }

        .inline-tag.peripheral {
            background: #e3f2fd;
            border-color: #2196f3;
            color: #1565c0;
        }

        .inline-tag.skill {
            background: #f3e5f5;
            border-color: #9c27b0;
            color: #6a1b9a;
        }

        .inline-tag.competency {
            background: #fff3e0;
            border-color: #ff9800;
            color: #e65100;
        }

        .inline-tag.project {
            background: #fce4ec;
            border-color: #e91e63;
            color: #ad1457;
        }

        .inline-tag.achievement {
            background: #e8f5e9;
            border-color: #66bb6a;
            color: #2e7d32;
        }

        .inline-tag .remove-tag {
            cursor: pointer;
            color: currentColor;
            opacity: 0.6;
            font-size: 16px;
            line-height: 1;
            margin-left: var(--spacing-xs);
        }

        .inline-tag .remove-tag:hover {
            opacity: 1;
        }

        .add-tag-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-xs) var(--spacing-md);
            background: transparent;
            border: 2px dashed var(--color-neutral-border);
            border-radius: 16px;
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-light);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: var(--font-family-body);
        }

        .add-tag-btn:hover {
            border-color: var(--color-primary-blue);
            color: var(--color-primary-blue);
            background: rgba(0, 102, 204, 0.05);
        }

        .inline-input {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .inline-input input {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 2px solid var(--color-primary-blue);
            border-radius: 16px;
            font-size: var(--font-size-small);
            font-family: var(--font-family-body);
            min-width: 150px;
        }

        .inline-input input:focus {
            outline: none;
            border-color: var(--color-accent-blue);
        }

        .inline-input select {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 2px solid var(--color-primary-blue);
            border-radius: 16px;
            font-size: var(--font-size-small);
            font-family: var(--font-family-body);
        }

        .inline-input button {
            padding: var(--spacing-xs) var(--spacing-sm);
            background: var(--color-primary-blue);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: var(--font-size-small);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .inline-input button:hover {
            background: var(--color-accent-blue);
        }

        .inline-input .cancel-btn {
            background: transparent;
            color: var(--color-neutral-text-muted);
            padding: var(--spacing-xs);
        }

        .inline-input .cancel-btn:hover {
            background: transparent;
            color: var(--color-neutral-text);
        }

        /* List Input Builder */
        .list-input-container {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        .list-preview {
            list-style: none;
            padding: var(--spacing-md);
            background: var(--color-neutral-background);
            border-radius: 8px;
            min-height: 50px;
        }

        .list-preview li {
            padding: var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
            background: var(--color-neutral-white);
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-preview .remove-item {
            cursor: pointer;
            color: var(--color-neutral-text-muted);
            font-size: 14px;
        }

        .list-preview .remove-item:hover {
            color: #dc3545;
        }

        /* Suggestions */
        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-xs);
            margin-top: var(--spacing-xs);
        }

        .suggestion-chip {
            padding: var(--spacing-xs) var(--spacing-md);
            background: var(--color-neutral-background);
            border: 1px solid var(--color-neutral-border);
            border-radius: 16px;
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-light);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .suggestion-chip:hover {
            background: var(--color-primary-blue);
            color: var(--color-neutral-white);
            border-color: var(--color-primary-blue);
        }

        .suggestion-label {
            font-size: 11px;
            color: var(--color-neutral-text-muted);
            margin-top: var(--spacing-xs);
            font-style: italic;
        }

        .modal-footer {
            padding: var(--spacing-xl) var(--spacing-xxl);
            border-top: 2px solid var(--color-neutral-border);
            display: flex;
            gap: var(--spacing-lg);
            justify-content: flex-end;
            position: sticky;
            bottom: 0;
            background: var(--color-neutral-white);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--spacing-xxxl);
            background: var(--color-neutral-white);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .empty-state i {
            font-size: 64px;
            color: var(--color-neutral-border);
            margin-bottom: var(--spacing-xl);
        }

        .empty-state h3 {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-h2);
            color: var(--color-neutral-text-light);
            margin-bottom: var(--spacing-lg);
        }

        /* Right Reporting Panel */
        .reporting-panel {
            background: var(--color-neutral-white);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            position: sticky;
            top: 90px;
            max-height: calc(100vh - 110px);
            overflow-y: auto;
        }

        .panel-header {
            padding: var(--spacing-xl);
            border-bottom: 2px solid var(--color-neutral-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .panel-header:hover {
            background: var(--color-neutral-background-secondary);
        }

        .panel-header-text h2 {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-h3);
            color: var(--color-dark);
            margin-bottom: var(--spacing-xs);
        }

        .panel-subheader {
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-light);
        }

        .panel-toggle {
            color: var(--color-primary-blue);
            font-size: 20px;
            transition: transform 0.3s ease;
        }

        .reporting-panel.collapsed .panel-toggle {
            transform: rotate(-90deg);
        }

        .panel-content {
            padding: var(--spacing-xl);
            max-height: 2000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .reporting-panel.collapsed .panel-content {
            max-height: 0;
            padding: 0;
        }

        .stat-section {
            margin-bottom: var(--spacing-xl);
        }

        .stat-section-title {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-small);
            font-weight: 600;
            color: var(--color-neutral-text);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--color-neutral-border);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm) 0;
            font-size: var(--font-size-small);
        }

        .stat-label {
            color: var(--color-neutral-text-light);
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            padding-right: var(--spacing-sm);
        }

        .stat-value {
            font-family: var(--font-family-ui);
            font-weight: 600;
            color: var(--color-primary-blue);
            font-size: var(--font-size-body);
            flex-shrink: 0;
        }

        .stat-years {
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-muted);
            margin-left: var(--spacing-xs);
        }

        .total-experience {
            background: linear-gradient(135deg, var(--color-primary-blue), var(--color-accent-blue));
            color: white;
            padding: var(--spacing-lg);
            border-radius: 8px;
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }

        .total-experience-label {
            font-size: var(--font-size-small);
            opacity: 0.9;
            margin-bottom: var(--spacing-xs);
        }

        .total-experience-value {
            font-family: var(--font-family-ui);
            font-size: 48px;
            font-weight: 700;
            line-height: 1;
        }

        .total-experience-unit {
            font-size: var(--font-size-body);
            opacity: 0.9;
            margin-top: var(--spacing-xs);
        }

        /* Heatmap */
        .heatmap-container {
            overflow-x: auto;
        }

        .heatmap {
            display: flex;
            flex-direction: column;
            gap: 2px;
            min-width: 600px;
        }

        .heatmap-row {
            display: flex;
            gap: 2px;
            align-items: center;
        }

        .heatmap-label {
            width: 150px;
            font-size: var(--font-size-small);
            color: var(--color-neutral-text);
            padding-right: var(--spacing-md);
            text-align: right;
            flex-shrink: 0;
        }

        .heatmap-cells {
            display: flex;
            gap: 2px;
            flex: 1;
        }

        .heatmap-cell {
            flex: 1;
            min-width: 60px;
            height: 32px;
            background: var(--color-neutral-background);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: white;
            font-weight: 600;
            transition: transform 0.2s ease;
        }

        .heatmap-cell:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .heatmap-cell[data-value="1"] { background: #e3f2fd; color: #333; }
        .heatmap-cell[data-value="2"] { background: #90caf9; color: #333; }
        .heatmap-cell[data-value="3"] { background: #42a5f5; color: white; }
        .heatmap-cell[data-value="4"] { background: #1e88e5; color: white; }
        .heatmap-cell[data-value="5"] { background: #1565c0; color: white; }

        .heatmap-years {
            display: flex;
            gap: 2px;
            margin-bottom: var(--spacing-sm);
            margin-left: 150px;
        }

        .heatmap-year {
            flex: 1;
            min-width: 60px;
            text-align: center;
            font-size: var(--font-size-small);
            font-weight: 600;
            color: var(--color-neutral-text);
        }

        /* Career Map */
        .career-map {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 8px;
            overflow: hidden;
        }

        .map-container {
            position: relative;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(circle at 20% 30%, rgba(0, 102, 204, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 76, 153, 0.05) 0%, transparent 50%);
        }

        .location-marker {
            position: absolute;
            width: 40px;
            height: 40px;
            background: var(--color-primary-blue);
            border: 4px solid white;
            border-radius: 50%;
            cursor: pointer;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            z-index: 10;
        }

        .location-marker:hover {
            transform: translate(-50%, -50%) scale(1.2);
            box-shadow: 0 6px 20px rgba(0, 102, 204, 0.5);
            z-index: 100;
        }

        .location-marker.multiple {
            width: 50px;
            height: 50px;
            background: var(--color-accent-blue);
            font-size: 16px;
        }

        .location-tooltip {
            position: absolute;
            background: white;
            padding: var(--spacing-md);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            min-width: 250px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            border-left: 4px solid var(--color-primary-blue);
        }

        .location-tooltip.active {
            opacity: 1;
            pointer-events: auto;
        }

        .tooltip-header {
            font-family: var(--font-family-ui);
            font-size: var(--font-size-body);
            font-weight: 600;
            color: var(--color-primary-blue);
            margin-bottom: var(--spacing-sm);
        }

        .tooltip-item {
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--color-neutral-border);
        }

        .tooltip-item:last-child {
            border-bottom: none;
        }

        .tooltip-role {
            font-size: var(--font-size-small);
            color: var(--color-neutral-text);
            font-weight: 600;
        }

        .tooltip-org {
            font-size: var(--font-size-small);
            color: var(--color-neutral-text-light);
        }

        .tooltip-dates {
            font-size: 11px;
            color: var(--color-neutral-text-muted);
            margin-top: 2px;
        }

        .map-legend {
            position: absolute;
            bottom: var(--spacing-lg);
            left: var(--spacing-lg);
            background: rgba(255, 255, 255, 0.95);
            padding: var(--spacing-md);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            font-size: var(--font-size-small);
        }

        .legend-title {
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
            color: var(--color-neutral-text);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-xs);
            color: var(--color-neutral-text-light);
        }

        .legend-marker {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .legend-marker.single {
            background: var(--color-primary-blue);
        }

        .legend-marker.multiple {
            background: var(--color-accent-blue);
        }

        /* Skills Network */
        .skills-network {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            justify-content: center;
        }

        .skill-bubble {
            padding: var(--spacing-sm) var(--spacing-lg);
            background: var(--color-neutral-background);
            border-radius: 20px;
            font-size: var(--font-size-small);
            color: var(--color-neutral-text);
            border: 2px solid var(--color-neutral-border);
            transition: all 0.3s ease;
            cursor: default;
        }

        .skill-bubble:hover {
            background: var(--color-primary-blue);
            color: white;
            border-color: var(--color-primary-blue);
            transform: scale(1.1);
        }

        .skill-bubble[data-frequency="high"] {
            font-size: var(--font-size-h3);
            padding: var(--spacing-md) var(--spacing-xl);
        }

        .skill-bubble[data-frequency="medium"] {
            font-size: var(--font-size-body);
            padding: var(--spacing-sm) var(--spacing-lg);
        }

        .skill-bubble[data-frequency="low"] {
            font-size: var(--font-size-small);
            padding: var(--spacing-xs) var(--spacing-md);
        }

        /* File Upload */
        input[type="file"] {
            display: none;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .experience-list {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .header-logo {
                height: 40px;
            }

            .home-button {
                top: 12px;
                left: 12px;
                padding: 6px 10px;
                font-size: 11px;
            }

            header {
                padding-left: 80px;
            }

            .header-content {
                justify-content: flex-end;
            }

            .container {
                padding: var(--spacing-lg);
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .actions-bar {
                flex-direction: column;
                align-items: stretch;
            }

            .actions-bar input[type="text"] {
                width: 100%;
            }

            .modal-content {
                max-height: 95vh;
            }

            .experience-header {
                flex-direction: column;
            }

            .experience-list {
                grid-template-columns: 1fr;
            }

            .experience-title h3 {
                font-size: 18px;
            }

            .container {
                padding: var(--spacing-lg);
            }

            .two-column-layout {
                grid-template-columns: 1fr;
            }

            .reporting-panel {
                position: static;
                max-height: none;
                margin-bottom: var(--spacing-xl);
            }

            .reporting-panel:not(.collapsed) {
                max-height: none;
            }

            .main-content {
                order: 2;
            }

            .reporting-panel {
                order: 1;
            }

            /* Default collapsed on mobile */
            @supports (-webkit-touch-callout: none) {
                .reporting-panel {
                    /* Will be set via JS for mobile */
                }
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="home-button">← Home</a>

    <header>
        <div class="header-content">
            <div class="header-text">
                <h1>Experience Tagger</h1>
            </div>
            <img src="assets/high-resolution-logo-files/white-on-transparent.png" alt="Cleansheet Logo" class="header-logo">
        </div>
    </header>

    <div class="container">
        <!-- Full Width Sections -->
        <div class="full-width-section">
            <div class="explainer-banner">
                <div class="explainer-title">How to Use Experience Tagger</div>
                <p class="explainer-text">
                    Document your career journey by adding each role you've held. For each experience, tag the technologies you used (Core vs Peripheral),
                    key skills developed, competencies gained, project types delivered, stakeholders engaged, and major achievements.
                    The reporting panel automatically calculates total years of experience for each category. Import/export JSON to save your data.
                </p>
            </div>
        </div>

        <div class="full-width-section">
            <div class="actions-bar">
                <input type="text" id="userName" placeholder="Your Name">
                <input type="text" id="userGoals" placeholder="Career Goals">
                <button class="btn btn-primary" onclick="addExperience()">
                    <i class="fas fa-plus"></i> Add Experience
                </button>
                <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">
                    <i class="fas fa-upload"></i> Import JSON
                </button>
                <button class="btn btn-success" onclick="exportJSON()">
                    <i class="fas fa-download"></i> Export JSON
                </button>
                <button class="btn btn-danger" onclick="clearAll()">
                    <i class="fas fa-trash"></i> Clear All
                </button>
                <input type="file" id="fileInput" accept=".json" onchange="importJSON(event)">

                <div class="example-profiles" style="width: 100%; border-top: 1px solid var(--color-neutral-border); padding-top: var(--spacing-lg); margin-top: var(--spacing-sm);">
                    <span class="example-label">Example Profiles:</span>
                    <button class="btn-example" onclick="loadExampleProfile('retail-manager')">Retail Manager</button>
                    <button class="btn-example" onclick="loadExampleProfile('chemist')">Chemist</button>
                    <button class="btn-example" onclick="loadExampleProfile('new-graduate')">New Graduate</button>
                    <button class="btn-example" onclick="loadExampleProfile('data-analyst')">Data Analyst</button>
                </div>
            </div>
        </div>

        <!-- Two Column Layout -->
        <div class="two-column-layout">
            <div class="main-content">
                <div id="experienceList" class="experience-list">
                    <!-- Experiences will be rendered here -->
                </div>

                <div id="emptyState" class="empty-state">
                    <i class="fas fa-briefcase"></i>
                    <h3>No experiences yet</h3>
                    <p>Add your first experience or import from JSON</p>
                </div>
            </div>

            <!-- Right Reporting Panel -->
            <div class="reporting-panel" id="reportingPanel" style="display: none;">
                <div class="panel-header" onclick="toggleReportingPanel()">
                    <div class="panel-header-text">
                        <h2>Career Summary</h2>
                        <p class="panel-subheader">Experience breakdown by category</p>
                    </div>
                    <i class="fas fa-chevron-down panel-toggle"></i>
                </div>

                <div class="panel-content">
                    <div class="total-experience">
                        <div class="total-experience-label">Total Experience</div>
                        <div class="total-experience-value" id="totalYears">0</div>
                        <div class="total-experience-unit">years</div>
                    </div>

                    <div class="stat-section">
                        <div class="stat-section-title">Technologies</div>
                        <div id="techStats"></div>
                    </div>

                    <div class="stat-section">
                        <div class="stat-section-title">Key Skills</div>
                        <div id="skillStats"></div>
                    </div>

                    <div class="stat-section">
                        <div class="stat-section-title">Competencies</div>
                        <div id="competencyStats"></div>
                    </div>

                    <div class="stat-section">
                        <div class="stat-section-title">Project Types</div>
                        <div id="projectTypeStats"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Experience Form Modal -->
    <div id="experienceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add Experience</h2>
                <button class="btn-icon" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="experienceForm" onsubmit="saveExperience(event)">
                    <input type="hidden" id="experienceIndex">

                    <div class="form-row">
                        <div class="form-group">
                            <label>Organization Name *</label>
                            <input type="text" id="organizationName" required>
                        </div>
                        <div class="form-group">
                            <label>Role *</label>
                            <input type="text" id="role" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="location">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Start Date *</label>
                            <input type="date" id="startDate" required>
                            <select id="startDateLink" onchange="linkStartDate()">
                                <option value="">Link to another experience...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>End Date (leave blank if current)</label>
                            <input type="date" id="endDate">
                            <select id="endDateLink" onchange="linkEndDate()">
                                <option value="">Link to another experience...</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="description"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Core Technologies</label>
                            <div class="inline-tags" id="coreTechList"></div>
                        </div>
                        <div class="form-group">
                            <label>Peripheral Technologies</label>
                            <div class="inline-tags" id="peripheralTechList"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Key Skills</label>
                            <div class="inline-tags" id="skillList"></div>
                        </div>
                        <div class="form-group">
                            <label>Competencies</label>
                            <div class="inline-tags" id="competencyList"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Project Types</label>
                            <div class="inline-tags" id="projectTypeList"></div>
                        </div>
                        <div class="form-group">
                            <label>Achievements</label>
                            <div class="inline-tags" id="achievementList"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Internal Stakeholders</label>
                            <div class="inline-tags" id="internalStakeholderList"></div>
                        </div>
                        <div class="form-group">
                            <label>External Stakeholders</label>
                            <div class="inline-tags" id="externalStakeholderList"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="document.getElementById('experienceForm').requestSubmit()">
                    <i class="fas fa-save"></i> Save Experience
                </button>
            </div>
        </div>
    </div>

    <script>
        let experiences = [];
        let currentExperience = {
            technologies: [],
            keySkills: [],
            competencies: [],
            projectTypes: [],
            internalStakeholders: [],
            externalStakeholders: [],
            achievements: []
        };

        // Suggestion Examples
        const suggestions = {
            technologies: ['Python', 'JavaScript', 'AWS', 'Azure', 'Docker', 'Kubernetes', 'React', 'SQL', 'Git', 'Linux'],
            skills: ['Project Management', 'Team Leadership', 'Data Analysis', 'Technical Writing', 'Agile Methodology', 'Problem Solving', 'Communication', 'Strategic Planning'],
            competencies: ['Technical Leadership', 'Product Strategy', 'Customer Experience Design', 'Infrastructure Architecture', 'Partner Management', 'Data Analytics'],
            projectTypes: ['Agile', 'Waterfall', 'Research', 'Implementation', 'Infrastructure Automation', 'Product Development', 'Customer Experience Enhancement'],
            internalStakeholders: ['Engineering Team', 'Product Team', 'Sales Organization', 'Marketing Team', 'Executive Leadership', 'Operations Team'],
            externalStakeholders: ['Enterprise Customers', 'Channel Partners', 'Vendors', 'Consulting Partners', 'End Users', 'Government Agencies'],
            achievements: ['Led team of 5+ engineers', 'Increased efficiency by 30%', 'Reduced costs by $100K annually', 'Delivered project 2 months ahead of schedule', 'Improved customer satisfaction score']
        };

        // Initialize
        function init() {
            loadFromLocalStorage();
            renderExperiences();

            // Default collapsed on mobile
            if (window.innerWidth <= 768) {
                const panel = document.getElementById('reportingPanel');
                if (panel) {
                    panel.classList.add('collapsed');
                }
            }
        }

        // Toggle Reporting Panel
        function toggleReportingPanel() {
            const panel = document.getElementById('reportingPanel');
            panel.classList.toggle('collapsed');
        }

        // Populate Date Link Dropdowns
        function populateDateLinks() {
            const currentIndex = document.getElementById('experienceIndex').value;
            const startDateLink = document.getElementById('startDateLink');
            const endDateLink = document.getElementById('endDateLink');

            // Clear existing options (keep first one)
            startDateLink.innerHTML = '<option value="">Link to another experience...</option>';
            endDateLink.innerHTML = '<option value="">Link to another experience...</option>';

            // Populate with other experiences
            experiences.forEach((exp, idx) => {
                if (currentIndex === '' || idx !== parseInt(currentIndex)) {
                    const label = `${exp.role} at ${exp.organizationName}`;

                    // Add options for start date linking
                    if (exp.endDate) {
                        startDateLink.innerHTML += `<option value="${idx}:end">After: ${label}</option>`;
                    }
                    if (exp.startDate) {
                        startDateLink.innerHTML += `<option value="${idx}:start">Same as start: ${label}</option>`;
                    }

                    // Add options for end date linking
                    if (exp.startDate) {
                        endDateLink.innerHTML += `<option value="${idx}:start">Before: ${label}</option>`;
                    }
                    if (exp.endDate) {
                        endDateLink.innerHTML += `<option value="${idx}:end">Same as end: ${label}</option>`;
                    }
                }
            });
        }

        // Link Start Date
        function linkStartDate() {
            const select = document.getElementById('startDateLink');
            const value = select.value;
            if (value) {
                const [expIndex, dateType] = value.split(':');
                const exp = experiences[parseInt(expIndex)];
                if (dateType === 'end' && exp.endDate) {
                    // Set to day after their end date
                    const endDate = new Date(exp.endDate);
                    endDate.setDate(endDate.getDate() + 1);
                    document.getElementById('startDate').value = endDate.toISOString().split('T')[0];
                } else if (dateType === 'start' && exp.startDate) {
                    // Set to same as their start date
                    document.getElementById('startDate').value = exp.startDate;
                }
                select.value = ''; // Reset dropdown
            }
        }

        // Link End Date
        function linkEndDate() {
            const select = document.getElementById('endDateLink');
            const value = select.value;
            if (value) {
                const [expIndex, dateType] = value.split(':');
                const exp = experiences[parseInt(expIndex)];
                if (dateType === 'start' && exp.startDate) {
                    // Set to day before their start date
                    const startDate = new Date(exp.startDate);
                    startDate.setDate(startDate.getDate() - 1);
                    document.getElementById('endDate').value = startDate.toISOString().split('T')[0];
                } else if (dateType === 'end' && exp.endDate) {
                    // Set to same as their end date
                    document.getElementById('endDate').value = exp.endDate;
                }
                select.value = ''; // Reset dropdown
            }
        }

        // Modal Management
        function addExperience() {
            document.getElementById('modalTitle').textContent = 'Add Experience';
            document.getElementById('experienceIndex').value = '';
            document.getElementById('experienceForm').reset();
            resetCurrentExperience();
            populateDateLinks();
            document.getElementById('experienceModal').classList.add('active');
        }

        function editExperience(index) {
            document.getElementById('modalTitle').textContent = 'Edit Experience';
            document.getElementById('experienceIndex').value = index;

            const exp = experiences[index];
            document.getElementById('organizationName').value = exp.organizationName || '';
            document.getElementById('role').value = exp.role || '';
            document.getElementById('location').value = exp.location || '';

            // Handle both YYYY-MM-DD and YYYY-MM date formats
            let startDate = exp.startDate || '';
            if (startDate && startDate.length === 7) {
                startDate = startDate + '-01'; // Convert YYYY-MM to YYYY-MM-01
            }
            document.getElementById('startDate').value = startDate;

            let endDate = exp.endDate || '';
            if (endDate && endDate.length === 7) {
                endDate = endDate + '-01'; // Convert YYYY-MM to YYYY-MM-01
            }
            document.getElementById('endDate').value = endDate;

            document.getElementById('description').value = exp.description || '';

            currentExperience = {
                technologies: exp.technologies || [],
                keySkills: exp.keySkills || [],
                competencies: exp.competencies || [],
                projectTypes: exp.projectTypes || [],
                internalStakeholders: exp.internalStakeholders || [],
                externalStakeholders: exp.externalStakeholders || [],
                achievements: exp.achievements || []
            };

            renderFormLists();
            populateDateLinks();
            document.getElementById('experienceModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('experienceModal').classList.remove('active');
        }

        function resetCurrentExperience() {
            currentExperience = {
                technologies: [],
                keySkills: [],
                competencies: [],
                projectTypes: [],
                internalStakeholders: [],
                externalStakeholders: [],
                achievements: []
            };
            renderFormLists();
        }

        // Inline Pill Management
        function createInlinePill(text, cssClass, removeCallback) {
            return `
                <span class="inline-tag ${cssClass}">
                    ${text}
                    <span class="remove-tag" onclick="${removeCallback}">×</span>
                </span>
            `;
        }

        function createEmptyPill(containerId, type) {
            return `
                <span class="inline-tag" style="border-style: dashed; cursor: text;"
                      onclick="activatePill(this, '${containerId}', '${type}')">
                    + Add
                </span>
            `;
        }

        function activatePill(element, containerId, type) {
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'inline-pill-input';
            input.style.cssText = 'padding: 4px 8px; border: 2px solid #0066CC; border-radius: 16px; font-size: 12px; min-width: 100px; font-family: inherit;';

            input.onkeydown = function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const value = input.value.trim();
                    if (value) {
                        addItemToList(type, value);
                    }
                    renderFormLists();
                } else if (e.key === 'Escape') {
                    renderFormLists();
                }
            };

            input.onblur = function() {
                const value = input.value.trim();
                if (value) {
                    addItemToList(type, value);
                }
                renderFormLists();
            };

            element.replaceWith(input);
            input.focus();
        }

        function addItemToList(type, value) {
            switch(type) {
                case 'coreTech':
                    currentExperience.technologies.push({ name: value, type: 'Core' });
                    break;
                case 'peripheralTech':
                    currentExperience.technologies.push({ name: value, type: 'Peripheral' });
                    break;
                case 'skill':
                    currentExperience.keySkills.push(value);
                    break;
                case 'competency':
                    currentExperience.competencies.push(value);
                    break;
                case 'projectType':
                    currentExperience.projectTypes.push(value);
                    break;
                case 'achievement':
                    currentExperience.achievements.push(value);
                    break;
                case 'internalStakeholder':
                    currentExperience.internalStakeholders.push(value);
                    break;
                case 'externalStakeholder':
                    currentExperience.externalStakeholders.push(value);
                    break;
            }
        }

        function removeFromList(type, index) {
            switch(type) {
                case 'coreTech':
                case 'peripheralTech':
                    currentExperience.technologies.splice(index, 1);
                    break;
                case 'skill':
                    currentExperience.keySkills.splice(index, 1);
                    break;
                case 'competency':
                    currentExperience.competencies.splice(index, 1);
                    break;
                case 'projectType':
                    currentExperience.projectTypes.splice(index, 1);
                    break;
                case 'achievement':
                    currentExperience.achievements.splice(index, 1);
                    break;
                case 'internalStakeholder':
                    currentExperience.internalStakeholders.splice(index, 1);
                    break;
                case 'externalStakeholder':
                    currentExperience.externalStakeholders.splice(index, 1);
                    break;
            }
            renderFormLists();
        }

        function removeInternalStakeholder(index) {
            currentExperience.internalStakeholders.splice(index, 1);
            renderFormLists();
        }

        function addExternalStakeholder() {
            const input = document.getElementById('externalStakeholderInput');
            if (input.value.trim()) {
                currentExperience.externalStakeholders.push(input.value.trim());
                input.value = '';
                renderFormLists();
            }
        }

        function removeExternalStakeholder(index) {
            currentExperience.externalStakeholders.splice(index, 1);
            renderFormLists();
        }

        function addAchievement() {
            const input = document.getElementById('achievementInput');
            if (input.value.trim()) {
                currentExperience.achievements.push(input.value.trim());
                input.value = '';
                renderFormLists();
            }
        }

        function removeAchievement(index) {
            currentExperience.achievements.splice(index, 1);
            renderFormLists();
        }

        function renderFormLists() {
            // Core Technologies
            let coreTechIndex = 0;
            const coreTechList = document.getElementById('coreTechList');
            let coreTechHTML = '';
            currentExperience.technologies.forEach((tech, i) => {
                if (tech.type === 'Core') {
                    coreTechHTML += createInlinePill(tech.name, 'core', `removeFromList('coreTech', ${i})`);
                    coreTechIndex = i;
                }
            });
            coreTechHTML += createEmptyPill('coreTechList', 'coreTech');
            coreTechList.innerHTML = coreTechHTML;

            // Peripheral Technologies
            const peripheralTechList = document.getElementById('peripheralTechList');
            let peripheralTechHTML = '';
            currentExperience.technologies.forEach((tech, i) => {
                if (tech.type === 'Peripheral') {
                    peripheralTechHTML += createInlinePill(tech.name, 'peripheral', `removeFromList('peripheralTech', ${i})`);
                }
            });
            peripheralTechHTML += createEmptyPill('peripheralTechList', 'peripheralTech');
            peripheralTechList.innerHTML = peripheralTechHTML;

            // Skills
            const skillList = document.getElementById('skillList');
            let skillHTML = currentExperience.keySkills.map((skill, i) =>
                createInlinePill(skill, 'skill', `removeFromList('skill', ${i})`)
            ).join('');
            skillHTML += createEmptyPill('skillList', 'skill');
            skillList.innerHTML = skillHTML;

            // Competencies
            const competencyList = document.getElementById('competencyList');
            let competencyHTML = currentExperience.competencies.map((comp, i) =>
                createInlinePill(comp, 'competency', `removeFromList('competency', ${i})`)
            ).join('');
            competencyHTML += createEmptyPill('competencyList', 'competency');
            competencyList.innerHTML = competencyHTML;

            // Project Types
            const projectTypeList = document.getElementById('projectTypeList');
            let projectHTML = currentExperience.projectTypes.map((type, i) =>
                createInlinePill(type, 'project', `removeFromList('projectType', ${i})`)
            ).join('');
            projectHTML += createEmptyPill('projectTypeList', 'projectType');
            projectTypeList.innerHTML = projectHTML;

            // Achievements
            const achievementList = document.getElementById('achievementList');
            let achievementHTML = currentExperience.achievements.map((ach, i) =>
                createInlinePill(ach, 'achievement', `removeFromList('achievement', ${i})`)
            ).join('');
            achievementHTML += createEmptyPill('achievementList', 'achievement');
            achievementList.innerHTML = achievementHTML;

            // Internal Stakeholders
            const internalList = document.getElementById('internalStakeholderList');
            let internalHTML = currentExperience.internalStakeholders.map((stake, i) =>
                createInlinePill(stake, '', `removeFromList('internalStakeholder', ${i})`)
            ).join('');
            internalHTML += createEmptyPill('internalStakeholderList', 'internalStakeholder');
            internalList.innerHTML = internalHTML;

            // External Stakeholders
            const externalList = document.getElementById('externalStakeholderList');
            let externalHTML = currentExperience.externalStakeholders.map((stake, i) =>
                createInlinePill(stake, '', `removeFromList('externalStakeholder', ${i})`)
            ).join('');
            externalHTML += createEmptyPill('externalStakeholderList', 'externalStakeholder');
            externalList.innerHTML = externalHTML;
        }

        // Save Experience
        function saveExperience(event) {
            event.preventDefault();

            const experience = {
                organizationName: document.getElementById('organizationName').value,
                role: document.getElementById('role').value,
                location: document.getElementById('location').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                description: document.getElementById('description').value,
                technologies: currentExperience.technologies,
                keySkills: currentExperience.keySkills,
                competencies: currentExperience.competencies,
                projectTypes: currentExperience.projectTypes,
                internalStakeholders: currentExperience.internalStakeholders,
                externalStakeholders: currentExperience.externalStakeholders,
                achievements: currentExperience.achievements
            };

            const index = document.getElementById('experienceIndex').value;
            if (index === '') {
                experiences.push(experience);
            } else {
                experiences[parseInt(index)] = experience;
            }

            saveToLocalStorage();
            renderExperiences();
            closeModal();
        }

        // Delete Experience
        function deleteExperience(index) {
            if (confirm('Are you sure you want to delete this experience?')) {
                experiences.splice(index, 1);
                saveToLocalStorage();
                renderExperiences();
            }
        }

        // Toggle Experience Details
        function toggleExperience(index) {
            const card = document.querySelector(`[data-exp-index="${index}"]`);
            if (card) {
                card.classList.toggle('expanded');
            }
        }

        // Render Experiences
        function renderExperiences() {
            const list = document.getElementById('experienceList');
            const emptyState = document.getElementById('emptyState');

            if (experiences.length === 0) {
                list.style.display = 'none';
                emptyState.style.display = 'block';
                updateSummaryPanel();
                return;
            }

            list.style.display = 'grid';
            emptyState.style.display = 'none';
            updateSummaryPanel();

            // Sort experiences by start date (most recent first)
            const sortedExperiences = [...experiences].sort((a, b) => {
                const dateA = a.startDate || '0000-00-00';
                const dateB = b.startDate || '0000-00-00';
                return dateB.localeCompare(dateA);
            });

            list.innerHTML = sortedExperiences.map((exp, displayIndex) => {
                // Find original index for edit/delete operations
                const originalIndex = experiences.indexOf(exp);
                const startDate = exp.startDate ? new Date(exp.startDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short' }) : '';
                const endDate = exp.endDate ? new Date(exp.endDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short' }) : 'Present';

                return `
                    <div class="experience-card" data-exp-index="${originalIndex}">
                        <div class="experience-header">
                            <div class="experience-title">
                                <h3>${exp.role}</h3>
                                <div class="experience-subtitle">${exp.organizationName}${exp.location ? ' • ' + exp.location : ''}</div>
                            </div>
                            <div class="experience-actions">
                                <button class="btn-icon" onclick="editExperience(${originalIndex})" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon" onclick="deleteExperience(${originalIndex})" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="experience-dates">${startDate} - ${endDate}</div>
                        ${exp.description ? `<div class="experience-description">${exp.description}</div>` : ''}

                        <button class="btn-toggle" onclick="toggleExperience(${originalIndex})">
                            <span>Show Details</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>

                        <div class="experience-details">

                        ${exp.technologies && exp.technologies.length > 0 ? `
                            <div class="tag-section">
                                <div class="tag-section-title">Technologies</div>
                                <div class="tags">
                                    ${exp.technologies.map(tech => `
                                        <span class="tag ${tech.type.toLowerCase()}">
                                            ${tech.name}
                                            <span class="tag-badge">${tech.type}</span>
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${exp.keySkills && exp.keySkills.length > 0 ? `
                            <div class="tag-section">
                                <div class="tag-section-title">Key Skills</div>
                                <div class="tags">
                                    ${exp.keySkills.map(skill => `<span class="tag">${skill}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${exp.competencies && exp.competencies.length > 0 ? `
                            <div class="tag-section">
                                <div class="tag-section-title">Competencies</div>
                                <div class="tags">
                                    ${exp.competencies.map(comp => `<span class="tag">${comp}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${exp.projectTypes && exp.projectTypes.length > 0 ? `
                            <div class="tag-section">
                                <div class="tag-section-title">Project Types</div>
                                <div class="tags">
                                    ${exp.projectTypes.map(type => `<span class="tag">${type}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${exp.internalStakeholders && exp.internalStakeholders.length > 0 ? `
                            <div class="tag-section">
                                <div class="tag-section-title">Internal Stakeholders</div>
                                <div class="tags">
                                    ${exp.internalStakeholders.map(stake => `<span class="tag">${stake}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${exp.externalStakeholders && exp.externalStakeholders.length > 0 ? `
                            <div class="tag-section">
                                <div class="tag-section-title">External Stakeholders</div>
                                <div class="tags">
                                    ${exp.externalStakeholders.map(stake => `<span class="tag">${stake}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}

                        ${exp.achievements && exp.achievements.length > 0 ? `
                            <div class="tag-section">
                                <div class="tag-section-title">Achievements</div>
                                <div class="tags">
                                    ${exp.achievements.map(ach => `<span class="tag">${ach}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}

                        </div>
                    </div>
                `;
            }).join('');
        }

        // Example Profiles Data (embedded to avoid CORS issues)
        const exampleProfiles = {
            'retail-manager': {"userName":"Marcus Thompson","userGoals":"Transition from retail management into business analytics or operations management roles in tech companies.","experiences":[{"organizationName":"Target Corporation","role":"Store Manager","location":"Minneapolis, MN","startDate":"2019-03-01","endDate":"","description":"Lead store operations for high-volume location with 85+ team members. Manage P&L, inventory, staffing, and customer experience initiatives. Increased sales by 18% and improved employee retention by 25%.","technologies":[{"name":"Excel","type":"Core"},{"name":"Power BI","type":"Peripheral"},{"name":"Workday","type":"Peripheral"},{"name":"Square POS","type":"Core"},{"name":"Kronos","type":"Peripheral"}],"keySkills":["P&L Management","Team Leadership","Inventory Management","Customer Service","Data-Driven Decision Making","Conflict Resolution","Performance Management"],"competencies":["Operations Management","Strategic Planning","Financial Analysis","Process Improvement","Change Management"],"projectTypes":["Operational Efficiency","Team Development","Sales Growth","Customer Experience Enhancement"],"internalStakeholders":["District Manager","HR Business Partner","Regional Operations Team","Loss Prevention"],"externalStakeholders":["Customers","Vendors","Local Community Organizations"],"achievements":["Increased store revenue by 18% year-over-year","Reduced employee turnover by 25%","Achieved top 10% ranking in district for customer satisfaction","Led successful holiday season with record-breaking sales"]},{"organizationName":"Target Corporation","role":"Assistant Store Manager","location":"St. Paul, MN","startDate":"2016-06-01","endDate":"2019-02-28","description":"Supported store manager in daily operations, focusing on merchandising, inventory control, and team development. Managed team of 30+ in-store fulfillment and sales associates.","technologies":[{"name":"Excel","type":"Core"},{"name":"Workday","type":"Peripheral"},{"name":"Square POS","type":"Core"}],"keySkills":["Team Leadership","Merchandising","Inventory Control","Training & Development","Problem Solving"],"competencies":["Operations Management","People Management","Process Optimization"],"projectTypes":["Operational Efficiency","Team Development","Inventory Management"],"internalStakeholders":["Store Manager","Department Supervisors","HR Team"],"externalStakeholders":["Customers","Delivery Partners"],"achievements":["Reduced inventory shrinkage by 15%","Implemented new onboarding program reducing training time by 20%","Promoted to Store Manager after 2.5 years"]},{"organizationName":"Best Buy","role":"Department Supervisor","location":"Bloomington, MN","startDate":"2014-01-15","endDate":"2016-05-31","description":"Supervised electronics department with team of 12 sales associates. Managed inventory, scheduling, and sales performance. Achieved top sales performance in region.","technologies":[{"name":"Excel","type":"Core"},{"name":"Retail Management Systems","type":"Core"}],"keySkills":["Sales Management","Team Leadership","Customer Service","Product Knowledge","Performance Coaching"],"competencies":["Team Leadership","Sales Strategy","Customer Experience Design"],"projectTypes":["Sales Growth","Team Development","Customer Experience Enhancement"],"internalStakeholders":["Assistant Store Manager","Other Department Supervisors","Sales Team"],"externalStakeholders":["Customers","Electronics Vendors"],"achievements":["Exceeded sales targets by average of 25% quarterly","Developed 3 team members who were promoted to leadership roles","Won 'Department of the Year' award 2015"]}]},
            'chemist': {"userName":"Dr. Sarah Chen","userGoals":"Leverage analytical chemistry expertise to transition into data science and computational chemistry roles in pharmaceutical or biotech industries.","experiences":[{"organizationName":"Moderna Therapeutics","role":"Senior Research Scientist","location":"Cambridge, MA","startDate":"2020-09-01","endDate":"","description":"Lead analytical chemistry research for mRNA vaccine development. Design and execute complex analytical methods for quality control and process optimization. Collaborate with cross-functional teams on formulation development.","technologies":[{"name":"HPLC","type":"Core"},{"name":"Mass Spectrometry","type":"Core"},{"name":"Python","type":"Peripheral"},{"name":"R","type":"Peripheral"},{"name":"ChemDraw","type":"Core"},{"name":"LabVIEW","type":"Peripheral"},{"name":"JMP Statistical Software","type":"Core"},{"name":"Electronic Lab Notebook","type":"Core"},{"name":"MATLAB","type":"Peripheral"}],"keySkills":["Analytical Method Development","Data Analysis","Technical Writing","Problem Solving","Cross-Functional Collaboration","Quality Control","Statistical Analysis"],"competencies":["Scientific Research","Data Analytics","Technical Leadership","Regulatory Compliance","Project Management"],"projectTypes":["Research & Development","Method Validation","Process Optimization","Regulatory Submission"],"internalStakeholders":["Process Development Team","Quality Assurance","Regulatory Affairs","Manufacturing Operations","R&D Leadership"],"externalStakeholders":["FDA Reviewers","Equipment Vendors","Contract Research Organizations","Academic Collaborators"],"achievements":["Developed novel analytical method reducing testing time by 40%","Authored 6 peer-reviewed publications","Led successful FDA submission with zero deficiencies","Mentored 4 junior scientists","Received Moderna Innovation Award 2022"]},{"organizationName":"Pfizer Inc.","role":"Research Scientist","location":"Groton, CT","startDate":"2017-07-01","endDate":"2020-08-31","description":"Conducted analytical chemistry research supporting small molecule drug discovery. Developed and validated analytical methods for compound characterization. Collaborated with medicinal chemistry and biology teams.","technologies":[{"name":"HPLC","type":"Core"},{"name":"Mass Spectrometry","type":"Core"},{"name":"NMR Spectroscopy","type":"Core"},{"name":"ChemDraw","type":"Core"},{"name":"JMP Statistical Software","type":"Peripheral"},{"name":"Electronic Lab Notebook","type":"Core"}],"keySkills":["Analytical Chemistry","Method Development","Data Interpretation","Technical Documentation","Collaboration","Spectroscopy"],"competencies":["Scientific Research","Analytical Problem Solving","Technical Communication","Quality Systems"],"projectTypes":["Research & Development","Method Development","Compound Characterization"],"internalStakeholders":["Medicinal Chemistry Team","Biology Team","DMPK Group","Quality Control"],"externalStakeholders":["CROs","Equipment Vendors","Academic Partners"],"achievements":["Developed 15+ analytical methods for drug discovery compounds","Co-authored 4 scientific publications","Trained 8 new team members on analytical instrumentation","Contributed to 2 IND submissions"]},{"organizationName":"University of Connecticut","role":"Postdoctoral Research Associate","location":"Storrs, CT","startDate":"2015-08-01","endDate":"2017-06-30","description":"Conducted independent research in analytical chemistry. Developed novel mass spectrometry methods for metabolomics research. Mentored graduate and undergraduate students.","technologies":[{"name":"Mass Spectrometry","type":"Core"},{"name":"HPLC","type":"Core"},{"name":"R","type":"Peripheral"},{"name":"Python","type":"Peripheral"},{"name":"Origin","type":"Core"},{"name":"ChemDraw","type":"Core"}],"keySkills":["Research Design","Data Analysis","Scientific Writing","Grant Writing","Mentoring","Instrumentation"],"competencies":["Scientific Research","Independent Research","Technical Leadership","Academic Writing"],"projectTypes":["Research","Method Development","Publication"],"internalStakeholders":["Principal Investigator","Graduate Students","Department Faculty","Core Facility Staff"],"externalStakeholders":["Funding Agencies","Journal Editors","Scientific Community"],"achievements":["Published 5 first-author papers in high-impact journals","Secured $50K in independent research funding","Presented research at 3 international conferences","Mentored 6 students"]},{"organizationName":"University of California, Berkeley","role":"PhD Candidate","location":"Berkeley, CA","startDate":"2010-09-01","endDate":"2015-07-31","description":"Doctoral research in analytical chemistry focusing on mass spectrometry method development. Taught undergraduate chemistry labs and mentored undergraduates.","technologies":[{"name":"Mass Spectrometry","type":"Core"},{"name":"HPLC","type":"Core"},{"name":"MATLAB","type":"Peripheral"},{"name":"Origin","type":"Core"},{"name":"ChemDraw","type":"Core"}],"keySkills":["Research","Data Analysis","Scientific Writing","Teaching","Experimental Design"],"competencies":["Scientific Research","Critical Thinking","Technical Communication","Teaching"],"projectTypes":["Research","Teaching","Publication"],"internalStakeholders":["Thesis Advisor","Thesis Committee","Lab Members","Undergraduate Students"],"externalStakeholders":["Scientific Community","Funding Agencies"],"achievements":["Published 8 peer-reviewed papers","Received NSF Graduate Research Fellowship","Won best poster award at ACS National Meeting","Graduated with distinction"]}]},
            'new-graduate': {"userName":"Jamie Rodriguez","userGoals":"Launch career in software development or cloud engineering, building practical skills while contributing to meaningful projects.","experiences":[{"organizationName":"TechStart Accelerator","role":"Software Engineering Intern","location":"Austin, TX","startDate":"2024-06-01","endDate":"2024-08-31","description":"Summer internship building full-stack web applications for startup clients. Worked on team of 4 interns developing React-based customer portal with Node.js backend. Participated in agile development process.","technologies":[{"name":"React","type":"Core"},{"name":"Node.js","type":"Core"},{"name":"JavaScript","type":"Core"},{"name":"Git","type":"Core"},{"name":"PostgreSQL","type":"Peripheral"},{"name":"Docker","type":"Peripheral"},{"name":"AWS","type":"Peripheral"},{"name":"Jira","type":"Peripheral"}],"keySkills":["Web Development","Problem Solving","Collaboration","Code Review","Debugging","API Development"],"competencies":["Software Development","Agile Methodology","Technical Communication","Learning Agility"],"projectTypes":["Agile","Web Application Development","API Development"],"internalStakeholders":["Engineering Manager","Senior Developers","Product Manager","Other Interns"],"externalStakeholders":["Startup Clients","End Users"],"achievements":["Delivered 3 major features ahead of schedule","Reduced page load time by 30% through optimization","Received offer for full-time position post-graduation","Presented final project to company leadership"]},{"organizationName":"University of Texas at Austin","role":"Computer Science Teaching Assistant","location":"Austin, TX","startDate":"2023-08-01","endDate":"2024-05-31","description":"Teaching assistant for Introduction to Programming (CS50). Held weekly office hours, graded assignments, and mentored 25 students. Created supplemental learning materials.","technologies":[{"name":"Python","type":"Core"},{"name":"Java","type":"Core"},{"name":"Git","type":"Core"},{"name":"Linux","type":"Peripheral"}],"keySkills":["Teaching","Communication","Mentoring","Problem Solving","Patience","Code Review"],"competencies":["Technical Communication","Mentoring","Knowledge Transfer","Empathy"],"projectTypes":["Teaching","Content Development","Student Support"],"internalStakeholders":["Course Professor","Other TAs","CS Department Staff"],"externalStakeholders":["Students"],"achievements":["Maintained 4.8/5.0 student satisfaction rating","Created 10+ tutorial videos with 500+ views","Helped 5 students improve from D to B grades","Nominated for Outstanding TA Award"]},{"organizationName":"UT Austin Robotics Club","role":"Software Team Lead","location":"Austin, TX","startDate":"2022-09-01","endDate":"2024-05-31","description":"Led team of 8 students developing autonomous robot for RoboCup competition. Designed computer vision and navigation systems. Coordinated with hardware and design teams.","technologies":[{"name":"Python","type":"Core"},{"name":"ROS","type":"Core"},{"name":"OpenCV","type":"Core"},{"name":"Git","type":"Core"},{"name":"Linux","type":"Core"},{"name":"C++","type":"Peripheral"},{"name":"MATLAB","type":"Peripheral"}],"keySkills":["Team Leadership","Project Management","Computer Vision","Robotics","Problem Solving","Collaboration"],"competencies":["Technical Leadership","Project Management","Systems Integration","Team Collaboration"],"projectTypes":["Robotics","Competition","Team Project"],"internalStakeholders":["Club President","Hardware Team","Mechanical Team","Faculty Advisor"],"externalStakeholders":["RoboCup Competition Organizers","Corporate Sponsors"],"achievements":["Led team to 3rd place finish at RoboCup 2024","Secured $5000 in corporate sponsorship","Grew software team from 3 to 8 members","Published technical writeup with 1000+ downloads"]},{"organizationName":"Local Coffee Shop","role":"Barista","location":"Austin, TX","startDate":"2021-06-01","endDate":"2023-08-31","description":"Part-time barista while attending university. Provided excellent customer service, managed cash register, opened and closed shop. Trained new employees.","technologies":[{"name":"Square POS","type":"Core"},{"name":"Excel","type":"Peripheral"}],"keySkills":["Customer Service","Communication","Time Management","Multitasking","Training","Reliability"],"competencies":["Customer Service","Work Ethic","Adaptability","Interpersonal Skills"],"projectTypes":["Customer Service","Operations"],"internalStakeholders":["Shop Manager","Co-workers"],"externalStakeholders":["Customers"],"achievements":["Employee of the Month 3 times","Trained 7 new baristas","Maintained 4.9/5 customer rating","Managed peak hours independently"]},{"organizationName":"University of Texas at Austin","role":"Bachelor of Science in Computer Science","location":"Austin, TX","startDate":"2020-08-01","endDate":"2024-05-31","description":"Graduated with honors, GPA 3.7/4.0. Relevant coursework: Data Structures, Algorithms, Software Engineering, Database Systems, Computer Networks, Machine Learning, Cloud Computing.","technologies":[{"name":"Python","type":"Core"},{"name":"Java","type":"Core"},{"name":"C++","type":"Peripheral"},{"name":"JavaScript","type":"Core"},{"name":"SQL","type":"Core"},{"name":"Git","type":"Core"},{"name":"Linux","type":"Core"}],"keySkills":["Programming","Algorithm Design","Data Structures","Problem Solving","Research","Academic Writing"],"competencies":["Computer Science Fundamentals","Critical Thinking","Learning Agility","Academic Excellence"],"projectTypes":["Academic Projects","Research","Coursework"],"internalStakeholders":["Professors","Classmates","Academic Advisors"],"externalStakeholders":[],"achievements":["Graduated with Honors (3.7 GPA)","Dean's List 6 semesters","Completed 5 major course projects","Member of Upsilon Pi Epsilon (CS Honor Society)"]}]},
            'data-analyst': {"userName":"Priya Patel","userGoals":"Advance from data analyst to senior data scientist or machine learning engineer role, focusing on predictive analytics and AI applications.","experiences":[{"organizationName":"Salesforce","role":"Senior Data Analyst","location":"San Francisco, CA","startDate":"2021-04-01","endDate":"","description":"Lead data analyst for Customer Success organization. Build dashboards and reports for executive leadership. Develop predictive models for customer churn and expansion. Collaborate with product and engineering teams on data instrumentation.","technologies":[{"name":"SQL","type":"Core"},{"name":"Python","type":"Core"},{"name":"Tableau","type":"Core"},{"name":"Snowflake","type":"Core"},{"name":"dbt","type":"Core"},{"name":"Git","type":"Core"},{"name":"Jupyter","type":"Core"},{"name":"scikit-learn","type":"Peripheral"},{"name":"Airflow","type":"Peripheral"},{"name":"AWS","type":"Peripheral"}],"keySkills":["Data Analysis","SQL","Python Programming","Data Visualization","Statistical Analysis","Business Intelligence","Predictive Modeling","Stakeholder Communication"],"competencies":["Data Analytics","Business Intelligence","Statistical Analysis","Technical Communication","Strategic Thinking","Project Management"],"projectTypes":["Analytics","Dashboard Development","Predictive Modeling","Data Infrastructure"],"internalStakeholders":["VP of Customer Success","Product Management","Engineering Team","Finance Team","Sales Leadership"],"externalStakeholders":["Enterprise Customers","Technology Partners"],"achievements":["Developed churn prediction model with 85% accuracy, preventing $2M in potential churn","Built executive dashboard used by C-suite daily","Reduced report generation time by 70% through automation","Led data quality initiative improving accuracy by 40%","Mentored 3 junior analysts"]},{"organizationName":"Lyft","role":"Data Analyst","location":"San Francisco, CA","startDate":"2019-01-15","endDate":"2021-03-31","description":"Data analyst supporting Operations and Driver Experience teams. Analyzed driver retention, supply-demand dynamics, and operational efficiency. Built dashboards and ad-hoc analyses to inform business decisions.","technologies":[{"name":"SQL","type":"Core"},{"name":"Python","type":"Core"},{"name":"Tableau","type":"Core"},{"name":"Mode Analytics","type":"Core"},{"name":"Jupyter","type":"Core"},{"name":"Git","type":"Peripheral"},{"name":"AWS Redshift","type":"Peripheral"},{"name":"R","type":"Peripheral"}],"keySkills":["Data Analysis","SQL","Python","Data Visualization","A/B Testing","Statistical Analysis","Business Acumen"],"competencies":["Data Analytics","Business Intelligence","Analytical Problem Solving","Cross-Functional Collaboration","Data Storytelling"],"projectTypes":["Analytics","A/B Testing","Dashboard Development","Ad-Hoc Analysis"],"internalStakeholders":["Operations Team","Driver Experience Team","Product Managers","Data Science Team"],"externalStakeholders":["Drivers","Passengers"],"achievements":["Identified driver onboarding bottleneck saving $500K annually","Designed and analyzed 15+ A/B tests","Created driver retention dashboard tracking 20+ KPIs","Presented insights to VP-level leadership monthly"]},{"organizationName":"Deloitte Consulting","role":"Business Analytics Consultant","location":"Chicago, IL","startDate":"2017-07-01","endDate":"2018-12-31","description":"Management consulting focusing on data analytics and business intelligence for Fortune 500 clients. Conducted market research, financial analysis, and developed data-driven recommendations. Built financial models and client presentations.","technologies":[{"name":"Excel","type":"Core"},{"name":"PowerPoint","type":"Core"},{"name":"SQL","type":"Core"},{"name":"Tableau","type":"Peripheral"},{"name":"Python","type":"Peripheral"},{"name":"Alteryx","type":"Peripheral"}],"keySkills":["Business Analysis","Financial Modeling","Data Analysis","Client Management","Presentation Skills","Strategic Thinking","Excel Modeling"],"competencies":["Management Consulting","Business Analysis","Client Management","Strategic Communication","Problem Solving"],"projectTypes":["Consulting","Financial Analysis","Market Research","Strategy Development"],"internalStakeholders":["Engagement Manager","Senior Consultants","Practice Leadership"],"externalStakeholders":["Client C-Suite Executives","Client Business Units","Third-Party Data Providers"],"achievements":["Delivered 6 successful client engagements","Recommended strategy generating $10M in client savings","Received 'Above Expectations' rating both years","Built financial model used as template for practice"]},{"organizationName":"Northwestern University","role":"Graduate Research Assistant","location":"Evanston, IL","startDate":"2015-09-01","endDate":"2017-06-30","description":"Research assistant for Kellogg School of Management professor studying consumer behavior analytics. Collected and analyzed survey data, performed statistical analysis, and contributed to academic publications.","technologies":[{"name":"R","type":"Core"},{"name":"SPSS","type":"Core"},{"name":"Excel","type":"Core"},{"name":"Qualtrics","type":"Peripheral"},{"name":"Python","type":"Peripheral"}],"keySkills":["Statistical Analysis","Research Design","Data Collection","Academic Writing","R Programming","Survey Design"],"competencies":["Research Methodology","Statistical Analysis","Academic Writing","Critical Thinking"],"projectTypes":["Research","Statistical Analysis","Publication"],"internalStakeholders":["Faculty Advisor","PhD Students","Research Participants"],"externalStakeholders":["Academic Community","Journal Reviewers"],"achievements":["Co-authored 2 peer-reviewed journal articles","Analyzed data from 5000+ survey responses","Presented research at 2 academic conferences","Graduated with 3.9 GPA"]},{"organizationName":"Northwestern University - Kellogg School of Management","role":"Master of Science in Analytics","location":"Evanston, IL","startDate":"2015-09-01","endDate":"2017-06-30","description":"Intensive analytics program combining statistics, machine learning, and business strategy. Capstone project: Built predictive model for retail inventory optimization achieving 25% improvement over baseline.","technologies":[{"name":"R","type":"Core"},{"name":"Python","type":"Core"},{"name":"SQL","type":"Core"},{"name":"Tableau","type":"Core"},{"name":"SAS","type":"Peripheral"},{"name":"Excel","type":"Core"}],"keySkills":["Machine Learning","Statistical Modeling","Data Mining","Predictive Analytics","Data Visualization","Business Strategy"],"competencies":["Analytical Methods","Business Analytics","Machine Learning","Statistical Analysis"],"projectTypes":["Academic Projects","Capstone Project","Coursework"],"internalStakeholders":["Professors","Classmates","Capstone Sponsor"],"externalStakeholders":["Industry Partners"],"achievements":["Graduated with distinction (3.9 GPA)","Capstone project winner - 'Best Technical Implementation'","Teaching assistant for Predictive Analytics course","Member of Analytics Club leadership team"]},{"organizationName":"University of Illinois Urbana-Champaign","role":"Bachelor of Science in Statistics","location":"Urbana, IL","startDate":"2011-08-01","endDate":"2015-05-31","description":"Undergraduate degree in statistics with minor in computer science. Participated in data science competitions and undergraduate research program.","technologies":[{"name":"R","type":"Core"},{"name":"Python","type":"Peripheral"},{"name":"MATLAB","type":"Peripheral"},{"name":"Excel","type":"Core"},{"name":"SAS","type":"Peripheral"}],"keySkills":["Statistics","Probability","Data Analysis","Programming","Mathematics","Research"],"competencies":["Statistical Theory","Mathematical Reasoning","Analytical Thinking","Programming"],"projectTypes":["Academic Projects","Research","Competition"],"internalStakeholders":["Professors","Study Groups","Research Supervisor"],"externalStakeholders":[],"achievements":["Graduated summa cum laude (3.85 GPA)","Top 10% finish in Kaggle competition","Undergraduate Research Award","Statistics Department Scholarship recipient"]}]}
        };

        // Load Example Profile
        function loadExampleProfile(profileName) {
            // Warn if there are existing experiences
            if (experiences.length > 0) {
                const confirmLoad = confirm(
                    `Loading this example profile will replace all existing experiences (${experiences.length} entries).\n\nAre you sure you want to continue?`
                );
                if (!confirmLoad) return;
            }

            try {
                const data = exampleProfiles[profileName];
                if (!data) {
                    throw new Error('Example profile not found');
                }

                // Load the profile data
                if (data.userName) document.getElementById('userName').value = data.userName;
                if (data.userGoals) document.getElementById('userGoals').value = data.userGoals;
                if (data.experiences) experiences = data.experiences;

                saveToLocalStorage();
                renderExperiences();
            } catch (error) {
                alert('Error loading example profile: ' + error.message);
            }
        }

        // Import/Export
        function importJSON(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.userName) document.getElementById('userName').value = data.userName;
                    if (data.userGoals) document.getElementById('userGoals').value = data.userGoals;
                    if (data.experiences) experiences = data.experiences;
                    saveToLocalStorage();
                    renderExperiences();
                } catch (error) {
                    alert('Error importing JSON: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        function exportJSON() {
            const data = {
                userName: document.getElementById('userName').value,
                userGoals: document.getElementById('userGoals').value,
                experiences: experiences,
                exportDate: new Date().toISOString(),
                version: '1.0'
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `experience-export-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function clearAll() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                experiences = [];
                document.getElementById('userName').value = '';
                document.getElementById('userGoals').value = '';
                saveToLocalStorage();
                renderExperiences();
            }
        }

        // Local Storage
        function saveToLocalStorage() {
            const data = {
                userName: document.getElementById('userName').value,
                userGoals: document.getElementById('userGoals').value,
                experiences: experiences
            };
            localStorage.setItem('cleansheet-experiences', JSON.stringify(data));
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('cleansheet-experiences');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    if (data.userName) document.getElementById('userName').value = data.userName;
                    if (data.userGoals) document.getElementById('userGoals').value = data.userGoals;
                    if (data.experiences) experiences = data.experiences;
                } catch (error) {
                    console.error('Error loading from localStorage:', error);
                }
            }
        }

        // Auto-save on name/goals change
        document.getElementById('userName').addEventListener('change', saveToLocalStorage);
        document.getElementById('userGoals').addEventListener('change', saveToLocalStorage);

        // Reporting Panel Functions
        function calculateYearsOfExperience(experiences, filterFn) {
            const yearsMap = new Map();

            experiences.forEach(exp => {
                if (!exp.startDate || !filterFn(exp)) return;

                const startYear = parseInt(exp.startDate.split('-')[0]);
                const startMonth = parseInt(exp.startDate.split('-')[1] || '1');
                const endYear = exp.endDate ? parseInt(exp.endDate.split('-')[0]) : new Date().getFullYear();
                const endMonth = exp.endDate ? parseInt(exp.endDate.split('-')[1] || '12') : new Date().getMonth() + 1;

                // Mark each year-month combination
                for (let year = startYear; year <= endYear; year++) {
                    const monthStart = (year === startYear) ? startMonth : 1;
                    const monthEnd = (year === endYear) ? endMonth : 12;

                    for (let month = monthStart; month <= monthEnd; month++) {
                        yearsMap.set(`${year}-${month}`, true);
                    }
                }
            });

            return Math.round((yearsMap.size / 12) * 10) / 10;
        }

        function generateReportingPanel() {
            const panel = document.getElementById('reportingPanel');

            if (experiences.length === 0) {
                panel.style.display = 'none';
                return;
            }

            panel.style.display = 'block';

            // Calculate total years
            const totalYears = calculateYearsOfExperience(experiences, () => true);
            document.getElementById('totalYears').textContent = totalYears;

            // Collect and calculate years for each category
            const coreTech = new Map();
            const peripheralTech = new Map();
            const skills = new Map();
            const competencies = new Map();
            const projectTypes = new Map();

            // Collect unique items first
            const uniqueTech = new Set();
            const uniqueSkills = new Set();
            const uniqueCompetencies = new Set();
            const uniqueProjectTypes = new Set();
            const techTypes = new Map(); // Track Core vs Peripheral for each tech

            experiences.forEach(exp => {
                (exp.technologies || []).forEach(tech => {
                    uniqueTech.add(tech.name);
                    // Store the type (prefer Core if tech appears as both)
                    if (!techTypes.has(tech.name) || tech.type === 'Core') {
                        techTypes.set(tech.name, tech.type);
                    }
                });
                (exp.keySkills || []).forEach(skill => uniqueSkills.add(skill));
                (exp.competencies || []).forEach(comp => uniqueCompetencies.add(comp));
                (exp.projectTypes || []).forEach(type => uniqueProjectTypes.add(type));
            });

            // Calculate years for each unique item
            uniqueTech.forEach(techName => {
                const years = calculateYearsOfExperience(experiences, e =>
                    (e.technologies || []).some(t => t.name === techName)
                );
                const type = techTypes.get(techName);
                const map = type === 'Core' ? coreTech : peripheralTech;
                map.set(techName, years);
            });

            uniqueSkills.forEach(skill => {
                const years = calculateYearsOfExperience(experiences, e =>
                    (e.keySkills || []).includes(skill)
                );
                skills.set(skill, years);
            });

            uniqueCompetencies.forEach(comp => {
                const years = calculateYearsOfExperience(experiences, e =>
                    (e.competencies || []).includes(comp)
                );
                competencies.set(comp, years);
            });

            uniqueProjectTypes.forEach(type => {
                const years = calculateYearsOfExperience(experiences, e =>
                    (e.projectTypes || []).includes(type)
                );
                projectTypes.set(type, years);
            });

            // Generate stats HTML
            function generateStatsHTML(map, limit = 10) {
                const sorted = Array.from(map.entries())
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, limit);

                if (sorted.length === 0) {
                    return '<div class="stat-item"><span class="stat-label">No data</span></div>';
                }

                return sorted.map(([name, years]) => `
                    <div class="stat-item">
                        <span class="stat-label">${name}</span>
                        <span class="stat-value">${years}<span class="stat-years">yr</span></span>
                    </div>
                `).join('');
            }

            // Combine Core and Peripheral tech with badges
            function generateTechStatsHTML() {
                const allTech = [];

                // Add core tech
                coreTech.forEach((years, name) => {
                    allTech.push({ name, years, type: 'Core' });
                });

                // Add peripheral tech
                peripheralTech.forEach((years, name) => {
                    allTech.push({ name, years, type: 'Peripheral' });
                });

                // Sort by years
                allTech.sort((a, b) => b.years - a.years);

                // Take top 15
                const top = allTech.slice(0, 15);

                if (top.length === 0) {
                    return '<div class="stat-item"><span class="stat-label">No data</span></div>';
                }

                return top.map(tech => {
                    const badgeClass = tech.type === 'Core' ? 'core' : 'peripheral';
                    return `
                        <div class="stat-item">
                            <span class="stat-label">
                                ${tech.name}
                                <span class="inline-tag ${badgeClass}" style="margin-left: 4px; padding: 2px 6px; font-size: 10px;">${tech.type}</span>
                            </span>
                            <span class="stat-value">${tech.years}<span class="stat-years">yr</span></span>
                        </div>
                    `;
                }).join('');
            }

            document.getElementById('techStats').innerHTML = generateTechStatsHTML();
            document.getElementById('skillStats').innerHTML = generateStatsHTML(skills);
            document.getElementById('competencyStats').innerHTML = generateStatsHTML(competencies);
            document.getElementById('projectTypeStats').innerHTML = generateStatsHTML(projectTypes);
        }

        function generateHeatmap_OLD() {
            const container = document.getElementById('heatmapContainer');

            // Get all years from experiences
            const years = [];
            experiences.forEach(exp => {
                if (exp.startDate) {
                    const startYear = parseInt(exp.startDate.split('-')[0]);
                    const endYear = exp.endDate ? parseInt(exp.endDate.split('-')[0]) : new Date().getFullYear();
                    for (let y = startYear; y <= endYear; y++) {
                        if (!years.includes(y)) years.push(y);
                    }
                }
            });
            years.sort();

            // Collect all technologies and project types
            const items = new Map();
            experiences.forEach(exp => {
                if (exp.startDate) {
                    const startYear = parseInt(exp.startDate.split('-')[0]);
                    const endYear = exp.endDate ? parseInt(exp.endDate.split('-')[0]) : new Date().getFullYear();

                    // Technologies
                    (exp.technologies || []).forEach(tech => {
                        const key = `${tech.name} (Tech)`;
                        if (!items.has(key)) items.set(key, new Map());
                        for (let y = startYear; y <= endYear; y++) {
                            items.get(key).set(y, (items.get(key).get(y) || 0) + 1);
                        }
                    });

                    // Project Types
                    (exp.projectTypes || []).forEach(type => {
                        const key = `${type} (Project)`;
                        if (!items.has(key)) items.set(key, new Map());
                        for (let y = startYear; y <= endYear; y++) {
                            items.get(key).set(y, (items.get(key).get(y) || 0) + 1);
                        }
                    });
                }
            });

            // Sort by total usage
            const sortedItems = Array.from(items.entries()).sort((a, b) => {
                const sumA = Array.from(a[1].values()).reduce((acc, v) => acc + v, 0);
                const sumB = Array.from(b[1].values()).reduce((acc, v) => acc + v, 0);
                return sumB - sumA;
            }).slice(0, 15); // Top 15

            // Generate heatmap HTML
            let html = '<div class="heatmap-years">';
            years.forEach(year => {
                html += `<div class="heatmap-year">${year}</div>`;
            });
            html += '</div><div class="heatmap">';

            sortedItems.forEach(([label, yearData]) => {
                html += '<div class="heatmap-row">';
                html += `<div class="heatmap-label">${label}</div>`;
                html += '<div class="heatmap-cells">';
                years.forEach(year => {
                    const value = yearData.get(year) || 0;
                    const displayValue = value > 0 ? value : '';
                    html += `<div class="heatmap-cell" data-value="${Math.min(value, 5)}" title="${label} (${year}): ${value}">${displayValue}</div>`;
                });
                html += '</div></div>';
            });

            html += '</div>';
            container.innerHTML = html;
        }

        function generateCareerMap() {
            const container = document.getElementById('careerMapContainer');

            // Location coordinates (simplified US map-like positioning)
            const locationCoords = {
                'McLean, VA': { x: 75, y: 52 },
                'Arlington, VA': { x: 76, y: 53 },
                'Glastonbury, CT': { x: 82, y: 38 },
                'South Glastonbury, CT': { x: 83, y: 39 },
                'CT': { x: 82, y: 38 },
                'VA': { x: 75, y: 52 }
            };

            // Group experiences by location
            const locationGroups = new Map();
            experiences.forEach(exp => {
                if (exp.location) {
                    const location = exp.location.trim();
                    if (!locationGroups.has(location)) {
                        locationGroups.set(location, []);
                    }
                    locationGroups.get(location).push(exp);
                }
            });

            // Generate map HTML
            let html = '<div class="map-container">';
            let tooltipId = 0;

            locationGroups.forEach((exps, location) => {
                // Try to match location to coordinates
                let coords = locationCoords[location];

                // Try partial matches
                if (!coords) {
                    for (const [key, value] of Object.entries(locationCoords)) {
                        if (location.includes(key) || key.includes(location)) {
                            coords = value;
                            break;
                        }
                    }
                }

                // Default to semi-random position if not found
                if (!coords) {
                    const hash = location.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
                    coords = {
                        x: 30 + (hash % 40),
                        y: 30 + ((hash * 7) % 40)
                    };
                }

                const count = exps.length;
                const markerClass = count > 1 ? 'multiple' : 'single';
                const markerSize = count > 1 ? 'multiple' : '';

                html += `
                    <div class="location-marker ${markerSize}"
                         style="left: ${coords.x}%; top: ${coords.y}%;"
                         onmouseenter="showLocationTooltip(${tooltipId}, event)"
                         onmouseleave="hideLocationTooltip(${tooltipId})"
                         onclick="toggleLocationTooltip(${tooltipId})">
                        ${count}
                    </div>
                    <div id="tooltip-${tooltipId}" class="location-tooltip" style="left: ${coords.x + 5}%; top: ${coords.y - 5}%;">
                        <div class="tooltip-header">${location}</div>
                        ${exps.map(exp => {
                            const startDate = exp.startDate ? new Date(exp.startDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short' }) : 'Unknown';
                            const endDate = exp.endDate ? new Date(exp.endDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short' }) : 'Present';
                            return `
                                <div class="tooltip-item">
                                    <div class="tooltip-role">${exp.role}</div>
                                    <div class="tooltip-org">${exp.organizationName}</div>
                                    <div class="tooltip-dates">${startDate} - ${endDate}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                tooltipId++;
            });

            // Add legend
            html += `
                <div class="map-legend">
                    <div class="legend-title">Career Stops</div>
                    <div class="legend-item">
                        <div class="legend-marker single"></div>
                        <span>Single role</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-marker multiple"></div>
                        <span>Multiple roles</span>
                    </div>
                </div>
            `;

            html += '</div>';
            container.innerHTML = html;
        }

        let activeTooltip = null;

        function showLocationTooltip(id, event) {
            const tooltip = document.getElementById(`tooltip-${id}`);
            if (tooltip) {
                tooltip.classList.add('active');
            }
        }

        function hideLocationTooltip(id) {
            const tooltip = document.getElementById(`tooltip-${id}`);
            if (tooltip && activeTooltip !== id) {
                tooltip.classList.remove('active');
            }
        }

        function toggleLocationTooltip(id) {
            const tooltip = document.getElementById(`tooltip-${id}`);
            if (tooltip) {
                const isActive = tooltip.classList.contains('active');

                // Hide all tooltips
                document.querySelectorAll('.location-tooltip').forEach(t => t.classList.remove('active'));

                if (!isActive) {
                    tooltip.classList.add('active');
                    activeTooltip = id;
                } else {
                    activeTooltip = null;
                }
            }
        }

        function generateSkillsCloud() {
            const container = document.getElementById('skillsNetwork');

            // Collect all skills and competencies with frequency
            const skillMap = new Map();
            experiences.forEach(exp => {
                (exp.keySkills || []).forEach(skill => {
                    skillMap.set(skill, (skillMap.get(skill) || 0) + 1);
                });
                (exp.competencies || []).forEach(comp => {
                    skillMap.set(comp, (skillMap.get(comp) || 0) + 1);
                });
            });

            // Sort by frequency
            const sorted = Array.from(skillMap.entries()).sort((a, b) => b[1] - a[1]);

            // Generate bubbles
            let html = '';
            sorted.forEach(([skill, count]) => {
                let frequency = 'low';
                if (count >= 5) frequency = 'high';
                else if (count >= 3) frequency = 'medium';

                html += `<div class="skill-bubble" data-frequency="${frequency}" title="Used in ${count} experiences">${skill}</div>`;
            });

            container.innerHTML = html;
        }

        function updateSummaryPanel() {
            generateReportingPanel();
        }

        // Initialize on load
        init();
    </script>
</body>
</html>